!function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var i={};e.m=t,e.c=i,e.d=function(t,i,n){e.o(t,i)||Object.defineProperty(t,i,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(i,"a",i),i},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}({"+VoV":function(t,e){(function(){var t;t=document.getElementsByClassName("js-fixed-element"),$(document).on("shown.bs.modal",".modal",function(t){if(!osu.isIos)return $(t.target).find(".modal-af").focus()}),$(document).on("hidden.bs.modal",".modal",function(){return $(".modal-backdrop").remove(),$("body, .js-fixed-element").css({paddingRight:""})}),$(document).on("show.bs.modal",".modal",function(){var e,i,n,o,r,s,a,u;for(Timeout.set(10,function(){return $(".modal-backdrop").trigger("bsTransitionEnd")}),e=[],n=o=0,s=t.length;o<s;n=++o)i=t[n],e[n]=i.getBoundingClientRect(),e[n].skip="fixed"!==getComputedStyle(i).position;for(u=[],n=r=0,a=t.length;r<a;n=++r)i=t[n],e[n].skip||(i.style.left=e[n].left+"px",u.push(i.style.width=e[n].width+"px"));return u}),$(document).on("shown.bs.modal",".modal",function(){var e,i,n,o,r,s,a,u,c;for(a=$("body").css("padding-right"),c=[],i=n=0,r=t.length;n<r;i=++n)e=t[i],c[i]="fixed"!==getComputedStyle(e).position;for(u=[],i=o=0,s=t.length;o<s;i=++o)e=t[i],c[i]||(e.style.paddingRight=a,e.style.left="",u.push(e.style.width=""));return u})}).call(window)},"+rNv":function(t,e,i){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},"+uMr":function(t,e,i){"use strict";e.__esModule=!0;var n=i("lx4r");e.default=n.default},"/thC":function(t,e){(function(){var t;null==this.polyfills&&(this.polyfills=new Polyfills),Lang.setLocale(currentLocale),Lang.setFallback(fallbackLocale),jQuery.timeago.settings.allowFuture=!0,$(document).on("turbolinks:request-start",LoadingOverlay.show),$(document).on("turbolinks:request-end",LoadingOverlay.hide),$(document).on("submit","form",function(t){if("0"!==t.currentTarget.dataset.loadingOverlay)return LoadingOverlay.show()}),$(document).on("turbolinks:load",function(){return BeatmapPack.initialize(),StoreSupporterTag.initialize(),StoreCheckout.initialize()}),null==this.accountEdit&&(this.accountEdit=new AccountEdit),null==this.accountEditAvatar&&(this.accountEditAvatar=new AccountEditAvatar),null==this.accountEditPlaystyle&&(this.accountEditPlaystyle=new AccountEditPlaystyle),null==this.beatmapsetDownloadObserver&&(this.beatmapsetDownloadObserver=new BeatmapsetDownloadObserver),null==this.changelogChartLoader&&(this.changelogChartLoader=new ChangelogChartLoader),null==this.checkboxValidation&&(this.checkboxValidation=new CheckboxValidation),null==this.clickMenu&&(this.clickMenu=new ClickMenu),null==this.currentUserObserver&&(this.currentUserObserver=new CurrentUserObserver),null==this.fancyGraph&&(this.fancyGraph=new FancyGraph),null==this.formClear&&(this.formClear=new FormClear),null==this.formError&&(this.formError=new FormError),null==this.formPlaceholderHide&&(this.formPlaceholderHide=new FormPlaceholderHide),null==this.formToggle&&(this.formToggle=new FormToggle),null==this.forum&&(this.forum=new Forum),null==this.forumAutoClick&&(this.forumAutoClick=new ForumAutoClick),null==this.forumCover&&(this.forumCover=new ForumCover),null==this.forumTopicTitle&&(this.forumTopicTitle=new ForumTopicTitle),null==this.forumTopicWatchAjax&&(this.forumTopicWatchAjax=new ForumTopicWatchAjax),null==this.gallery&&(this.gallery=new Gallery),null==this.globalDrag&&(this.globalDrag=new GlobalDrag),null==this.landingGraph&&(this.landingGraph=new LandingGraph),null==this.menu&&(this.menu=new Menu),null==this.nav2&&(this.nav2=new Nav2),null==this.osuAudio&&(this.osuAudio=new OsuAudio),null==this.osuLayzr&&(this.osuLayzr=new OsuLayzr),null==this.postPreview&&(this.postPreview=new PostPreview),null==this.reactTurbolinks&&(this.reactTurbolinks=new ReactTurbolinks),null==this.replyPreview&&(this.replyPreview=new ReplyPreview),null==this.scale&&(this.scale=new Scale),null==this.search&&(this.search=new Search),null==this.stickyFooter&&(this.stickyFooter=new StickyFooter),null==this.stickyHeader&&(this.stickyHeader=new StickyHeader),null==this.syncHeight&&(this.syncHeight=new SyncHeight),null==this.throttledWindowEvents&&(this.throttledWindowEvents=new ThrottledWindowEvents),null==this.timeago&&(this.timeago=new Timeago),null==this.tooltipBeatmap&&(this.tooltipBeatmap=new TooltipBeatmap),null==this.tooltipDefault&&(this.tooltipDefault=new TooltipDefault),null==this.turbolinksReload&&(this.turbolinksReload=new TurbolinksReload),null==this.twitchPlayer&&(this.twitchPlayer=new TwitchPlayer),null==this.userCard&&(this.userCard=new UserCard),null==this.userLogin&&(this.userLogin=new UserLogin),null==this.userVerification&&(this.userVerification=new UserVerification),null==this.wiki&&(this.wiki=new Wiki),null==this.formConfirmation&&(this.formConfirmation=new FormConfirmation(this.formError)),null==this.forumPostsSeek&&(this.forumPostsSeek=new ForumPostsSeek(this.forum)),null==this.forumSearchModal&&(this.forumSearchModal=new ForumSearchModal(this.forum)),null==this.forumTopicPostJump&&(this.forumTopicPostJump=new ForumTopicPostJump(this.forum)),null==this.forumTopicReply&&(this.forumTopicReply=new ForumTopicReply(this.forum,this.stickyFooter)),null==this.turbolinksDisable&&(this.turbolinksDisable=new TurbolinksDisable(this.turbolinksReload)),null==this.turbolinksDisqus&&(this.turbolinksDisqus=new TurbolinksDisqus(this.turbolinksReload)),$(document).on("change",".js-url-selector",function(t){return osu.navigate(t.target.value,"1"===t.target.dataset.keepScroll)}),$(document).on("keydown",function(t){if(27===t.keyCode)return $.publish("key:esc")}),reactTurbolinks.register("countdownTimer",CountdownTimer,function(t){return{deadline:t.dataset.deadline}}),reactTurbolinks.register("friendButton",FriendButton,function(t){return{container:t,user_id:parseInt(t.dataset.target)}}),reactTurbolinks.register("beatmapset-panel",BeatmapsetPanel,function(t){return JSON.parse(t.dataset.beatmapsetPanel)}),t=document.location.protocol+"//"+document.location.host,document.location.port&&(t+=":"+document.location.port),t+="/",$.expr[":"].internal=function(e,i,n,o){var r,s;return r=$(e),s=r.attr("href")||"",s.substring(0,t.length)===t||-1===s.indexOf(":")}}).call(window)},0:function(t,e,i){i("97DG"),t.exports=i("1CH1")},"1CH1":function(t,e){},"1G9n":function(t,e){(function(){var t,e,i,n,o,r,s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;t=ReactDOMFactories.a,i=ReactDOMFactories.i,n=ReactDOMFactories.span,r=ReactDOMFactories.tr,o=ReactDOMFactories.td,e=React.createElement,this.TracklistTrack=function(a){function u(){return u.__super__.constructor.apply(this,arguments)}return s(u,a),u.prototype.render=function(){return r({className:"tracklist__row"+(this.props.track.selected?" tracklist__row--selected":"")},o({},e(TrackPreview,{track:this.props.track})),o({className:"tracklist__title"+(this.props.track.exclusive?" tracklist__title--exclusive":"")},this.props.track.exclusive?i({className:"fa fa-fw fa-lg fa-extra-osu tracklist__exclusive-icon",title:osu.trans("artist.songs.exclusive")}):void 0,n({className:"tracklist__name u-ellipsis-overflow"},this.props.track.title+" ",n({className:"tracklist__version"},this.props.track.version))),o({className:"tracklist__length"},this.props.track.length),o({className:"tracklist__bpm"},this.props.track.bpm+"bpm"),o({className:"tracklist__genre u-ellipsis-overflow"},this.props.track.genre),o({className:"tracklist__dl"},this.props.track.osz?t({className:"tracklist__link",href:this.props.track.osz,title:osu.trans("artist.beatmaps.download")},i({className:"fa fa-fw fa-cloud-download"})):n({className:"tracklist__link--disabled",title:osu.trans("artist.beatmaps.download-na")},i({className:"fa fa-fw fa-cloud-download"}))))},u}(React.Component)}).call(window)},"1IAD":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ChangelogChartLoader=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-changelog-chart"),e.prototype.initialize=function(){if(null!=this.container[0])return this.container[0]._chart=new ChangelogChart(this.container[0]),this.container[0]._chart.loadData()},e.prototype.resize=function(){var t;return null!=(t=this.container[0])?t._chart.resize():void 0},e}()}).call(window)},"1RZw":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicWatchAjax=function(){function e(){this.shouldContinue=t(this.shouldContinue,this),this.loading=t(this.loading,this),this.fail=t(this.fail,this),this.done=t(this.done,this),this.abortAll=t(this.abortAll,this),$(document).on("ajax:before",".js-forum-topic-watch-ajax",this.shouldContinue),$(document).on("ajax:send",".js-forum-topic-watch-ajax",this.loading),$(document).on("ajax:error",".js-forum-topic-watch-ajax",this.fail),$(document).on("ajax:success",".js-forum-topic-watch-ajax",this.done),this.xhr=[],this.unknownState=!1}return e.prototype.abortAll=function(){var t,e;for(t=[];null!=(e=this.xhr.pop());)t.push(e.abort());return t},e.prototype.done=function(){return this.unknownState=!1},e.prototype.fail=function(t,e,i){var n;n=t.currentTarget,"abort"===i&&(n.dataset.skipAjaxErrorPopup="1"),n.classList.remove("js-forum-topic-watch-ajax--loading"),n.disabled=!1},e.prototype.loading=function(t,e){var i;this.unknownState=!0,this.abortAll(),this.xhr.push(e),LoadingOverlay.hide(),i=t.currentTarget,i.dataset.skipAjaxErrorPopup="0",i.classList.add("js-forum-topic-watch-ajax--loading"),i.disabled=!0},e.prototype.shouldContinue=function(t){return this.unknownState||"1"!==t.currentTarget.dataset.forumTopicWatchAjaxIsActive},e}()}).call(window)},"1rh3":function(t,e){(function(){var t,e,i,n,o,r,s,a,u,c,l,h,p=function(t,e){return function(){return t.apply(e,arguments)}},d=function(t,e){function i(){this.constructor=t}for(var n in e)f.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},f={}.hasOwnProperty;t=ReactDOMFactories.button,e=ReactDOMFactories.div,n=ReactDOMFactories.em,o=ReactDOMFactories.form,r=ReactDOMFactories.i,s=ReactDOMFactories.label,a=ReactDOMFactories.option,u=ReactDOMFactories.select,c=ReactDOMFactories.span,l=ReactDOMFactories.strong,h=ReactDOMFactories.textarea,i=React.createElement,this.BBCodeEditor=function(f){function m(){return this.sendOnChange=p(this.sendOnChange,this),this._save=p(this._save,this),this._reset=p(this._reset,this),this._cancel=p(this._cancel,this),this.onKeyDown=p(this.onKeyDown,this),this.setBody=p(this.setBody,this),this.toolbarButton=p(this.toolbarButton,this),this.actionButton=p(this.actionButton,this),this.render=p(this.render,this),this.componentDidMount=p(this.componentDidMount,this),m.__super__.constructor.apply(this,arguments)}return d(m,f),m.prototype.componentDidMount=function(){return this.body.focus()},m.prototype.render=function(){var t,p,d,f,m,g;for(t="post-editor",g=null!=(m=this.props.modifiers)?m:[],p=0,d=g.length;p<d;p++)f=g[p],t+=" post-editor--"+f;return o({className:t},h({className:"post-editor__textarea",name:"body",placeholder:this.props.placeholder,defaultValue:this.props.rawValue,disabled:this.props.disabled,onKeyDown:this.onKeyDown,ref:this.setBody}),e({className:"post-editor__footer"},e({className:"post-editor-footer"},e({className:"post-editor-footer__col post-editor-footer__col--toolbar"},e({className:"post-box-toolbar"},this.toolbarButton("bold",l(null,"B")),this.toolbarButton("italic",n(null,"I")),this.toolbarButton("strikethrough",i(Icon,{name:"strikethrough"})),this.toolbarButton("heading",c(null,"H")),this.toolbarButton("link",i(Icon,{name:"link"})),this.toolbarButton("spoilerbox",i(Icon,{name:"barcode"})),this.toolbarButton("list-numbered",i(Icon,{name:"list-ol"})),this.toolbarButton("list",i(Icon,{name:"list"})),this.toolbarButton("image",i(Icon,{name:"image"})),s({className:"bbcode-size-select",title:osu.trans("bbcode.size._")},c({className:"bbcode-size-select__label"},osu.trans("bbcode.size._")),r({className:"fa fa-chevron-down"}),u({className:"bbcode-size-select__select js-bbcode-btn--size",disabled:this.props.disabled,defaultValue:"100"},a({value:"50"},osu.trans("bbcode.size.tiny")),a({value:"85"},osu.trans("bbcode.size.small")),a({value:"100"},osu.trans("bbcode.size.normal")),a({value:"150"},osu.trans("bbcode.size.large")))))),e({className:"post-editor-footer__col post-editor-footer__col--actions"},this.actionButton(this._cancel,osu.trans("common.buttons.cancel")),this.actionButton(this._reset,osu.trans("common.buttons.reset")),this.actionButton(this._save,osu.trans("common.buttons.save"))))))},m.prototype.actionButton=function(e,i){return t({className:"btn-osu btn-osu--post-editor btn-osu-default",disabled:this.props.disabled,type:"button",onClick:e},i)},m.prototype.toolbarButton=function(e,i){return t({className:"btn-circle btn-circle--bbcode js-bbcode-btn--"+e,disabled:this.props.disabled,title:osu.trans("bbcode."+_.snakeCase(e)),type:"button"},c({className:"btn-circle__content"},i))},m.prototype.setBody=function(t){return this.body=t},m.prototype.onKeyDown=function(t){return 27===t.keyCode&&this._cancel()},m.prototype._cancel=function(t){return this.body.value=this.props.rawValue,this.sendOnChange({event:t,type:"cancel"})},m.prototype._reset=function(t){return this.body.value=this.props.rawValue,this.sendOnChange({event:t,type:"reset"}),this.body.focus()},m.prototype._save=function(t){return this.sendOnChange({event:t,type:"save"})},m.prototype.sendOnChange=function(t){var e,i,n;return i=t.event,n=t.type,"function"==typeof(e=this.props).onChange?e.onChange({event:i,type:n,value:this.body.value,hasChanged:this.body.value!==this.props.rawValue}):void 0},m}(React.Component)}).call(window)},"2pDC":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyFooter=function(){function e(){this.stickOrUnstick=t(this.stickOrUnstick,this),this.stickMarker=document.getElementsByClassName("js-sticky-footer"),this.permanentFixedFooter=document.getElementsByClassName("js-permanent-fixed-footer"),$(window).on("throttled-scroll throttled-resize",this.stickOrUnstick),$.subscribe("stickyFooter:check",this.stickOrUnstick),$(document).on("turbolinks:load osu:page:change",this.stickOrUnstick)}return e.prototype.stickOrUnstick=function(){var t,e,i,n,o;if(0!==this.stickMarker.length){for(t=window.innerHeight-this.permanentFixedFooter[0].offsetHeight,o=this.stickMarker,e=0,i=o.length;e<i;e++)if(n=o[e],"1"!==n.getAttribute("data-sticky-footer-disabled")&&n.getBoundingClientRect().top>=t)return void $.publish("stickyFooter",n.getAttribute("data-sticky-footer-target"));return $.publish("stickyFooter")}},e.prototype.markerCheckEnabled=function(t){return"1"===t.getAttribute("data-sticky-footer-disabled")},e.prototype.markerDisable=function(t){return t.setAttribute("data-sticky-footer-disabled","1")},e.prototype.markerEnable=function(t){return t.setAttribute("data-sticky-footer-disabled","")},e}()}).call(window)},"2tL3":function(t,e,i){function n(t,e){this._id=t,this._clearFn=e}var o=Function.prototype.apply;e.setTimeout=function(){return new n(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new n(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i("NxIc"),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},"3Dik":function(t,e,i){(function(e){!function(i){function n(){}function o(t,e){return function(){t.apply(e,arguments)}}function r(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function s(t,e){for(;3===t._state;)t=t._value;if(0===t._state)return void t._deferreds.push(e);t._handled=!0,r._immediateFn(function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null===i)return void(1===t._state?a:u)(e.promise,t._value);var n;try{n=i(t._value)}catch(t){return void u(e.promise,t)}a(e.promise,n)})}function a(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof i)return void h(o(i,e),t)}t._state=1,t._value=e,c(t)}catch(e){u(t,e)}}function u(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,i=t._deferreds.length;e<i;e++)s(t,t._deferreds[e]);t._deferreds=null}function l(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function h(t,e){var i=!1;try{t(function(t){i||(i=!0,a(e,t))},function(t){i||(i=!0,u(e,t))})}catch(t){if(i)return;i=!0,u(e,t)}}var p=setTimeout;r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var i=new this.constructor(n);return s(this,new l(t,e,i)),i},r.all=function(t){var e=Array.prototype.slice.call(t);return new r(function(t,i){function n(r,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(t){n(r,t)},i)}e[r]=s,0==--o&&t(e)}catch(t){i(t)}}if(0===e.length)return t([]);for(var o=e.length,r=0;r<e.length;r++)n(r,e[r])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,i){i(t)})},r.race=function(t){return new r(function(e,i){for(var n=0,o=t.length;n<o;n++)t[n].then(e,i)})},r._immediateFn="function"==typeof e&&function(t){e(t)}||function(t){p(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console},r._setImmediateFn=function(t){r._immediateFn=t},r._setUnhandledRejectionFn=function(t){r._unhandledRejectionFn=t},void 0!==t&&t.exports?t.exports=r:i.Promise||(i.Promise=r)}(this)}).call(e,i("2tL3").setImmediate)},"3Svz":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Menu=function(){function e(){this.refresh=t(this.refresh,this),this.hideMenu=t(this.hideMenu,this),this.onMouseLeave=t(this.onMouseLeave,this),this.onMouseEnter=t(this.onMouseEnter,this),this.onTouchStart=t(this.onTouchStart,this),this.onGlobalTouchstart=t(this.onGlobalTouchstart,this),this.currentTree=t(this.currentTree,this),this.defaultMenu=t(this.defaultMenu,this),this.menuTimeout=150,$(document).on("touchstart",".js-menu",this.onTouchStart),$(document).on("mouseenter",".js-menu",this.onMouseEnter),$(document).on("mouseleave",".js-menu",this.onMouseLeave),$(document).on("touchstart",this.onGlobalTouchstart),$(document).on("turbolinks:load",this.refresh)}return e.prototype.$menuLink=function(t){return $(".js-menu[data-menu-target"+(t?"='"+t+"'":"")+"]")},e.prototype.closestMenuId=function(t){return t.closest("[data-menu-id]").attr("data-menu-id")},e.prototype.defaultMenu=function(){var t,e;return null!=(t=document.querySelector('.js-menu[data-menu-default="1"]'))&&null!=(e=t.dataset)?e.menuTarget:void 0},e.prototype.parentsMenuId=function(t){return t.parents("[data-menu-id]").attr("data-menu-id")},e.prototype.currentTree=function(){var t,e;if(!this.currentMenu)return[];for(e=this.currentMenu,t=[e];;){if(!(e=this.closestMenuId(this.$menuLink(e))))break;t.push(e)}return t},e.prototype.onGlobalTouchstart=function(t){var e;if(this.currentMenu){for(e=t.target;e;){if(e.classList.contains("js-menu"))return;e=e.parentElement}return this.hideMenu()}},e.prototype.onTouchStart=function(t){var e,i,n,o,r;if(i=t.currentTarget,null!=(o=i.dataset.menuTarget))return e=$(o),t.preventDefault(),r=parseInt(null!=(n=i.dataset.menuShowDelay)?n:this.menuTimeout,10),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(r,function(t){return function(){return t.currentMenu=t.currentMenu===o?t.closestMenuId(e):o,t.refresh()}}(this))},e.prototype.onMouseEnter=function(t){var e,i,n;return e=t.currentTarget,n=parseInt(null!=(i=e.dataset.menuShowDelay)?i:this.menuTimeout,10),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(n,function(t){return function(){return t.currentMenu=e.dataset.menuTarget,null==t.currentMenu&&(t.currentMenu=t.closestMenuId($(e))),t.refresh()}}(this))},e.prototype.onMouseLeave=function(t){var e;return e=$(t.currentTarget),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(this.menuTimeout,function(t){return function(){return t.currentMenu=t.parentsMenuId(e),t.refresh()}}(this))},e.prototype.hideMenu=function(){return Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(this.menuTimeout,function(t){return function(){return t.currentMenu=null,t.refresh()}}(this))},e.prototype.refresh=function(){var t,e,i,n,o,r,s;for(null==this.currentMenu&&(this.currentMenu=this.defaultMenu()),r=document.querySelectorAll(".js-menu[data-menu-id]"),t=this.currentTree(),$.publish("menu:current",this.currentMenu),s=[],e=0,i=r.length;e<i;e++)n=r[e],o=n.getAttribute("data-menu-id"),-1===t.indexOf(o)?(Fade.out(n),s.push(this.$menuLink(o).removeClass("js-menu--active"))):(Fade.in(n),this.$menuLink(o).addClass("js-menu--active"),s.push($(n).trigger("menu:showing")));return s},e}()}).call(window)},"3e95":function(t,e){(function(){this.StoreSupporterTagPrice=function(){function t(t){this._price=t}return t.durationToPrice=function(t){switch(t=+t,!1){case!(t>=12):return Math.ceil(t/12*26);case 10!==t:return 24;case 9!==t:return 22;case 8!==t:return 20;case 6!==t:return 16;case 4!==t:return 12;case 2!==t:return 8;case 1!==t:return 4}},t.prototype.price=function(){return this._price},t.prototype.duration=function(){return null!=this._duration?this._duration:this._duration=function(){switch(!1){case!(this._price>=26):return Math.floor(this._price/26*12);case!(this._price>=24):return 10;case!(this._price>=22):return 9;case!(this._price>=20):return 8;case!(this._price>=16):return 6;case!(this._price>=12):return 4;case!(this._price>=8):return 2;case!(this._price>=4):return 1;default:return 0}}.call(this)},t.prototype.pricePerMonth=function(){return(this._price/this.duration()).toFixed(2)},t.prototype.discount=function(){var t;return this.duration()>=12?46:(t=100*(1-this._price/this.duration()/4),Math.max(0,Math.round(t,0)))},t.prototype.discountText=function(){return osu.trans("store.discount",{percent:this.discount()})},t.prototype.durationInYears=function(){return{years:Math.floor(this.duration()/12),months:Math.floor(this.duration()%12)}},t.prototype.durationText=function(){var t,e;return t=this.durationInYears(),e=[],t.years>0&&e.push(Lang.choice("common.count.years",t.years)),t.months>0&&e.push(Lang.choice("common.count.months",t.months)),e.join(", ")},t}()}).call(window)},"3nJJ":function(t,e){(function(){var t,e,i;e=document.getElementsByClassName("js-loading-overlay"),i=function(){if(0!==e.length)return e[0].classList.add("loading-overlay--visible")},i=_.debounce(i,5e3,{maxWait:5e3}),t=function(){if(0!==e.length)return i.cancel(),e[0].classList.remove("loading-overlay--visible")},this.LoadingOverlay={show:i,hide:t}}).call(window)},"4t2u":function(t,e){(function(){var t;t=document.getElementsByClassName("js-navbar-mobile--top-icon"),$(document).on("show.bs.collapse",".js-navbar-mobile--menu",function(){return Fade.out(t[0])}),$(document).on("hide.bs.collapse",".js-navbar-mobile--menu",function(){return Fade.in(t[0])})}).call(window)},"4yTY":function(t,e){(function(){var t;t=function(t,e,i){var n,o,r,s,a,u;return null==i&&(i=""),n=$(t.target).parents("form").find("[name=body], .js-bbcode-body"),r=n.val(),o=n[0],a=o.selectionStart,s=o.selectionEnd,u=[r.substring(0,a),r.substring(a,s),r.substring(s)],u[0]=u[0]+e,u[2]=i+u[2],a===s?(n.val(u[0]+u[2]),o.selectionStart=u[0].length,o.selectionEnd=o.selectionStart):(n.val(u[0]+u[1]+u[2]),o.selectionStart=a,o.selectionEnd=u[0].length+u[1].length+i.length),n.trigger("bbcode:inserted").trigger("input").focus()},[["bold","[b]","[/b]"],["heading","[heading]","[/heading]"],["image","[img]","[/img]"],["italic","[i]","[/i]"],["link","[url]","[/url]"],["list","[list]\n[*]","[/list]"],["list-numbered","[list=1]\n[*]","[/list]"],["strikethrough","[s]","[/s]"],["underline","[u]","[/u]"],["spoilerbox","[box=]","[/box]"]].forEach(function(e){var i,n,o;return i=e[0],o=e[1],n=e[2],$(document).on("click",".js-bbcode-btn--"+i,function(e){return t(e,o,n)})}),$(document).on("change",".js-bbcode-btn--size",function(e){var i,n;return i=$(e.target),n=parseInt(i.val(),10),t(e,"[size="+n+"]","[/size]")})}).call(window)},"51Wt":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserVerification=function(){function e(){this.showOnLoad=t(this.showOnLoad,this),this.showOnError=t(this.showOnError,this),this.show=t(this.show,this),this.success=t(this.success,this),this.setModal=t(this.setModal,this),this.setMessage=t(this.setMessage,this),this.reposition=t(this.reposition,this),this.reissue=t(this.reissue,this),this.prepareForRequest=t(this.prepareForRequest,this),this.float=t(this.float,this),this.error=t(this.error,this),this.autoSubmit=t(this.autoSubmit,this),this.$modal=t(this.$modal,this),addEventListener("turbolinks:load",this.setModal),$(document).on("ajax:error",this.showOnError),$(document).on("turbolinks:load",this.showOnLoad),$(document).on("input",".js-user-verification--input",this.autoSubmit),$(document).on("click",".js-user-verification--reissue",this.reissue),$(window).on("throttled-resize throttled-scroll",this.reposition),this.clickAfterVerification=null,this.inputBox=document.getElementsByClassName("js-user-verification--input"),this.message=document.getElementsByClassName("js-user-verification--message"),this.messageSpinner=document.getElementsByClassName("js-user-verification--message-spinner"),this.messageText=document.getElementsByClassName("js-user-verification--message-text"),this.reference=document.getElementsByClassName("js-user-verification--reference")}return e.prototype.$modal=function(){return $(".js-user-verification")},e.prototype.autoSubmit=function(t){var e,i,n,o;if(o=this.inputBox[0],e=o.value.replace(/\s/g,""),n=o.dataset.lastKey,i=parseInt(o.dataset.verificationKeyLength,10),0===e.length&&this.setMessage(),i===e.length&&e!==n)return o.dataset.lastKey=e,this.prepareForRequest("verifying"),this.request=$.post(laroute.route("account.verify"),{verification_key:e}).done(this.success).error(this.error)},e.prototype.error=function(t){return this.setMessage(osu.xhrErrorMessage(t))},e.prototype.float=function(t,e,i){return null==e&&(e=this.modal),t?(e.classList.add("js-user-verification--center"),e.style.paddingTop=null):(e.classList.remove("js-user-verification--center"),e.style.paddingTop=i+"px")},e.prototype.prepareForRequest=function(t){var e;return null!=(e=this.request)&&e.abort(),this.setMessage(osu.trans("user_verification.box."+t),!0)},e.prototype.reissue=function(t){return t.preventDefault(),this.prepareForRequest("issuing"),this.request=$.post(laroute.route("account.reissue-code")).done(function(t){return function(e){return t.setMessage(e.message)}}(this)).error(this.error)},e.prototype.reposition=function(){var t,e,i;if(null!=(t=this.modal)?t.classList.contains("js-user-verification--active"):void 0)return osu.isMobile()?this.float(!0,this.modal):(i=null!=(e=this.reference[0])?e.getBoundingClientRect().bottom:void 0,this.float(i<0,this.modal,i))},e.prototype.setMessage=function(t,e){return null==e&&(e=!1),null==t||0===t.length?void Fade.out(this.message[0]):(this.messageText[0].textContent=t,Fade.toggle(this.messageSpinner[0],e),Fade.in(this.message[0]))},e.prototype.setModal=function(){return this.modal=document.querySelector(".js-user-verification")},e.prototype.success=function(){var t;return this.$modal().modal("hide"),this.modal.classList.remove("js-user-verification--active"),t=this.clickAfterVerification,this.clickAfterVerification=null,this.setMessage(),this.inputBox[0].value="",this.inputBox[0].dataset.lastKey="",osu.executeAction(t)},e.prototype.show=function(t,e){return this.clickAfterVerification=t,null!=e&&$(".js-user-verification--box").html(e),this.$modal().modal({backdrop:"static"}).modal("show").addClass("js-user-verification--active"),this.reposition()},e.prototype.showOnError=function(t,e){var i,n;if(n=t.target,401===e.status&&"verify"===(null!=(i=e.responseJSON)?i.authentication:void 0))return this.show(n,e.responseJSON.box)},e.prototype.showOnLoad=function(){if(window.showVerificationModal)return window.showVerificationModal=null,this.show()},e}()}).call(window)},"7Bxm":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.RadarChart=function(){function e(e,i){var n,o,r;this.options=null!=i?i:{},this.resize=t(this.resize,this),this.loadData=t(this.loadData,this),this.margins={top:30,right:30,bottom:0,left:30},(n=this.options).scale||(n.scale=d3.scaleLinear()),this.area=d3.select(e),this.svg=this.area.append("svg"),this.angleStep=2*Math.PI/this.options.axes,this.svgWrapper=this.svg.append("g"),o=this.svgWrapper.append("g"),this.circles=function(){var t,e,i;for(i=[],r=t=0,e=this.options.ticks-1;0<=e?t<=e:t>=e;r=0<=e?++t:--t)i.push(o.append("circle").classed(this.options.className+"__circle",!0));return i}.call(this),this.axes=function(){var t,e,i;for(i=[],r=t=0,e=this.options.axes-1;0<=e?t<=e:t>=e;r=0<=e?++t:--t)o=this.svgWrapper.append("g"),i.push({axis:o.append("line").classed(this.options.className+"__axis",!0),dots:function(){var t,e,i;for(i=[],r=t=0,e=this.options.dots-1;0<=e?t<=e:t>=e;r=0<=e?++t:--t)i.push(o.append("circle").classed(this.options.className+"__dot",!0));return i}.call(this),label:o.append("text").classed(this.options.className+"__label",!0)});return i}.call(this),this.centerDot=this.svgWrapper.append("circle").classed(this.options.className+"__dot",!0),this.selectedArea=this.svgWrapper.append("path").classed(this.options.className+"__area",!0),this.pointsGroup=this.svgWrapper.append("g")}return e.prototype.loadData=function(t){return this.values=t,this.resize(!0)},e.prototype.setDimensions=function(){var t,e;return t=this.area.node().getBoundingClientRect(),e=t.width,this.options.maxWidth&&e>this.options.maxWidth&&(e=this.options.maxWidth),this.diameter=e-(this.margins.left+this.margins.right),this.radius=this.diameter/2,this.dotRadius=e/200,this.center={x:this.radius,y:this.radius}},e.prototype.setScalesRange=function(){return this.options.scale.range([0,this.radius]).domain(this.options.domain)},e.prototype.setSvgSize=function(){return this.svg.attr("width",this.diameter+(this.margins.left+this.margins.right)).attr("height",this.diameter+(this.margins.top+this.margins.bottom))},e.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},e.prototype.setCirclesSize=function(){var t,e,i,n,o,r;for(n=this.radius/this.options.ticks,r=this.circles,e=i=0,o=r.length;i<o;e=++i)t=r[e],t.attr("cx",this.center.x).attr("cy",this.center.y).attr("r",n*(e+1));return this.centerDot.attr("cx",this.center.x).attr("cy",this.center.y).attr("r",this.dotRadius)},e.prototype.setAxesSize=function(){var t,e,i,n,o,r,s,a,u,c,l,h,p,d,f,m,g,v,y,b,w,_;for(this.angleStep=2*Math.PI/this.options.axes,t=Math.PI/2,a=this.radius/this.options.dots,v=this.center.x,w=this.center.y,y=this.center.x,_=this.center.y-this.radius,l=this.axes,m=[],n=r=0,u=l.length;r<u;n=++r){for(e=l[n],e.axis.attr("x1",v).attr("y1",w).attr("x2",y).attr("y2",_),h=this._rotatePoint(v,w,y,_,this.angleStep),y=h[0],_=h[1],p=e.dots,o=s=0,c=p.length;s<c;o=++s)i=p[o],d=this._extendPoint(this.center.x,this.center.y,a*(o+1),t),g=d[0],b=d[1],i.attr("cx",g).attr("cy",b).attr("r",this.dotRadius);f=this._extendPoint(this.center.x,this.center.y,this.radius+10,t),g=f[0],b=f[1],e.label.attr("x",g).attr("y",b).attr("text-anchor",g>this.center.x?"start":g<this.center.x?"end":"middle").text(this.values[n].label),m.push(t+=this.angleStep)}return m},e.prototype.calculatePoints=function(){return this.data=this.values.map(function(t){return function(e,i){var n,o,r,s,a;return o=t.options.scale(e.value),n=Math.PI/2+t.angleStep*i,r=t._extendPoint(t.center.x,t.center.y,o,n),s=r[0],a=r[1],{x:s,y:a}}}(this))},e.prototype.drawArea=function(t){var e,i;return i=d3.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear-closed"),e=this.selectedArea,t&&(e=e.transition()),e.attr("d",i(this.data))},e.prototype._extendPoint=function(t,e,i,n){var o,r;return r=Math.sin(n),o=Math.cos(n),[t+i*o,e-i*r]},e.prototype._rotatePoint=function(t,e,i,n,o){var r,s;return s=Math.sin(o),r=Math.cos(o),i-=t,n-=e,[t+(i*r+n*s),e+(n*r-i*s)]},e.prototype.resize=function(t){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setCirclesSize(),this.setAxesSize(),this.calculatePoints(),this.drawArea(t)},e}()}).call(window)},"7rzS":function(t,e){(function(){$(document).on("ajax:success",".js-logout-link",function(){return localStorage.clear(),osu.reloadPage()})}).call(window)},"7sBQ":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.DumbStorage=function(){function e(){this.setItem=t(this.setItem,this),this.removeItem=t(this.removeItem,this),this.getItem=t(this.getItem,this),this.clear=t(this.clear,this),this._data={}}return e.prototype.clear=function(){return this._data={}},e.prototype.getItem=function(t){return this._data.hasOwnProperty(t)?this._data[t]:null},e.prototype.removeItem=function(t){return delete this._data[t]},e.prototype.setItem=function(t,e){return this._data[t]=String(e)},e}()}).call(window)},"7vRp":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-landing-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new LandingUserStats},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},"97DG":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(i("ojUv"),i("CVuF"),i("fnRm"),i("9asT"),i("GIiB"),i("wsm8"),i("XjSE"),i("DN3n"),i("wiuS"),i("nd2h"),i("uiwb"),i("ZvgG"),i("1IAD"),i("Mocb"),i("os5n"),i("lpOU"),i("rlm/"),i("7sBQ"),i("o8Cn"),i("ivxJ"),i("E7RV"),i("urN3"),i("bXa+"),i("dzw6"),i("Pcbd"),i("lTvF"),i("of2Y"),i("zvhu"),i("p4La"),i("D0OF"),i("fxgg"),i("xPMn"),i("tIJY"),i("1RZw"),i("l4qv"),i("Bm31"),i("O94S"),i("YMcV"),i("7vRp"),i("L96c"),i("cpnD"),i("3nJJ"),i("3Svz"),i("oJXL"),i("ltes"),i("GA6k"),i("vlpJ"),i("Zk6r"),i("7Bxm"),i("hZdu"),i("VNmc"),i("fx2O"),i("YybB"),i("qxfu"),i("jj9p"),i("Wobc"),i("2pDC"),i("xTqC"),i("BsmZ"),i("3e95"),i("AxZR"),i("mr8q"),i("jdrx"),i("CyWe"),i("Ucvm"),i("wrTv"),i("EzgO"),i("leVn"),i("Q8P+"),i("ynHm"),i("p+1f"),i("EB9T"),i("qiDr"),i("ealH"),i("WHxs"),i("51Wt"),i("bl+Q"),i("iJXY"),i("1rh3"),i("DiAq"),i("NEwV"),i("vOOM"),i("tWlk"),i("tKQ2"),i("QLwW"),i("ynaH"),i("ZkP1"),i("c6a4"),i("bQzg"),i("hrDL"),i("cGWP"),i("Vwlb"),i("In2i"),i("CqAb"),i("ikv9"),i("1G9n"),i("HAG7"),i("qfi9"),i("Lmm6"),i("B+Y5"),i("4t2u"),i("Aa5R"),i("IlXl"),i("Xgwh"),i("4yTY"),i("NhNE"),i("jgJW"),i("+VoV"),i("7rzS"),i("h4f/"),i("phOA"),function(){function t(){}return t.fetchApprovalLink=function(t){return new Promise(function(e,i){return $.post(laroute.route("payments.paypal.create"),{order_id:t}).done(e).fail(function(t){return i({xhr:t})})})},t}()),o=function(){function t(){}return t.promiseInit=function(e){return Promise.all([t.fetchToken(),t.fetchScript()]).then(function(i){var n,o;return o=i[0],n=t.optionsWithToken(o),t.onXsollaComplete(e),XPayStationWidget.init(n)})},t.fetchScript=function(){return new Promise(function(t,e){if(!window.turbolinksReload.load("https://static.xsolla.com/embed/paystation/1.0.7/widget.min.js",t))return t()})},t.fetchToken=function(){return new Promise(function(t,e){return $.post(laroute.route("payments.xsolla.token")).done(function(i){return 32!==i.length?e({message:"wrong token length"}):t(i)}).fail(function(t){return e({xhr:t})})})},t.optionsWithToken=function(t){return{access_token:t,sandbox:Object({NODE_ENV:"production"}).PAYMENT_SANDBOX}},t.onXsollaComplete=function(t){var e;return e=!1,XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS_DONE,function(){return e=!0}),XPayStationWidget.on(XPayStationWidget.eventTypes.CLOSE,function(){if(e)return LoadingOverlay.show(),LoadingOverlay.show.flush(),window.location=laroute.route("payments.xsolla.completed",{foreignInvoice:t})})},t}(),r=function(){function t(){}return t.CHECKOUT_SELECTOR=".js-store-checkout-button",t.initialize=function(){var e,i,n,r,s,a,u;for(n={},u=document.querySelectorAll(t.CHECKOUT_SELECTOR),i=0,r=u.length;i<r;i++)switch(e=u[i],a=e.dataset.provider,s=e.dataset.orderNumber,a){case"centili":n.centili=Promise.resolve();break;case"free":n.free=Promise.resolve();break;case"paypal":n.paypal=Promise.resolve();break;case"xsolla":n.xsolla=o.promiseInit(s)}return $(t.CHECKOUT_SELECTOR).on("click.checkout",function(e){var i,o;if(a=e.target.dataset.provider,i=e.target.dataset.orderId,null!=a)return LoadingOverlay.show(),LoadingOverlay.show.flush(),null!=(o=n[a])?o.then(function(){return $.post(laroute.route("store.checkout.store"),{provider:a,orderId:i}).done(function(){return t.startPayment(e.target.dataset)})}).catch(function(t){var e;if(LoadingOverlay.hide(),!t.getResponseHeader||(e=t.getResponseHeader("Content-Type"),!_.startsWith(e,"application/javascript")))return osu.ajaxError(null!=t?t.xhr:void 0)}):void 0})},t.startPayment=function(t){switch(t.provider){case"centili":return window.location=t.url;case"free":return $.post(laroute.route("store.checkout.store",{orderId:t.orderId,completed:"1"}));case"paypal":return n.fetchApprovalLink(t.orderId).then(function(t){return window.location=t});case"xsolla":return XPayStationWidget.open(),LoadingOverlay.hide()}},t}(),s=i("3Dik"),a=i.n(s),u=i("+uMr"),c=i.n(u);null==window.Promise&&(window.Promise=a.a),window.StoreCheckout=r,window.TextareaAutosize=c.a;i("/thC")},"9ZA7":function(t,e,i){"use strict";function n(t){return function(){return t}}var o=function(){};o.thatReturns=n,o.thatReturnsFalse=n(!1),o.thatReturnsTrue=n(!0),o.thatReturnsNull=n(null),o.thatReturnsThis=function(){return this},o.thatReturnsArgument=function(t){return t},t.exports=o},"9asT":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEdit=function(){function e(){this.update=t(this.update,this),this.abortUpdate=t(this.abortUpdate,this),this.saving=t(this.saving,this),this.saved=t(this.saved,this),this.clearState=t(this.clearState,this),this.ajaxSaved=t(this.ajaxSaved,this),this.ajaxSaving=t(this.ajaxSaving,this),this.ajaxError=t(this.ajaxError,this),this.initializeUpdate=t(this.initializeUpdate,this),$(document).on("input",".js-account-edit",this.initializeUpdate),$(document).on("ajax:error",".js-account-edit",this.ajaxError),$(document).on("ajax:send",".js-account-edit",this.ajaxSaving),$(document).on("ajax:success",".js-account-edit",this.ajaxSaved)}return e.prototype.initializeUpdate=function(t){var e;if(e=t.currentTarget,"1"===e.dataset.accountEditAutoSubmit)return this.abortUpdate(e),null==e.debouncedUpdate&&(e.debouncedUpdate=_.debounce(this.update,1e3)),e.debouncedUpdate(e)},e.prototype.ajaxError=function(t){return this.clearState(t.currentTarget)},e.prototype.ajaxSaving=function(t){return this.saving(t.currentTarget)},e.prototype.ajaxSaved=function(t){return this.saved(t.currentTarget)},e.prototype.clearState=function(t){return t.dataset.accountEditState=""},e.prototype.saved=function(t){return t.dataset.accountEditState="saved",t.savedTimeout=Timeout.set(3e3,function(e){return function(){return e.clearState(t)}}(this))},e.prototype.saving=function(t){return t.dataset.accountEditState="saving"},e.prototype.abortUpdate=function(t){var e;return Timeout.clear(t.savedTimeout),null!=(e=t.updating)&&e.abort(),this.clearState(t)},e.prototype.update=function(t){var e,i,n,o;if(e=t.querySelector(".js-account-edit__input"),o=e.value,n=t.dataset.lastValue,o!==n)return t.dataset.lastValue=o,this.saving(t),t.updating=$.ajax(laroute.route("account.update"),{method:"PUT",data:(i={},i[""+e.name]=o,i)}).done(function(e){return function(){return e.saved(t)}}(this)).fail(function(e){return function(i,o){if("abort"!==o)return t.lastValue=n,e.clearState(t),osu.ajaxError(i)}}(this))},e}()}).call(window)},"9y1f":function(t,e,i){"use strict";function n(t,e,i,n,r,s,a,u){if(o(e),!t){var c;if(void 0===e)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[i,n,r,s,a,u],h=0;c=new Error(e.replace(/%s/g,function(){return l[h++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}}var o=function(t){};t.exports=n},Aa5R:function(t,e){(function(){$(document).on("click",".js-spoilerbox__link",function(t){var e;return t.preventDefault(),e=$(t.target).closest(".js-spoilerbox"),e.toggleClass("js-spoilerbox--open"),osu.pageChange()})}).call(window)},AxZR:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StoreSupporterTag=function(){function e(e){this.updateCostDisplay=t(this.updateCostDisplay,this),this.updateSearchResult=t(this.updateSearchResult,this),this.setUserInteraction=t(this.setUserInteraction,this),this.onInput=t(this.onInput,this),this.onSliderValueChanged=t(this.onSliderValueChanged,this),this.calculate=t(this.calculate,this),this.getUser=t(this.getUser,this),this.initializeUsernameInput=t(this.initializeUsernameInput,this),this.initializeSliderPresets=t(this.initializeSliderPresets,this),this.initializeSlider=t(this.initializeSlider,this);var i,n;this.debouncedGetUser=_.debounce(this.getUser,300),this.el=e,this.searching=!1,this.priceElement=this.el.querySelector(".js-price"),this.durationElement=this.el.querySelector(".js-duration"),this.discountElement=this.el.querySelector(".js-discount"),this.slider=this.el.querySelector(".js-slider"),this.sliderPresets=this.el.querySelectorAll(".js-slider-preset"),this.targetIdElement=this.el.querySelector('input[name="item[extra_data][target_id]"]'),this.usernameInput=this.el.querySelector(".js-username-input"),this.usercard=this.el.querySelector(".js-avatar"),this.user={userId:this.targetIdElement.value},this.currentUser={userId:this.el.dataset.userId,username:this.el.dataset.username,cardHtml:null!=(i=this.el.dataset.cardHtml)?i:this.usercard.innerHTML},$(document).on("turbolinks:before-cache",function(t){return function(){return t.el.dataset.cardHtml=t.currentUser.cardHtml}}(this)),delete this.el.dataset.cardHtml,this.cost=this.calculate(this.initializeSlider().slider("value")),this.initializeSliderPresets(),this.initializeUsernameInput(),this.updateCostDisplay(),this.setUserInteraction(null!=(n=this.user)?n.userId:void 0)}return e.prototype.RESOLUTION=8,e.prototype.MIN_VALUE=4,e.prototype.MAX_VALUE=52,e.initialize=function(){var t,i,n,o,r;for(o=document.getElementsByClassName("js-store-supporter-tag"),r=[],i=0,n=o.length;i<n;i++)t=o[i],r.push(new e(t));return r},e.prototype.initializeSlider=function(){var t;return $(this.slider).find(".ui-slider-range").remove(),$(this.slider).slider({range:"min",value:null!=(t=this.slider.dataset.lastValue)?t:this.sliderValue(this.MIN_VALUE),min:this.sliderValue(this.MIN_VALUE),max:this.sliderValue(this.MAX_VALUE),step:1,animate:!0,slide:this.onSliderValueChanged,change:this.onSliderValueChanged})},e.prototype.initializeSliderPresets=function(){return $(this.sliderPresets).on("click",function(t){return function(e){var i,n;if(n=e.currentTarget,i=StoreSupporterTagPrice.durationToPrice(n.dataset.months))return $(t.slider).slider("value",t.sliderValue(i))}}(this))},e.prototype.initializeUsernameInput=function(){return $(this.usernameInput).on("input",this.onInput)},e.prototype.getUser=function(t){return t?$.post(laroute.route("users.check-username-exists"),{username:t}).done(function(t){return function(e){return t.user={userId:e.user_id,username:e.username,cardHtml:e.card_html}}}(this)).fail(function(t){return function(e){if(t.user=null,401===e.status)return osu.popup(osu.trans("errors.logged_out"),"danger")}}(this)).always(function(t){return function(){return t.searching=!1,t.updateSearchResult()}}(this)):(this.user=this.currentUser,this.searching=!1,void this.updateSearchResult())},e.prototype.calculate=function(t){return new StoreSupporterTagPrice(Math.floor(t/this.RESOLUTION))},e.prototype.onSliderValueChanged=function(t,e){return this.slider.dataset.lastValue=e.value,this.cost=this.calculate(e.value),this.updateCostDisplay()},e.prototype.onInput=function(t){return this.searching||(this.searching=!0,this.updateSearchResult()),this.debouncedGetUser(t.currentTarget.value)},e.prototype.setUserInteraction=function(t){return StoreCart.setEnabled(t),$(this.el).toggleClass("js-store--disabled",!t),$(".js-slider").slider({disabled:!t})},e.prototype.sliderValue=function(t){return t*this.RESOLUTION},e.prototype.updateSearchResult=function(){var t;return this.searching?(this.usercard.innerHTML=$("#js-usercard__loading-template").html(),this.setUserInteraction(!1)):(this.user?(this.targetIdElement.value=this.user.userId,this.usercard.innerHTML=this.user.cardHtml,reactTurbolinks.boot()):this.targetIdElement.value=null,this.setUserInteraction(null!=(t=this.user)?t.userId:void 0))},e.prototype.updateCostDisplay=function(){var t,e,i,n,o;for(this.el.querySelector('input[name="item[cost]"]').value=this.cost.price(),this.priceElement.textContent="USD "+this.cost.price(),this.durationElement.textContent=this.cost.durationText(),this.discountElement.textContent=this.cost.discountText(),n=this.sliderPresets,o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push(this.updateSliderPreset(t,this.cost));return o},e.prototype.updateSliderPreset=function(t,e){return $(t).toggleClass("js-slider-preset--active",e.duration()>=+t.dataset.months)},e}()}).call(window)},"B+Y5":function(t,e){(function(){var t={}.hasOwnProperty;this.osu={isIos:/iPad|iPhone|iPod/.test(navigator.platform),urlRegex:/(https?:\/\/(?:(?:[a-z0-9]\.|[a-z0-9][a-z0-9-]*[a-z0-9]\.)*[a-z][a-z0-9-]*[a-z0-9](?::\d+)?)(?:(?:(?:\/+(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)*(?:\?(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)?)?(?:#(?:[a-z0-9$_\.\+!\*',;:@&=\/?-]|%[0-9a-f]{2})*)?)?)/gi,bottomPage:function(){return 0===osu.bottomPageDistance()},bottomPageDistance:function(){var t,e,i;return t=null!=(e=null!=(i=document.documentElement)?i:document.body.parent)?e:document.body,t.scrollHeight-t.scrollTop-t.clientHeight},currentUserIsFriendsWith:function(t){return _.find(currentUser.friends,{target_id:t})},executeAction:function(t){return function(t){return null==t?void osu.reloadPage():"1"===t.dataset.isFileupload?$(t).trigger("fileuploadRetry"):t.submit?$(t).submit():t.click?t.click():void 0}}(),setHash:function(t){var e;if(e=location.href.replace(/#.*/,""),(e+=t)!==location.href)return history.replaceState(history.state,null,e)},ajaxError:function(t){return osu.popup(osu.xhrErrorMessage(t),"danger")},emitAjaxError:function(t){return function(t){return null==t&&(t=document.body),function(e,i,n){return $(t).trigger("ajax:error",[e,i,n])}}}(),fileuploadFailCallback:function(t){return function(t){return function(e,i){var n,o;return n=t(),null==(o=n[0].dataset).isFileupload&&(o.isFileupload="1"),n.off("fileuploadRetry").one("fileuploadRetry",function(){return i.submit()}),osu.emitAjaxError(n[0])(i.jqXHR)}}}(),pageChange:function(){return Timeout.set(0,osu.pageChangeImmediate)},pageChangeImmediate:function(){return $(document).trigger("osu:page:change")},parseJson:function(t){var e,i;return JSON.parse(null!=(e=null!=(i=document.getElementById(t))?i.text:void 0)?e:null)},isInputElement:function(t){var e;return"INPUT"===(e=t.tagName)||"SELECT"===e||"TEXTAREA"===e||t.isContentEditable},isClickable:function(t){var e;return!(!osu.isInputElement(t)&&"A"!==(e=t.tagName)&&"BUTTON"!==e)||!!t.parentNode&&osu.isClickable(t.parentNode)},isDesktop:function(){return window.matchMedia("(min-width: 840px)").matches},isMobile:function(){return!osu.isDesktop()},focus:function(t){return function(t){var e;return t=$(t)[0],osu.isIos?(e=t.style.fontSize,t.style.fontSize="16px",t.focus(),t.style.fontSize=e):t.focus()}}(),src2x:function(t){return{src:t,srcSet:t+" 1x, "+t.replace(/(\.[^.]+)$/,"@2x$1")+" 2x"}},link:function(t,e,i){var n;return null==i&&(i={}),n=document.createElement("a"),n.setAttribute("href",t),i.isRemote&&n.setAttribute("data-remote",!0),i.classNames&&(n.className=i.classNames.join(" ")),n.textContent=e,i.props&&_.each(i.props,function(t,e){return n.setAttribute(e,t)}),n.outerHTML},linkify:function(t){return t.replace(osu.urlRegex,'<a href="$1" rel="nofollow">$1</a>')},timeago:function(t){var e;return e=document.createElement("time"),e.classList.add("timeago"),e.setAttribute("datetime",t),e.textContent=t,e.outerHTML},formatBytes:function(t,e){var i,n,o;return null==e&&(e=2),o=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],n=1e3,t<n?t+" B":(i=Math.floor(Math.log(t)/Math.log(n)),(t/Math.pow(n,i)).toFixed(e)+" "+o[i])},reloadPage:function(t){var e;return null==t&&(t=!0),$(document).off(".ujsHideLoadingOverlay"),Turbolinks.clearCache(),e=_.isEmpty(window.reloadUrl)?location.href:window.reloadUrl,window.reloadUrl=null,osu.navigate(e,t,{action:"replace"})},navigate:function(t,e,i){var n,o;return n=null!=(o=(null!=i?i:{}).action)?o:"advance",e&&osu.keepScrollOnLoad(),Turbolinks.visit(t,{action:n})},keepScrollOnLoad:function(){var t;return t=[window.pageXOffset,window.pageYOffset],$(document).one("turbolinks:load",function(){return window.scrollTo(t[0],t[1])})},popup:function(t,e){var i,n,o,r;return null==e&&(e="info"),n=$("#popup-container"),i=$(".popup-clone").clone(),r=function(){return i.click()},i.addClass("alert-"+e+" popup-active").removeClass("popup-clone"),i.find(".popup-text").html(t),"warning"===e||"danger"===e?$("#overlay").off("click.close-alert").one("click.close-alert",r).fadeIn():Timeout.set(5e3,r),"function"==typeof(o=document.activeElement).blur&&o.blur(),i.appendTo(n).fadeIn()},popupShowing:function(){return $("#overlay").is(":visible")},trans:function(t,e){return Lang.get(t,e)},transArray:function(t,e){switch(null==e&&(e="common.array_and"),t.length){case 0:return"";case 1:return""+t[0];case 2:return t.join(osu.trans(e+".two_words_connector"));default:return""+t.slice(0,-1).join(osu.trans(e+".words_connector"))+osu.trans(e+".last_word_connector")+_.last(t)}},transChoice:function(t,e,i){return Lang.choice(t,e,i)},uuid:function(){return Turbolinks.uuid()},updateQueryString:function(e,i){var n,o,r;o=new URL(null!=e?e:window.location.href,document.location.origin);for(n in i)t.call(i,n)&&(r=i[n],o.searchParams.set(n,r));return o.href},xhrErrorMessage:function(e){var i,n,o,r,s,a,u,c;if(null!=(c=null!=e&&null!=(a=e.responseJSON)?a.validation_error:void 0)){n=[];for(i in c)t.call(c,i)&&(r=c[i],n=n.concat(r));s=n.join(", ")+"."}return null==s&&(s=null!=e&&null!=(u=e.responseJSON)?u.error:void 0),null!=s&&""!==s||(o="errors.codes.http-"+(null!=e?e.status:void 0),(s=osu.trans(o))===o&&(s=osu.trans("errors.unknown"))),s}}}).call(window)},Bm31:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Gallery=function(){function e(){this.switchPreview=t(this.switchPreview,this),this.thumbBoundsFn=t(this.thumbBoundsFn,this),this.open=t(this.open,this),this.initiateOpen=t(this.initiateOpen,this),this.pswp=document.getElementsByClassName("pswp"),$(document).on("click",".js-gallery",this.initiateOpen),$(document).on("click",".js-gallery-thumbnail",this.switchPreview)}return e.prototype.initiateOpen=function(t){var e;if(e=$(t.currentTarget),!e.parents("a").length)return t.preventDefault(),this.open(e)},e.prototype.open=function(t){var e,i,n;return i=t.attr("data-gallery-id"),n=parseInt(t.attr("data-index"),10),e=new PhotoSwipe(this.pswp[0],PhotoSwipeUI_Default,this.data(i),{showHideOpacity:!0,getThumbBoundsFn:this.thumbBoundsFn(i),index:n,history:!1}),e.init()},e.prototype.data=function(t){return $(".js-gallery[data-gallery-id='"+t+"']").map(function(t,e){var i;return i=e.getAttribute("data-src")||e.getAttribute("href"),{msrc:i,src:i,w:parseInt(e.getAttribute("data-width"),10),h:parseInt(e.getAttribute("data-height"),10)}}).get()},e.prototype.thumbBoundsFn=function(t){return function(e){return function(e){var i,n,o,r,s,a,u;return i=$(".js-gallery[data-gallery-id='"+t+"'][data-index='"+e+"']"),u=i.offset(),a=[i.width(),i.height()],n=[u.left+a[0]/2,u.top+a[1]/2],o=[parseInt(i.attr("data-width"),10),parseInt(i.attr("data-height"),10)],r=Math.max(a[0]/o[0],a[1]/o[1]),s=o.map(function(t){return t*r}),{x:n[0]-s[0]/2,y:n[1]-s[1]/2,w:s[0]}}}()},e.prototype.switchPreview=function(t){var e,i,n,o,r,s,a,u,c,l,h;for(t.preventDefault(),e=$(t.currentTarget),c=e[0].dataset,o=c.galleryId,r=c.index,n=$(".js-gallery[data-gallery-id='"+o+"']"),i=$(".js-gallery-thumbnail[data-gallery-id='"+o+"']"),l=_.zip(i,n),h=[],s=0,a=l.length;s<a;s++)u=l[s],r===u[0].dataset.index?(u[0].classList.add("js-gallery-thumbnail--active"),h.push(Fade.in(u[1]))):(u[0].classList.remove("js-gallery-thumbnail--active"),h.push(Fade.out(u[1])));return h},e}()}).call(window)},BsmZ:function(t,e){(function(){this.StoreCart=function(){function t(){}return t.setEnabled=function(t){return $(".js-store-add-to-cart").prop("disabled",!t),$("#product-form").data("disabled",!t)},t}()}).call(window)},CVuF:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditAvatar=function(){function e(){this.rollback=t(this.rollback,this),this.overlayStart=t(this.overlayStart,this),this.overlayLeave=t(this.overlayLeave,this),this.overlayHover=t(this.overlayHover,this),this.overlayEnter=t(this.overlayEnter,this),this.overlayEnd=t(this.overlayEnd,this),this.initialize=t(this.initialize,this),$(document).on("turbolinks:load",this.initialize),$(document).on("turbolinks:before-cache",this.rollback),$.subscribe("dragenterGlobal",this.overlayStart),$.subscribe("dragendGlobal",this.overlayEnd),$(document).on("dragenter",".js-account-edit-avatar",this.overlayEnter),$(document).on("dragover",".js-account-edit-avatar",this.overlayHover),this.main=document.getElementsByClassName("js-account-edit-avatar")}return e.prototype.$button=function(){return $(".js-account-edit-avatar__button")},e.prototype.initialize=function(){if(null!=this.main[0])return this.isAvailable=!0,this.$main=$(this.main),this.$button().fileupload({url:laroute.route("account.avatar"),dataType:"json",dropZone:this.$main,submit:function(t){return function(){return t.main[0].classList.add("js-account-edit-avatar--saving"),$.publish("dragendGlobal")}}(this),done:function(t){return function(t,e){return $.publish("user:update",e.result)}}(),fail:osu.fileuploadFailCallback(this.$button),complete:function(t){return function(){return t.main[0].classList.remove("js-account-edit-avatar--saving")}}(this)})},e.prototype.overlayEnd=function(){if(this.isAvailable)return this.main[0].classList.remove("js-account-edit-avatar--start")},e.prototype.overlayEnter=function(){return null!=this.dragging?this.dragging:this.dragging=!0},e.prototype.overlayHover=function(){if(this.dragging)return this.main[0].classList.add("js-account-edit-avatar--hover"),Timeout.clear(this.overlayLeaveTimeout),this.overlayLeaveTimeout=Timeout.set(100,this.overlayLeave)},e.prototype.overlayLeave=function(){return this.dragging=null,this.main[0].classList.remove("js-account-edit-avatar--hover")},e.prototype.overlayStart=function(){if(this.isAvailable)return this.main[0].classList.add("js-account-edit-avatar--start")},e.prototype.rollback=function(){if(this.isAvailable)return this.isAvailable=!1,this.$button().fileupload("destroy")},e}()}).call(window)},CqAb:function(t,e){(function(){var t,e,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;t=ReactDOMFactories.a,e=ReactDOMFactories.li,i=ReactDOMFactories.span,n=ReactDOMFactories.ul,this.PlaymodeTabs=function(s){function a(){return this.switchMode=o(this.switchMode,this),this.render=o(this.render,this),a.__super__.constructor.apply(this,arguments)}return r(a,s),a.prototype.render=function(){var o,r,s,a,u;return n({className:"page-mode"},function(){var n,c,l,h,p,d,f;for(h=BeatmapHelper.modes,f=[],c=0,l=h.length;c<l;c++)u=h[c],s=!(this.props.enableAll||null!=this.props.beatmaps[u]),o=u===this.props.currentMode,a="page-mode-link",o&&(a+=" page-mode-link--is-active"),s&&(a+=" page-mode-link--is-disabled"),f.push(e({className:"page-mode__item",key:u},t({className:a,onClick:this.switchMode,href:null!=(p="function"==typeof(n=this.props).hrefFunc?n.hrefFunc(u):void 0)?p:"#","data-mode":u,"data-disabled":s},osu.trans("beatmaps.mode."+u),null!=(null!=(d=this.props.counts)?d[u]:void 0)?i({className:"page-mode-link__badge"},this.props.counts[u]):void 0,this.props.showCounts?(r=Number(_.sumBy(this.props.beatmaps[u],function(t){return!t.convert})),r>0?i({className:"page-mode-link__badge"},r):void 0):void 0,i({className:"page-mode-link__stripe"}))));return f}.call(this))},a.prototype.switchMode=function(t){var e,i;if(t.preventDefault(),i=t.currentTarget,e=i.dataset.mode,this.props.currentMode!==e&&null!=e&&"true"!==i.dataset.disabled)return $.publish("playmode:set",{mode:e})},a}(React.Component)}).call(window)},CyWe:function(t,e){(function(){this.Timeago=function(){function t(){this.observer=new MutationObserver(function(t){if($.fn.timeago)return t.forEach(function(t){var e;return e=$(t.addedNodes),e.find(".timeago").add(e.filter(".timeago")).timeago()})}),$(document).on("turbolinks:load",function(t){return function(){return $(".timeago").timeago(),t.observer.observe(document.body,{childList:!0,subtree:!0})}}(this))}return t}()}).call(window)},D0OF:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumSearchModal=function(){function e(e){this.forum=e,this.reposition=t(this.reposition,this),this.deactivate=t(this.deactivate,this),this.activate=t(this.activate,this),this.hideModal=t(this.hideModal,this),this.box=document.getElementsByClassName("js-forum-search-box"),this.activeBox=document.getElementsByClassName("js-forum-search-box--active"),this.button=document.getElementsByClassName("js-forum-search-button"),$(window).on("throttled-resize throttled-scroll",this.reposition),$(document).on("show.bs.modal","#forum-search-modal",this.activate),$(document).on("hidden.bs.modal","#forum-search-modal",this.deactivate),$.subscribe("forum:topic:jumpTo",this.hideModal)}return e.prototype.hideModal=function(){return $("#forum-search-modal").modal("hide")},e.prototype.activate=function(t){var e;return this.button[0].style.opacity=0,this.box[0].classList.add("js-forum-search-box--active"),this.reposition(),e=$(t.target).find('.js-forum-posts-jump-to [name="n"]').val(this.forum.currentPostPosition),e[0].selectionStart=0,e[0].selectionEnd=e.val().length},e.prototype.deactivate=function(){return this.button[0].style.opacity=1,this.box[0].classList.remove("js-forum-search-box--active")},e.prototype.reposition=function(){var t,e;if(0!==this.activeBox.length)return t=window.innerHeight-this.button[0].getBoundingClientRect().bottom,e=window.innerWidth-this.button[0].getBoundingClientRect().right,this.box[0].style.bottom=t+"px",this.box[0].style.right=e+"px"},e}()}).call(window)},DN3n:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapPack=function(){function e(e){this.slideDown=t(this.slideDown,this),this.close=t(this.close,this),this.open=t(this.open,this),this.onClick=t(this.onClick,this),this.el=e,this.packId=e.dataset.packId,this.packBody=this.el.querySelector(".js-accordion__item-body"),this.expander=this.el.querySelector(".js-accordion__item-header"),this.busy=!1,this.isCurrent=this.el.classList.contains("js-accordion__item--expanded"),$(".js-accordion").on("beatmappack:clicked",this.onClick),$(this.expander).on("click",function(t){return function(e){if(!t.isCurrent)return $(t.el).trigger("beatmappack:clicked",t.packId)}}(this))}return e.initialize=function(){var t,i,n,o,r;for(o=document.querySelectorAll(".js-beatmap-pack"),r=[],i=0,n=o.length;i<n;i++)t=o[i],r.push(new e(t));return r},e.prototype.onClick=function(t,e){return t.stopPropagation(),this.packId===e?this.open():this.close()},e.prototype.open=function(){var t;if(this.isCurrent=!0,!this.busy)return this.nextFrame(function(t){return function(){return $(t.el).addClass("js-accordion__item--expanded")}}(this)),null!=(t=this.packBody.innerHTML)&&t.length?this.isCurrent?this.slideDown():void 0:(this.busy=!0,this.getBeatmapPackItem(this.packId).done(function(t){return function(e){return t.nextFrame(function(){if(t.packBody.innerHTML=e,t.isCurrent)return t.slideDown()})}}(this)).fail(osu.ajaxError).always(function(t){return function(){return t.busy=!1}}(this)))},e.prototype.close=function(){if(this.isCurrent)return this.isCurrent=!1,this.nextFrame(function(t){return function(){return t.packBody.style.height="0",$(t.el).removeClass("js-accordion__item--expanded")}}(this))},e.prototype.getBeatmapPackItem=function(t){return $.get(laroute.route("packs.show",{pack:t}))},e.prototype.slideDown=function(){var t;return this.packBody.style.height="",t=this.packBody.getBoundingClientRect(),this.packBody.style.height="0",this.nextFrame(function(e){return function(){return e.packBody.style.height=t.height+"px"}}(this))},e.prototype.nextFrame=function(t){return window.requestAnimationFrame(t)},e}()}).call(window)},DiAq:function(t,e){(function(){var t,e,i,n;e=ReactDOMFactories.div,n=ReactDOMFactories.span,t="beatmap-basic-stats",i=function(t){var e,i,n;return n=t%60,i=Math.floor(t/60)%60,e=Math.floor(t/3600),e>0?e+":"+_.padStart(i,2,0)+":"+_.padStart(n,2,0):i+":"+_.padStart(n,2,0)},this.BeatmapBasicStats=function(o){var r,s,a,u;return s=o.beatmapset,r=o.beatmap,e({className:t},function(){var o,c,l,h;for(l=["total_length","bpm","count_circles","count_sliders"],h=[],o=0,c=l.length;o<c;o++)a=l[o],u="bpm"===a?s.bpm:r[a],u="total_length"===a?i(u):u.toLocaleString(),h.push(e({className:t+"__entry",key:a,title:osu.trans("beatmapsets.show.stats."+a)},e({className:t+"__entry-icon",style:{backgroundImage:"url(/images/layout/beatmapset-page/"+a+".svg)"}}),n(null,u)));return h}())}}).call(window)},E7RV:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-fancy-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new FancyChart(this.container[0])},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},EB9T:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TwitchPlayer=function(){function e(e){this.turbolinksReload=e,this.openPlayer=t(this.openPlayer,this),this.noCookieDiv=t(this.noCookieDiv,this),this.start=t(this.start,this),this.startAll=t(this.startAll,this),this.initializeEmbed=t(this.initializeEmbed,this),this.playerDivs=document.getElementsByClassName("js-twitch-player"),addEventListener("turbolinks:load",this.startAll)}return e.prototype.initializeEmbed=function(){return this.turbolinksReload.load("https://player.twitch.tv/js/embed/v1.js",this.startAll)},e.prototype.startAll=function(){var t,e,i,n,o;if(0!==this.playerDivs.length){if("undefined"==typeof Twitch||null===Twitch)return this.initializeEmbed();for(n=this.playerDivs,o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push(this.start(t));return o}},e.prototype.start=function(t){var e,i;if(!t.dataset.twitchPlayerStarted)return t.dataset.twitchPlayerStarted=!0,e={width:"100%",height:"100%",channel:t.dataset.channel},i=new Twitch.Player(t.id,e),i.addEventListener(Twitch.Player.PLAY,function(e){return function(){return e.openPlayer(t)}}(this))},e.prototype.noCookieDiv=function(t){return document.querySelector(".js-twitch-player--no-cookie[data-player-id='"+t+"']")},e.prototype.openPlayer=function(t){if(t.classList.contains("hidden"))return t.classList.remove("hidden"),Fade.out(this.noCookieDiv(t.id))},e}()}).call(window)},EzgO:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipDefault=function(){function e(){this.timeagoTip=t(this.timeagoTip,this),this.rollback=t(this.rollback,this),this.autoAddTooltip=t(this.autoAddTooltip,this),this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover","[title]:not(iframe)",this.onMouseOver),$(document).on("mouseenter touchstart",".u-ellipsis-overflow, .u-ellipsis-overflow-desktop",this.autoAddTooltip),$(document).on("turbolinks:before-cache",this.rollback)}return e.prototype.onMouseOver=function(t){var e,i,n,o,r,s,a,u,c;if(o=t.currentTarget,c=o.getAttribute("title"),o.removeAttribute("title"),0!==_.size(c))return r=o.classList.contains("timeago")||o.classList.contains("js-tooltip-time"),e=r?this.timeagoTip(o,c):$("<span>").text(c),o._tooltip?void $(o).qtip("set",{"content.text":e}):(o._tooltip=!0,i=null!=(u=o.dataset.tooltipPosition)?u:"top center",s=function(){switch(i){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center";case"bottom center":return"top center"}}(),n="qtip tooltip-default","fixed"===o.dataset.tooltipFloat&&(n+=" tooltip-default--fixed"),null!=o.dataset.tooltipModifiers&&(n+=" tooltip-default--"+o.dataset.tooltipModifiers),a={overwrite:!1,content:e,position:{my:s,at:i,viewport:$(window)},show:{event:t.type,ready:!0},hide:{inactive:3e3},style:{classes:n,tip:{width:10,height:8}}},o.dataset.origTitle=c,$(o).qtip(a,t))},e.prototype.autoAddTooltip=function(t){var e,i,n;return n=t.currentTarget,e=$(n),i=e.qtip("api"),n.offsetWidth<n.scrollWidth?i?i.enable():(e.attr("title",e.text()),e.trigger("mouseover")):null!=i?i.disable():void 0},e.prototype.rollback=function(){var t,e,i,n,o;for($(".qtip").remove(),n=document.querySelectorAll("[data-orig-title]"),o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push(t.setAttribute("title",t.dataset.origTitle));return o},e.prototype.timeagoTip=function(t,e){var i,n,o,r,s,a;return a=null!=(o=null!=(r=t.getAttribute("datetime"))?r:e)?o:t.textContent,s=moment(a),i=$("<strong>").text(s.format("LL")),n=$("<span>").addClass("tooltip-default__time").text(s.format("LT")+" "+this.tzString(s)),$("<span>").append(i).append(" ").append(n)},e.prototype.tzString=function(t){var e;return e=t.utcOffset(),"UTC"+(e%60==0?(e>=0?"+":"")+e/60:t.format("Z"))},e}()}).call(window)},FoTz:function(t,e,i){"use strict";function n(t){for(var e=arguments.length-1,i="Minified React error #"+t+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+t,n=0;n<e;n++)i+="&args[]="+encodeURIComponent(arguments[n+1]);throw e=Error(i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),e.name="Invariant Violation",e.framesToPop=1,e}function o(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||$}function r(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||$}function s(){}function a(t,e,i){this.props=t,this.context=e,this.refs=b,this.updater=i||$}function u(t,e,i){var n,o={},r=null,s=null;if(null!=e)for(n in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(r=""+e.key),e)A.call(e,n)&&!O.hasOwnProperty(n)&&(o[n]=e[n]);var a=arguments.length-2;if(1===a)o.children=i;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];o.children=u}if(t&&t.defaultProps)for(n in a=t.defaultProps)void 0===o[n]&&(o[n]=a[n]);return{$$typeof:k,type:t,key:r,ref:s,props:o,_owner:M.current}}function c(t){return"object"==typeof t&&null!==t&&t.$$typeof===k}function l(t){var e={"=":"=0",":":"=2"};return"$"+(""+t).replace(/[=:]/g,function(t){return e[t]})}function h(t,e,i,n){if(D.length){var o=D.pop();return o.result=t,o.keyPrefix=e,o.func=i,o.context=n,o.count=0,o}return{result:t,keyPrefix:e,func:i,context:n,count:0}}function p(t){t.result=null,t.keyPrefix=null,t.func=null,t.context=null,t.count=0,10>D.length&&D.push(t)}function d(t,e,i,o){var r=typeof t;"undefined"!==r&&"boolean"!==r||(t=null);var s=!1;if(null===t)s=!0;else switch(r){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case k:case x:case T:case S:s=!0}}if(s)return i(o,t,""===e?"."+f(t,0):e),1;if(s=0,e=""===e?".":e+":",Array.isArray(t))for(var a=0;a<t.length;a++){r=t[a];var u=e+f(r,a);s+=d(r,u,i,o)}else if(null===t||void 0===t?u=null:(u=j&&t[j]||t["@@iterator"],u="function"==typeof u?u:null),"function"==typeof u)for(t=u.call(t),a=0;!(r=t.next()).done;)r=r.value,u=e+f(r,a++),s+=d(r,u,i,o);else"object"===r&&(i=""+t,n("31","[object Object]"===i?"object with keys {"+Object.keys(t).join(", ")+"}":i,""));return s}function f(t,e){return"object"==typeof t&&null!==t&&null!=t.key?l(t.key):e.toString(36)}function m(t,e){t.func.call(t.context,e,t.count++)}function g(t,e,i){var n=t.result,o=t.keyPrefix;t=t.func.call(t.context,e,t.count++),Array.isArray(t)?v(t,n,i,w.thatReturnsArgument):null!=t&&(c(t)&&(e=o+(!t.key||e&&e.key===t.key?"":(""+t.key).replace(L,"$&/")+"/")+i,t={$$typeof:k,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}),n.push(t))}function v(t,e,i,n,o){var r="";null!=i&&(r=(""+i).replace(L,"$&/")+"/"),e=h(e,r,n,o),null==t||d(t,"",g,e),p(e)}var y=i("yheg"),b=i("PHL4"),w=i("9ZA7"),_="function"==typeof Symbol&&Symbol.for,k=_?Symbol.for("react.element"):60103,x=_?Symbol.for("react.call"):60104,T=_?Symbol.for("react.return"):60105,S=_?Symbol.for("react.portal"):60106,C=_?Symbol.for("react.fragment"):60107,j="function"==typeof Symbol&&Symbol.iterator,$={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};o.prototype.isReactComponent={},o.prototype.setState=function(t,e){"object"!=typeof t&&"function"!=typeof t&&null!=t&&n("85"),this.updater.enqueueSetState(this,t,e,"setState")},o.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},s.prototype=o.prototype;var E=r.prototype=new s;E.constructor=r,y(E,o.prototype),E.isPureReactComponent=!0;var P=a.prototype=new s;P.constructor=a,y(P,o.prototype),P.unstable_isAsyncReactComponent=!0,P.render=function(){return this.props.children};var M={current:null},A=Object.prototype.hasOwnProperty,O={key:!0,ref:!0,__self:!0,__source:!0},L=/\/+/g,D=[],B={Children:{map:function(t,e,i){if(null==t)return t;var n=[];return v(t,n,null,e,i),n},forEach:function(t,e,i){if(null==t)return t;e=h(null,null,e,i),null==t||d(t,"",m,e),p(e)},count:function(t){return null==t?0:d(t,"",w.thatReturnsNull,null)},toArray:function(t){var e=[];return v(t,e,null,w.thatReturnsArgument),e},only:function(t){return c(t)||n("143"),t}},Component:o,PureComponent:r,unstable_AsyncComponent:a,Fragment:C,createElement:u,cloneElement:function(t,e,i){var n=y({},t.props),o=t.key,r=t.ref,s=t._owner;if(null!=e){if(void 0!==e.ref&&(r=e.ref,s=M.current),void 0!==e.key&&(o=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)A.call(e,u)&&!O.hasOwnProperty(u)&&(n[u]=void 0===e[u]&&void 0!==a?a[u]:e[u])}var u=arguments.length-2;if(1===u)n.children=i;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];n.children=a}return{$$typeof:k,type:t.type,key:o,ref:r,props:n,_owner:s}},createFactory:function(t){var e=u.bind(null,t);return e.type=t,e},isValidElement:c,version:"16.2.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:M,assign:y}},z=Object.freeze({default:B}),N=z&&B||z;t.exports=N.default?N.default:N},GA6k:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.OsuLayzr=function(){function e(){this.reinit=t(this.reinit,this),this.init=t(this.init,this),this.observer=new MutationObserver(this.reinit),$(document).on("turbolinks:load",this.init)}return e.prototype.init=function(){return null==this.layzr&&(this.layzr=Layzr()),this.reinit(),this.observer.observe(document.body,{childList:!0,subtree:!0})},e.prototype.reinit=function(){return this.layzr.update().check().handlers(!0)},e}()}).call(window)},GIiB:function(t,e){(function(){this.BeatmapDiscussionHelper=function(){function t(){}return t.DEFAULT_BEATMAP_ID="-",t.DEFAULT_MODE="timeline",t.DEFAULT_FILTER="total",t.MODES=["events","general","generalAll","timeline"],t.FILTERS=["deleted","hype","mapperNotes","mine","pending","praises","resolved","total"],t.discussionMode=function(t){return null!=t.beatmap_id?null!=t.timestamp?"timeline":"general":"generalAll"},t.formatTimestamp=function(t){var e,i,n;if(null!=t)return i=t%1e3,n=Math.floor(t/1e3)%60,e=Math.floor(t/1e3/60),_.padStart(e,2,0)+":"+_.padStart(n,2,0)+"."+_.padStart(i,3,0)},t.linkTimestamp=function(t,e){return null==e&&(e=[]),t.replace(/\b((\d{2}):(\d{2})[:.](\d{3})( \([\d,|]+\)|\b))/g,function(t,i,n,o,r,s){return""+osu.link(Url.openBeatmapEditor(n+":"+o+":"+r+(null!=s?s:"")),i,{classNames:e})})},t.maxlength=750,t.messageType={icon:{hype:"bullhorn",mapperNote:"sticky-note-o",praise:"heart",problem:"exclamation-circle",suggestion:"circle-o"},iconText:{mapperNote:"&#xf24a;",praise:"&#xf004;",problem:"&#xf06a;",resolved:"&#xf05d;",suggestion:"&#xf10c;"}},t.moderationGroup=function(t){if(null!=t.groups)return _.intersection(t.groups,["admin","qat","bng"])[0];switch(!1){case!t.is_admin:return"admin";case!t.is_qat:return"qat";case!t.is_bng:return"bng"}},t.stateFromDiscussion=function(e){var i;return null==e?{}:{discussionId:e.id,beatmapsetId:e.beatmapset_id,beatmapId:null!=(i=e.beatmap_id)?i:t.DEFAULT_BEATMAP_ID,mode:t.discussionMode(e)}},t.url=function(e){var i,n,o,r,s,a,u,c,l,h,p,d;return null==e&&(e={}),o=e.beatmapsetId,n=e.beatmapId,i=e.beatmap,l=e.mode,c=e.filter,s=e.discussionId,u=e.discussions,r=e.discussion,h={},null!=i&&(o=i.beatmapset_id,n=i.id),h.beatmapset=o,h.mode=null!=l?l:t.DEFAULT_MODE,h.beatmap=null==n||"events"===(p=h.mode)||"generalAll"===p?t.DEFAULT_BEATMAP_ID:n,null!=c&&c!==t.DEFAULT_FILTER&&"events"!==h.mode&&(h.filter=c),null!=r&&(s=r.id),null!=s&&(null==r&&null!=u&&(r=_.find(u,{id:s})),null!=r&&(null!=r&&(a=t.stateFromDiscussion(r)),h.beatmapset=a.beatmapsetId,h.beatmap=a.beatmapId,h.mode=a.mode)),d=new URL(document.location),d.pathname=laroute.route("beatmapsets.discussion",h),d.hash=null!=s?d.hash="/"+s:"",d.toString()},t.urlParse=function(t,e,i){var n,o,r,s,a,u,c,l,h,p,d;if(null==i&&(i={}),null==i.forceDiscussionId&&(i.forceDiscussionId=!1),d=new URL(null!=t?t:document.location.href),d.searchParams,h=d.pathname.split("/"),h[0],c=h[1],o=h[2],l=h[3],n=h[4],u=h[5],a=h[6],"beatmapsets"===c&&"discussion"===l)return o=parseInt(o,10),n=parseInt(n,10),p={beatmapsetId:isFinite(o)?o:void 0,beatmapId:isFinite(n)?n:void 0,mode:_.includes(this.MODES,u)?u:this.DEFAULT_MODE,filter:_.includes(this.FILTERS,a)?a:this.DEFAULT_FILTER},"/"===d.hash[1]&&(s=parseInt(d.hash.slice(2),10),isFinite(s)&&(null!=e?(r=_.find(e,{id:s}),_.assign(p,this.stateFromDiscussion(r))):i.forceDiscussionId&&(p.discussionId=s))),p},t.validMessageLength=function(e){return e.length>0&&e.length<=t.maxlength},t}()}).call(window)},HAG7:function(t,e){(function(){var t,e,i,n,o,r,s,a=function(t,e){function i(){this.constructor=t}for(var n in e)u.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},u={}.hasOwnProperty;t=ReactDOMFactories.div,i=ReactDOMFactories.table,r=ReactDOMFactories.thead,n=ReactDOMFactories.tbody,s=ReactDOMFactories.tr,o=ReactDOMFactories.th,e=React.createElement,this.Tracklist=function(u){function c(){return c.__super__.constructor.apply(this,arguments)}return a(c,u),c.prototype.render=function(){var a;return this.props.tracks.length>0?(a=this.props.tracks.map(function(t){return function(t){return e(TracklistTrack,{key:t.id,track:t})}}()),t({className:"tracklist"},i({className:"tracklist__table"},r({},s({className:"tracklist__row--header"},o({className:"tracklist__col tracklist__col--preview"},""),o({className:"tracklist__col tracklist__col--title"},"title"),o({className:"tracklist__col tracklist__col--length"},"length"),o({className:"tracklist__col tracklist__col--bpm"},"bpm"),o({className:"tracklist__col tracklist__col--genre"},"genre"),o({className:"tracklist__col tracklist__col--dl"}))),n({},a)))):null},c}(React.Component)}).call(window)},IlXl:function(t,e){(function(){var t;$(document).on("click","#new-address-switch a",function(t){var e,i;return t.preventDefault(),i=$(t.target),e=$("#new-address-form"),i.is(":visible")?(i.siblings("button").show(),i.hide(),e.find("input").first().focus()):(i.siblings("button").hide(),i.show()),e.slideToggle()}),t=function(){var t,e;return t=$(".js-checkout-confirmation-step"),e=t.filter(":checked"),$("#checkout-with-paypal").toggleClass("disabled",e.length<t.length)},$(document).on("turbolinks:load",t),$(document).on("change",".js-checkout-confirmation-step",t),$(document).on("turbolinks:load",function(){if(!(parseInt($(".js-store-item-quantity").val(),10)>0))return $(".js-store-add-to-cart").hide()}),$(document).on("turbolinks:load",function(){return $("#product-form").submit(function(t){return!$(t.target).data("disabled")})})}).call(window)},In2i:function(t,e){(function(){var t,e,i,n,o;t=ReactDOMFactories.a,e=ReactDOMFactories.div,ReactDOMFactories.img,n=ReactDOMFactories.small,o=ReactDOMFactories.span,i=React.createElement,this.PlayDetail=function(r){var s,a;return a=r.score,a.mods.length?" +"+function(){var t,e,i,n;for(i=a.mods,n=[],t=0,e=i.length;t<e;t++)s=i[t],n.push(s.shortName);return n}().join(",")+" ":" ",e({className:"detail-row"},e({className:"detail-row__icon"},e({className:"badge-rank badge-rank--full badge-rank--"+a.rank})),e({className:"detail-row__detail"},e({className:"detail-row__detail-column detail-row__detail-column--full"},e({className:"detail-row__detail-row detail-row__detail-row--main"},t({href:a.beatmap.url,className:"detail-row__text-score detail-row__text-score--title",title:a.beatmapset.artist+" - "+a.beatmapset.title+" "},a.beatmapset.title+" ["+a.beatmap.version+"]"," ",n({className:"detail-row__text-score detail-row__text-score--artist"},a.beatmapset.artist))),e({className:"detail-row__detail-row detail-row__detail-row--bottom"},o({className:"detail-row__text-score detail-row__text-score--time",dangerouslySetInnerHTML:{__html:osu.timeago(a.created_at)}}))),e({className:"detail-row__detail-column detail-row__detail-column--score-data"},e({className:"detail-row__score-data detail-row__score-data--mods"},i(Mods,{mods:a.mods})),e({className:"detail-row__score-data detail-row__score-data--main"},e({className:"detail-row__detail-row detail-row__detail-row--main"},o({className:"detail-row__text-score detail-row__text-score--pp",title:a.weight?osu.trans("users.show.extra.top_ranks.weighted_pp",{percentage:Math.round(a.weight.percentage)+"%",pp:osu.trans("users.show.extra.top_ranks.pp",{amount:Math.round(a.weight.pp)})}):void 0},a.weight?osu.trans("users.show.extra.top_ranks.pp",{amount:Math.round(a.pp)}):a.score.toLocaleString())),e({className:"detail-row__score-details"},e({className:"detail-row__text-score"},osu.trans("users.show.extra.historical.recent_plays.accuracy",{percentage:(100*a.accuracy).toFixed(2)+"%"})))))))}}).call(window)},JWAU:function(t,e,i){"use strict";var n=i("9ZA7"),o=i("9y1f"),r=i("+rNv");t.exports=function(){function t(t,e,i,n,s,a){a!==r&&o(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function e(){return t}t.isRequired=t;var i={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e};return i.checkPropTypes=n,i.PropTypes=i,i}},L96c:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingUserStats=function(){function e(){this.resize=t(this.resize,this),this.loadData=t(this.loadData,this),this.margin={top:40,right:0,bottom:0,left:0},this.peakR=5,this.svgContainerOuter=d3.select(".js-landing-graph"),this.svgContainerOuter.selectAll("svg").remove(),this.svgContainerInner=this.svgContainerOuter.append("svg").attr("class","landing-graph"),this.svg=this.svgContainerInner.append("g").attr("transform","translate("+this.margin.left+", "+(this.margin.top+1)+")"),this.svgArea=this.svg.append("path").attr("class","landing-graph__area"),this.svgPeakText=this.svg.append("text").attr("class","landing-graph__text").attr("y",2*-this.peakR),this.svgPeakCircle=this.svg.append("circle").attr("class","landing-graph__circle").attr("cy",0).attr("r",this.peakR),this.scaleX=d3.scaleLinear(),this.scaleY=d3.scaleTime(),this.area=d3.area().curve(d3.curveBasis).x(function(t){return function(e){return t.scaleX(e.x)}}(this)).y0(function(t){return function(){return t.height}}(this)).y1(function(t){return function(e){return t.scaleY(e.y)}}(this)),this.loadData(),this.resize()}return e.prototype.loadData=function(){if(this.data=osu.parseJson("json-stats"),!_.isEmpty(this.data))return this.maxElem=_.maxBy(this.data,function(t){return t.y}),this.scaleX.domain(d3.extent(this.data,function(t){return t.x})),this.scaleY.domain([0,d3.max(this.data,function(t){return t.y})]),this.svgPeakText.text(osu.trans("home.landing.peak",{count:this.maxElem.y.toLocaleString()})),this.peakTextLength=this.svgPeakText.node().getComputedTextLength()},e.prototype.resize=function(){if(!_.isEmpty(this.data))return this.width=parseInt(this.svgContainerOuter.style("width"))-this.margin.left-this.margin.right,this.height=parseInt(this.svgContainerOuter.style("height"))-this.margin.top-this.margin.bottom,this.scaleX.range([0,this.width]),this.scaleY.range([this.height,0]),this.svgContainerInner.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svgArea.datum(this.data).attr("d",this.area),this.svgPeakCircle.attr("cx",this.scaleX(this.maxElem.x)),this.svgPeakText.attr("x",function(t){return function(){var e;return e=t.scaleX(t.maxElem.x)+2*t.peakR,t.peakTextLength+e>t.width?t.scaleX(t.maxElem.x)-(t.peakTextLength+2*t.peakR):e}}(this))},e}()}).call(window)},Lmm6:function(t,e){(function(){var t;t=$({}),$.subscribe=t.on.bind(t),$.unsubscribe=t.off.bind(t),$.publish=t.trigger.bind(t)}).call(window)},Mocb:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.ChangelogChart=function(){function i(e){this.resize=t(this.resize,this),this.positionTooltip=t(this.positionTooltip,this),this.hideTooltip=t(this.hideTooltip,this),this.showTooltip=t(this.showTooltip,this),this.options={scales:{x:d3.scaleTime(),y:d3.scaleLinear(),class:d3.scaleOrdinal()}},this.area=d3.select(e),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g"),this.areaFunction=d3.area().curve(d3.curveMonotoneX).x(function(t){return function(e){return t.options.scales.x(e.data.date)}}(this)).y1(function(t){return function(e){return t.options.scales.y(e[1])}}(this)).y0(function(t){return function(e,i){return t.options.scales.y(e[0])}}(this)),this.hoverArea=this.svg.append("rect").classed("changelog-chart__hover-area",!0).on("mouseout",this.hideTooltip).on("mousemove",this.positionTooltip),this.tooltipArea=this.area.append("div").classed("changelog-chart__tooltip-area",!0),this.tooltipContainer=this.tooltipArea.append("div").classed("changelog-chart__tooltip-container",!0).attr("data-visibility","hidden"),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltip=this.tooltipContainer.append("div").classed("changelog-chart__tooltip",!0),this.tooltipName=this.tooltip.append("div"),this.tooltipUserCount=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--user-count",!0),this.tooltipDate=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--date",!0),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltipLine=this.tooltipContainer.selectAll(".changelog-chart__tooltip-line")}return i.prototype.loadData=function(){var t,e,i;return t=osu.parseJson("json-chart-config"),this.options.order=t.order,this.options.isBuild=t.isBuild,e=this.normalizeData(t.buildHistory),i=d3.stack().keys(this.options.order).value(function(t,e){return null!=t[e]?t[e].normalized:0}),this.data=i(e),this.resize()},i.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width,this.height=t.height},i.prototype.setSvgSize=function(){return this.svg.attr("width",this.width).attr("height",this.height)},i.prototype.setHoverAreaSize=function(){return this.hoverArea.attr("width",this.width).attr("height",this.height)},i.prototype.setScalesRange=function(){var t,e;return this.options.scales.x.range([0,this.width]).domain([null!=(t=_.first(this.data[0]))?t.data.date:void 0,null!=(e=_.last(this.data[0]))?e.data.date:void 0]),this.options.scales.y.range([0,this.height]).domain([0,1]),this.options.scales.class.range(_.map(this.options.order,function(t){return function(e,i){return t.options.isBuild?"build-"+i%12:_.kebabCase(e)}}(this))).domain(this.options.order)},i.prototype.drawLines=function(){return this.svgWrapper.selectAll("g").data(this.data).enter().append("path").attr("class",function(t){return function(e){return"changelog-chart__area changelog-chart__area--"+t.options.scales.class(e.key)}}(this)).attr("d",this.areaFunction)},i.prototype.showTooltip=function(){return Fade.in(this.tooltipContainer.node())},i.prototype.hideTooltip=function(){return Fade.out(this.tooltipContainer.node())},i.prototype.positionTooltip=function(){var t,e,i,n,o,r,s,a,u,c,l,h,p,d,f,m;if(u=d3.mouse(this.hoverArea.node()),f=this.options.scales.x.invert(u[0]),m=u[1]/this.height,c=d3.bisector(function(t){return t.data.date}).left(this.data[0],f)){for(l=this.data,o=r=0,a=l.length;r<a;o=++r)if(n=l[o],m<=n[c][1]&&null!=n[c].data[n.key]){i=o,e=n.key,s=this.options.scales.class(e);break}return this.showTooltip(),Timeout.clear(this._autoHideTooltip),this._autoHideTooltip=Timeout.set(3e3,this.hideTooltip),t=this.options.scales.x(f),this.tooltipName.attr("class","changelog-chart__text changelog-chart__text--name changelog-chart__text--"+s).text(e),this.tooltipUserCount.text(this.data[i][c].data[e].user_count.toLocaleString()),this.tooltipDate.text(this.data[i][c].data.date_formatted),h=this.tooltip.node().getBoundingClientRect().width,d=t-h/2,p=d<0?0:d+h>this.width?this.width-h:d,this.tooltip.style("transform","translateX("+p+"px)"),this.tooltipLine.style("transform","translateX("+t+"px)")}},i.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setHoverAreaSize(),this.drawLines()},i.prototype.normalizeData=function(t){var i,n,o,r,s,a,u,c,l,h;s=_.groupBy(t,"created_at"),a=[];for(c in s)if(e.call(s,c)){for(h=s[c],u=_.sumBy(h,"user_count"),o=moment(h[0].created_at),r={created_at:c,date:o.toDate(),date_formatted:o.format("YYYY/MM/DD")},i=0,n=h.length;i<n;i++)l=h[i],l.normalized=l.user_count/u,r[l.label]=l;a.push(r)}return a},i}()}).call(window)},NEwV:function(t,e){(function(){var t,e;t=ReactDOMFactories.div,e=React.createElement,this.BeatmapIcon=function(i){var n,o,r,s,a,u,c;return n=i.beatmap,r=null!=(a=i.overrideVersion)?a:BeatmapHelper.getDiffRating(n.difficulty_rating),c=(null==(u=i.showTitle)||u)&&null==i.overrideVersion,s=n.convert?"osu":n.mode,o="beatmap-icon beatmap-icon--"+r+" beatmap-icon--"+i.modifier,c&&(o+=" beatmap-icon--with-hover js-beatmap-tooltip"),t({className:o,"data-beatmap-title":c?n.version:void 0,"data-stars":_.round(n.difficulty_rating,2),"data-difficulty":r},t({className:"beatmap-icon__shadow"}),e(Icon,{name:"extra-mode-"+s}))}}).call(window)},NhNE:function(t,e){(function(){$(document).on("ajax:success",".edit-post-link",function(t,e,i,n){var o;return $(t.target).trigger("ajax:complete",[n,i]),o=$(t.target).parents(".js-forum-post"),o.data("originalPost",o.html()).html(e).find("[name=body]").focus(),osu.pageChange()}),$(document).on("click",".js-edit-post-cancel",function(t){var e;return t.preventDefault(),e=$(t.target).parents(".js-forum-post"),e.html(e.data("originalPost")),osu.pageChange()}),$(document).on("ajax:success",".js-forum-post-edit",function(t,e,i,n){return $(t.target).trigger("ajax:complete",[n,i]).parents(".js-forum-post").replaceWith(e),osu.pageChange()})}).call(window)},NxIc:function(t,e,i){(function(t,e){!function(t,i){"use strict";function n(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return c[u]=n,a(u),u++}function o(t){delete c[t]}function r(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}function s(t){if(l)setTimeout(s,0,t);else{var e=c[t];if(e){l=!0;try{r(e)}finally{o(t),l=!1}}}}if(!t.setImmediate){var a,u=1,c={},l=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?function(){a=function(t){e.nextTick(function(){s(t)})}}():function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&s(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),a=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){s(t.data)},a=function(e){t.port2.postMessage(e)}}():h&&"onreadystatechange"in h.createElement("script")?function(){var t=h.documentElement;a=function(e){var i=h.createElement("script");i.onreadystatechange=function(){s(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():function(){a=function(t){setTimeout(s,0,t)}}(),p.setImmediate=n,p.clearImmediate=o}}("undefined"==typeof self?void 0===t?this:t:self)}).call(e,i("t8zY"),i("r7L2"))},O34q:function(t,e){var i=function(t,e,i){return i=window.getComputedStyle,(i?i(t):t.currentStyle)[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]};t.exports=i},O94S:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.GlobalDrag=function(){function e(){this.dragend=t(this.dragend,this),this.dragenter=t(this.dragenter,this),$(document).on("dragenter",this.dragenter),$(document).on("dragover",this.dragend)}return e.prototype.dragenter=function(){if(!this.dragging)return this.dragging=!0,$.publish("dragenterGlobal")},e.prototype.dragend=function(t){var e;if(this.dragging)return e=function(t){return function(){return t.dragging=!1,$.publish("dragendGlobal")}}(this),Timeout.clear(this.dragendTimer),this.dragendTimer=Timeout.set(100,e)},e}()}).call(window)},PHL4:function(t,e,i){"use strict";var n={};t.exports=n},Pcbd:function(t,e){(function(){this.FormPlaceholderHide=function(){function t(){$(document).on("focus",".js-form-placeholder-hide",this.onFocus),$(document).on("blur",".js-form-placeholder-hide",this.onBlur)}return t.prototype.onBlur=function(t){if(t.target._origPlaceholder)return t.target.setAttribute("placeholder",t.target._origPlaceholder),t.target._origPlaceholder=null},t.prototype.onFocus=function(t){return t.target._origPlaceholder=t.target.getAttribute("placeholder"),t.target.setAttribute("placeholder","")},t}()}).call(window)},"Q8P+":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksDisqus=function(){function e(e){this.turbolinksReload=e,this.reload=t(this.reload,this),this.initializeEmbed=t(this.initializeEmbed,this),this.initialize=t(this.initialize,this),this.prepareContainer=t(this.prepareContainer,this),this.buildConfig=t(this.buildConfig,this),this.attributes=t(this.attributes,this),this.el=document.getElementsByClassName("js-turbolinks-disqus"),addEventListener("turbolinks:load",this.initialize),$.subscribe("turbolinksDisqusReload",this.initialize)}return e.prototype.attributes=function(){return JSON.parse(this.el[0].dataset.turbolinksDisqus)},e.prototype.buildConfig=function(){var t;return t=this.attributes(),function(){if(this.page.shortname=disqusShortName,this.page.url=document.location.href,this.page.identifier=t.identifier,this.page.title=t.title,null!=currentUser.disqus_auth)return this.page.remote_auth_s3=currentUser.disqus_auth.auth_data,this.page.api_key=currentUser.disqus_auth.public_key}},e.prototype.prepareContainer=function(){var t,e;for(e=document.createElement("div"),e.id="disqus_thread",t=this.el[0];t.firstChild;)t.removeChild(t.firstChild);return t.appendChild(e)},e.prototype.initialize=function(){if(0!==this.el.length)return this.prepareContainer(),"undefined"==typeof DISQUS||null===DISQUS?this.initializeEmbed():this.reload()},e.prototype.initializeEmbed=function(){return window.disqus_config=this.buildConfig(),this.turbolinksReload.load("https://"+disqusShortName+".disqus.com/embed.js")},e.prototype.reload=function(){return DISQUS.reset({reload:!0,config:this.buildConfig()})},e}()}).call(window)},QLwW:function(t,e){(function(){var t,e,i=function(t,e){return function(){return t.apply(e,arguments)}},n=function(t,e){function i(){this.constructor=t}for(var n in e)o.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},o={}.hasOwnProperty;e=ReactDOMFactories.div,React.createElement,t="countdown-timer",this.CountdownTimer=function(o){function r(t){this.render=i(this.render,this),this.updateTimer=i(this.updateTimer,this);var e;r.__super__.constructor.call(this,t),e=moment(this.props.deadline),this.state={deadline:e,diff:Math.max(e.diff(),0)}}return n(r,o),r.prototype.componentDidMount=function(){return this.timer=setInterval(this.updateTimer,1e3)},r.prototype.componentWillUnmount=function(){return clearInterval(this.timer)},r.prototype.updateTimer=function(){var t;return t=Math.max(this.state.deadline.diff(),0),0===t&&clearInterval(this.timer),this.setState({diff:t})},r.prototype.render=function(){var i,n,o,r;return i=this.state.diff/1e3,o={days:Math.floor(i/86400),hours:Math.floor(i/3600%24),minutes:Math.floor(i/60%60),seconds:Math.floor(i%60)},e({className:t},e({className:t+"__header"},osu.trans("common.time.remaining")+":"),function(){var i;i=[];for(n in o)r=o[n],i.push(e({key:n,className:t+"__field"},e({className:t+"__digit"},r<10?"0"+r:r),e({className:t+"__label"},n)));return i}())},r}(React.Component)}).call(window)},Ucvm:function(t,e){(function(){this.Timeout=function(){function t(){}return t.clear=function(t){return clearTimeout(t)},t.set=function(t,e){return setTimeout(e,t)},t}()}).call(window)},VNmc:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ReplyPreview=function(){function e(){this.resetPreview=t(this.resetPreview,this),this.hidePreview=t(this.hidePreview,this),this.showPreview=t(this.showPreview,this),this.fetchPreview=t(this.fetchPreview,this),this.input=".js-forum-topic-reply--input",this.writeButton=".js-forum-reply-preview--hide",this.previewButton=".js-forum-reply-preview--show",this.editBox=".js-forum-reply-write",this.previewBox=".js-forum-reply-preview",this.lastBody=null,$(document).on("click",".js-forum-reply-preview--show",this.fetchPreview),$(document).on("click",".js-forum-reply-preview--hide",this.hidePreview),$(document).on("turbolinks:load",this.resetPreview)}return e.prototype.fetchPreview=function(t){var e,i,n;if(t.preventDefault(),e=$(this.previewBox).find(".js-forum-reply-preview--content"),n=laroute.route("bbcode-preview"),i=$(this.input).val(),!$(this.previewButton).hasClass("active"))return i===this.lastBody?void this.showPreview():$.ajax({url:n,method:"POST",data:{text:i}}).done(function(t){return function(n){return t.lastBody=i,e.html(n),t.showPreview()}}(this))},e.prototype.showPreview=function(){return $(this.editBox).addClass("hidden"),$(this.previewBox).removeClass("hidden"),$(this.previewButton).addClass("js-is-active"),$(this.writeButton).removeClass("js-is-active"),osu.pageChange()},e.prototype.hidePreview=function(t){return null!=t&&t.preventDefault(),$(this.editBox).removeClass("hidden"),$(this.previewBox).addClass("hidden"),$(this.previewButton).removeClass("js-is-active"),$(this.writeButton).addClass("js-is-active"),osu.pageChange()},e.prototype.resetPreview=function(){return this.lastBody=null},e}()}).call(window)},Vwlb:function(t,e){(function(){var t,e;e=React.createElement,t=ReactDOMFactories.div,ReactDOMFactories.img,this.Mods=function(i){var n,o,r,s,a,u,c,l;for(a=null!=(c=i.modifiers)?c:[],u=null!=(l=i.mods)?l:[],n="mods",o=0,r=a.length;o<r;o++)s=a[o],n+=" mods--"+s;return t({className:n},function(){var i,n,o;for(o=[],i=0,n=u.length;i<n;i++)s=u[i],o.push(t({key:s,className:"mods__mod"},t({className:"mods__mod-image"},e(Mod,{mod:s}))));return o}())}}).call(window)},WHxs:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserLogin=function(){function e(){this.showToContinue=t(this.showToContinue,this),this.showOnLoad=t(this.showOnLoad,this),this.showOnError=t(this.showOnError,this),this.showOnClick=t(this.showOnClick,this),this.show=t(this.show,this),this.reset=t(this.reset,this),this.refreshToken=t(this.refreshToken,this),this.loginSuccess=t(this.loginSuccess,this),this.loginError=t(this.loginError,this),this.clickAfterLogin=null,$(document).on("ajax:success",".js-login-form",this.loginSuccess),$(document).on("ajax:error",".js-login-form",this.loginError),$(document).on("click",".js-user-link",this.showOnClick),$(document).on("click",".js-login-required--click",this.showToContinue),$(document).on("ajax:error",this.showOnError),$(document).on("turbolinks:load",this.showOnLoad),$.subscribe("nav:popup:hidden",this.reset)}return e.prototype.loginError=function(t,e){return t.preventDefault(),t.stopPropagation(),$(".js-login-form--error").text(osu.xhrErrorMessage(e))},e.prototype.loginSuccess=function(t,e){var i;return i=this.clickAfterLogin,this.clickAfterLogin=null,this.refreshToken(),$.publish("user:update",e.user),Timeout.set(0,function(t){return function(){return $(".js-user-login--menu")[0].click(),$(".js-user-header").replaceWith(e.header),$(".js-user-header-popup").html(e.header_popup),osu.executeAction(i)}}())},e.prototype.refreshToken=function(){var t;return t=Cookies.get("XSRF-TOKEN"),$('[name="_token"]').attr("value",t),$('[name="csrf-token"]').attr("content",t)},e.prototype.reset=function(){return this.clickAfterLogin=null},e.prototype.show=function(t){return this.clickAfterLogin=t,Timeout.set(0,function(){return $(".js-user-login--menu")[0].click()})},e.prototype.showOnClick=function(t){return t.preventDefault(),this.show()},e.prototype.showOnError=function(t,e){var i;if(401===e.status&&"basic"===(null!=(i=e.responseJSON)?i.authentication:void 0))return null!=currentUser.id?osu.reloadPage():this.show(t.target)},e.prototype.showOnLoad=function(){if(null!=window.showLoginModal)return window.showLoginModal=null,this.show()},e.prototype.showToContinue=function(t){if(null==currentUser.id)return t.preventDefault(),Timeout.set(0,function(e){return function(){return e.show(t.target)}}(this))},e}()}).call(window)},Wobc:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StatusMap=function(){function e(e){this.update=t(this.update,this);var i,n,o;this.circleSize=8,n=40,o=1350,i=597,this.svg=d3.select(e).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+o+" "+(i+n)).attr("preserveAspectRatio","xMinYMin"),this.svg.append("svg:image").attr("xlink:href","/images/backgrounds/world_map.svg").attr("width",o).attr("height",i).attr("x",0).attr("y",n/2)}return e.prototype.update=function(t){var e,i,n,o,r;for(this.svg.selectAll("circle").remove(),this.svg.selectAll("text").remove(),o=[],i=0,n=t.length;i<n;i++)r=t[i],this.svg.append("circle").attr("r",this.circleSize).attr("cx",r.x).attr("cy",r.y).classed("status-map__circle status-map__circle--"+r.state,!0),e=this.svg.append("circle").attr("r",this.circleSize).attr("cx",r.x).attr("cy",r.y).classed("status-map__circle status-map__circle--"+r.state,!0),e.on("mouseover",function(t){return function(){var e;return e=d3.select(d3.event.target),e.transition().duration(1e3).attr("r",t.circleSize+20).style("opacity",0).each("end",function(){return e.attr("r",t.circleSize).style("opacity",1)})}}(this)),this.svg.append("text").text(r.name).attr("x",r.x).attr("y",r.y-40).classed("status-map__text",!0),o.push(this.svg.append("text").text(r.players+" players "+("down"===r.state?"offline":"online")).attr("x",r.x).attr("y",r.y-20).classed("status-map__text",!0));return o},e}()}).call(window)},X9bF:function(t,e,i){t.exports=i("JWAU")()},Xgwh:function(t,e){(function(){var t,e,i;i=function(){return StoreCart.setEnabled(!1),$("#username-check-price").text("")},t=function(){var t,e;return t=$("#username-check-status"),e=$("#username.form-control").val(),$.post(laroute.route("users.check-username-availability"),{username:e}).done(function(e){if(e.username===$("#username.form-control").val())return e.available?($(".js-store-add-to-cart").attr("disabled",!1),$("#username-check-price").text(e.costString),$("#username-form-price").val(e.cost),$("#product-form").data("disabled",!1)):i(),t.html(e.message),t.toggleClass("green-dark",e.available),t.toggleClass("pink-dark",!e.available)}).fail(function(t){if(401===t.status)return osu.popup(osu.trans("errors.logged_out"),"danger")})},e=_.debounce(t,300),$(document).on("input",".js-username-change #username.form-control",function(){var t,n;return t=$("#username-check-status"),n=$("#username.form-control").val(),t.removeClass("green-dark"),t.removeClass("pink-dark"),i(),0===n.length?t.text(Lang.get("store.username_change.check")):(t.text(Lang.get("store.username_change.checking",{username:n})),e())}),$(document).on("turbolinks:load",function(){if(0!==$(".js-username-change #username.form-control").length)return i()})}).call(window)},XjSE:function(t,e){(function(){var t={}.hasOwnProperty;this.BeatmapHelper=function(){function e(){}return e.default=function(t){var i,n,o,r,s,a,u;if(n=t.group,o=t.items,a=t.mode,null!=o)return _.findLast(o,function(t){return null==t.deleted_at});if(null!=n)for(u=null!=a?[a]:e.modes,r=0,s=u.length;r<s;r++)if(a=u[r],null!=(i=e.default({items:n[a]})))return i},e.find=function(t){var i,n,o,r,s,a,u;for(i=t.group,n=t.id,a=t.mode,u=null!=a?[a]:e.modes,r=0,s=u.length;r<s;r++)if(a=u[r],null!=(o=_.find(i[a],{id:n})))return o},e.getDiffRating=function(t){return t<1.5?"easy":t<2.25?"normal":t<3.75?"hard":t<5.25?"insane":t<6.75?"expert":"expert-plus"},e.group=function(i){var n,o,r;n=_.groupBy(i,"mode");for(r in n)t.call(n,r)&&(o=n[r],n[r]=e.sort(o));return n},e.modes=["osu","taiko","fruits","mania"],e.sort=function(t){var e;return e=["convert","difficulty_rating"],"mania"===t[0].mode&&e.unshift("cs"),_.sortBy(t,e)},e}()}).call(window)},YMcV:function(t,e){(function(){this.Hits=function(){function t(){}return t.generate=function(t){var e,i,n;return n=t.score,i=t.playmode,e="mania"===i?["count_geki","count_300","count_katu","count_100","count_50"]:["count_300","count_100","count_50"],{header:e.map(function(t){return osu.trans("common.score_count."+t)}).join("/"),values:e.map(function(t){return n.statistics[t].toLocaleString()}).join("/")}},t}()}).call(window)},YybB:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Search=function(){function e(){this.searchingToggle=t(this.searchingToggle,this),this.searchingEnd=t(this.searchingEnd,this),this.searchingStart=t(this.searchingStart,this),this.submit=t(this.submit,this),this.maybeSubmit=t(this.maybeSubmit,this),this.forumPostReset=t(this.forumPostReset,this),this.debouncedSubmit=_.debounce(this.submit,500),$(document).on("click",".js-search--forum-options-reset",this.forumPostReset),$(document).on("input",".js-search--input",this.debouncedSubmit),$(document).on("keydown",".js-search--input",this.maybeSubmit)}return e.prototype.forumPostReset=function(t){var e;return e=$(t.currentTarget).closest("form"),e.find("[name=username], [name=forum_id]").val(""),e.find("[name=forum_children]").prop("checked",!1)},e.prototype.maybeSubmit=function(t){if(13===t.keyCode)return t.preventDefault(),this.submit()},e.prototype.submit=function(t){var e,i,n,o;if(e=t.currentTarget,""!==(o=e.value.trim())&&o!==(null!=(n=e.dataset.searchCurrent)?n.trim():void 0))return this.searchingStart(),$(document).one("turbolinks:before-cache",this.searchingEnd),i=$(t.currentTarget).closest("form").serialize(),e.dataset.searchCurrent=o,Turbolinks.visit("?"+i)},e.prototype.searchingStart=function(){return this.searchingToggle(!0)},e.prototype.searchingEnd=function(){return this.searchingToggle(!1)},e.prototype.searchingToggle=function(t){return $(".js-search--header").toggleClass("js-search--searching",t)},e}()}).call(window)},Zk6r:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.PostPreview=function(){function e(){this.loadPreview=t(this.loadPreview,this),this.debouncedLoadPreview=_.debounce(this.loadPreview,500),$(document).on("input",".js-post-preview--auto",function(t){return function(e){return t.debouncedLoadPreview(e.currentTarget)}}(this))}return e.prototype.loadPreview=function(t){var e,i,n,o,r;if(e=$(t).closest("form"),r=laroute.route("bbcode-preview"),o=t.value,i=e.find(".js-post-preview--body"),n=e.find(".js-post-preview--box"),i.attr("data-raw")!==o)return $.post(r,{text:o}).done(function(t){return function(t){return i.html(t),i.attr("data-raw",o),n.removeClass("hidden"),osu.pageChange()}}())},e}()}).call(window)},ZkP1:function(t,e){(function(){var t,e,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;i=React.createElement,e=ReactDOMFactories.button,ReactDOMFactories.div,n=ReactDOMFactories.span,t="user-action-button",this.FriendButton=function(s){function a(t){this.isVisible=o(this.isVisible,this),this.render=o(this.render,this),this.componentWillUnmount=o(this.componentWillUnmount,this),this.componentDidMount=o(this.componentDidMount,this),this.refresh=o(this.refresh,this),this.clicked=o(this.clicked,this),this.updateFriends=o(this.updateFriends,this),this.requestDone=o(this.requestDone,this),a.__super__.constructor.call(this,t),this.eventId="friendButton-"+this.props.user_id+"-"+osu.uuid(),this.state={friend:_.find(currentUser.friends,function(e){return e.target_id===t.user_id})}}return r(a,s),a.prototype.requestDone=function(){return this.setState({loading:!1})},a.prototype.updateFriends=function(t){return this.setState({friend:_.find(t,function(t){return function(e){return e.target_id===t.props.user_id}}(this))},function(){return currentUser.friends=t,$.publish("user:update",currentUser),$.publish("friendButton:refresh")})},a.prototype.clicked=function(t){return this.setState({loading:!0}),this.state.friend?this.xhr=$.ajax({type:"DELETE",url:laroute.route("friends.destroy",{friend:this.props.user_id})}):this.xhr=$.ajax({type:"POST",url:laroute.route("friends.store",{target:this.props.user_id})}),this.xhr.done(this.updateFriends).fail(osu.emitAjaxError(this.button)).always(this.requestDone)},a.prototype.refresh=function(t){return this.setState({friend:_.find(currentUser.friends,function(t){return function(e){return e.target_id===t.props.user_id}}(this))},function(t){return function(){}}(),this.forceUpdate())},a.prototype.componentDidMount=function(){return $.subscribe("friendButton:refresh."+this.eventId,this.refresh)},a.prototype.componentWillUnmount=function(){var t;return $.unsubscribe("."+this.eventId),null!=(t=this.xhr)?t.abort():void 0},a.prototype.render=function(){var o,r,s;return this.isVisible()?(null!=(r=this.props.container)&&r.classList.remove("hidden"),o=t,this.state.friend&&!this.state.loading&&(this.state.friend.mutual?o+=" "+t+"--mutual":o+=" "+t+"--friend"),e({type:"button",className:o,onClick:this.clicked,ref:function(t){return function(e){return t.button=e}}(this),title:this.state.friend?osu.trans("friends.buttons.remove"):osu.trans("friends.buttons.add"),disabled:this.state.loading},this.state.loading?i(Icon,{name:"refresh",modifiers:["spin"]}):this.state.friend?[n({key:"hover",className:t+"__icon "+t+"__icon--hover-visible"},i(Icon,{name:"user-times"})),this.state.friend.mutual?n({key:"normal-mutual",className:t+"__icon "+t+"__icon--hover-hidden"},i(Icon,{name:"user"}),i(Icon,{name:"user"})):n({key:"normal",className:t+"__icon "+t+"__icon--hover-hidden"},i(Icon,{name:"user"}))]:i(Icon,{name:"user-plus"}))):(null!=(s=this.props.container)&&s.classList.add("hidden"),null)},a.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.user_id)&&this.props.user_id!==currentUser.id&&(this.state.friend||currentUser.friends.length<currentUser.max_friends)},a}(React.PureComponent)}).call(window)},ZvgG:function(t,e){(function(){this.Blackout=function(){function t(){}return t.el=document.getElementsByClassName("js-blackout"),t.hide=function(){return t.toggle(!1)},t.show=function(){return t.toggle(!0)},t.toggle=function(e,i){var n;if(null!=(n=t.el[0]))return e&&null!=i||(i=null),n.style.opacity=i,Fade.toggle(n,e)},t}()}).call(window)},bQzg:function(t,e){(function(){var t;t=ReactDOMFactories.span,this.Icon=function(e){var i,n,o,r,s,a,u,c,l;for(a=e.name,s=null!=(c=e.modifiers)?c:[],u=e.parentClass,l=e.title,i="fa fa-"+a,n=0,o=s.length;n<o;n++)r=s[n],i+=" fa-"+r;return null!=u?t({className:u,title:l},t({className:i})):t({className:i,title:l})}}).call(window)},"bXa+":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FormConfirmation=function(){function e(e){this.formError=e,this.onInput=t(this.onInput,this),this.boot=t(this.boot,this),$(document).on("input",".js-form-confirmation",this.onInput)}return e.prototype.boot=function(t){var e,i,n;if(null==t.formConfirmation)return i={},_.endsWith(t.name,"_confirmation")||_.endsWith(t.name,"_confirmation]")?(n=t.name.replace(/_confirmation(]?)$/,"$1"),i.confirmation=t,i.main=$(t).closest("form").find("[name='"+n+"']")[0]):(e=t.name.replace(/(]?)$/,"_confirmation$1"),i.main=t,i.confirmation=$(t).closest("form").find("[name='"+e+"']")[0]),i.main.formConfirmation=i,i.confirmation.formConfirmation=i},e.prototype.onInput=function(t){var e,i,n,o;return e=t.currentTarget,this.boot(e),i=e.formConfirmation,o=i.main.value,n=i.confirmation.value,0===o.length||0===n.length?this.formError.setOneError(i.confirmation,[]):o===n?this.formError.setOneError(i.confirmation,[]):this.formError.setOneError(i.confirmation,[osu.trans("model_validation.wrong_confirmation")])},e}()}).call(window)},"bl+Q":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Wiki=function(){function e(){this.stickyToc=t(this.stickyToc,this),this.positionTocFloating=t(this.positionTocFloating,this),this.positionTocDefault=t(this.positionTocDefault,this),this.positionTocBottom=t(this.positionTocBottom,this),this.floatTocContainer=document.getElementsByClassName("js-wiki-toc-float-container"),this.floatToc=document.getElementsByClassName("js-wiki-toc-float"),$.subscribe("stickyHeader",this.stickyToc)}return e.prototype.positionTocBottom=function(){var t;if(t=this.floatToc[0],"bottom"!==t._position)return t._position="bottom",t.style.position="absolute",t.style.top="auto",t.style.bottom=0,t.style.width="auto"},e.prototype.positionTocDefault=function(){var t;if(t=this.floatToc[0],"default"!==t._position)return t._position="default",t.style.position="absolute",t.style.top=0,t.style.bottom="auto",t.style.width="auto"},e.prototype.positionTocFloating=function(t){var e;if(e=this.floatToc[0],"floating"!==e._position)return e._position="floating",e.style.position="fixed",e.style.top=0,e.style.bottom="auto",e.style.width=t.width+"px"},e.prototype.stickyToc=function(t,e){var i,n;if(null!=this.floatToc[0])return"wiki-toc"!==e?this.positionTocDefault():(i=this.floatTocContainer[0].getBoundingClientRect(),n=this.floatToc[0].getBoundingClientRect(),n.height>window.innerHeight?this.positionTocDefault():i.bottom<n.height?this.positionTocBottom():this.positionTocFloating(i))},e}()}).call(window)},c6a4:function(t,e){(function(){var t,e,i;i=ReactDOMFactories.span,t=React.createElement,e=function(e){var n,o;return o=e.position,n=e.icon,i({key:o,className:"icon-stack__icon icon-stack__icon--"+o},t(Icon,{name:n,modifiers:["fw"]}))},this.IconExpand=function(n){var o,r,s,a;return o=null==(s=n.expand)||s,r=null!=(a=n.parentClass)?a:"",i({className:"icon-stack "+r},i({className:"icon-stack__base"},t(Icon,{name:"angle-down",modifiers:["fw"]})),o?[e({position:"top",icon:"angle-up"}),e({position:"bottom",icon:"angle-down"})]:[e({position:"top",icon:"angle-down"}),e({position:"bottom",icon:"angle-up"})])}}).call(window)},cGWP:function(t,e){(function(){var t;t=ReactDOMFactories.div,this.Mod=function(e){var i,n,o,r,s,a,u;for(a=null!=(u=e.modifiers)?u:[],s=e.mod,i="mod",n=0,o=a.length;n<o;n++)r=a[n],i+=" mod--"+r;return i+=" mod--"+s,t({className:i,title:osu.trans("beatmaps.mods."+s)})}}).call(window)},cpnD:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LineChart=function(){function e(e,i){var n,o,r,s;this.options=null!=i?i:{},this.resize=t(this.resize,this),this.lookupIndexFromX=t(this.lookupIndexFromX,this),this.resetTooltip=t(this.resetTooltip,this),this.positionTooltip=t(this.positionTooltip,this),this.hideTooltip=t(this.hideTooltip,this),this.showTooltip=t(this.showTooltip,this),this.drawLine=t(this.drawLine,this),this.drawAxes=t(this.drawAxes,this),this.setHoverAreaSize=t(this.setHoverAreaSize,this),this.setWrapperSize=t(this.setWrapperSize,this),this.setSvgSize=t(this.setSvgSize,this),this.setLineSize=t(this.setLineSize,this),this.setAxesSize=t(this.setAxesSize,this),this.setScalesRange=t(this.setScalesRange,this),this.setDimensions=t(this.setDimensions,this),this.createXAxisLine=t(this.createXAxisLine,this),this.loadData=t(this.loadData,this),this.margins={top:20,right:20,bottom:50,left:80},_.assign(this.margins,this.options.margins),this.id=Math.floor(1e3*Math.random()),(n=this.options).scales||(n.scales={}),(o=this.options.scales).x||(o.x=d3.scaleTime()),(r=this.options.scales).y||(r.y=d3.scaleLinear()),this.area=d3.select(e),this.svg=this.area.append("svg"),this.createXAxisLine(),this.svgWrapper=this.svg.append("g").classed("chart__wrapper",!0),this.svgXAxis=this.svgWrapper.append("g").classed("chart__axis chart__axis--x",!0),this.svgYAxis=this.svgWrapper.append("g").classed("chart__axis chart__axis--y",!0),this.svgLine=this.svgWrapper.append("path").classed("chart__line",!0),this.svgHoverArea=this.svgWrapper.append("rect").classed("chart__hover-area",!0).on("mouseout",this.hideTooltip).on("mousemove",this.positionTooltip).on("drag",this.positionTooltip),this.tooltip=this.area.append("div").classed("chart__tooltip",!0).attr("data-visibility","hidden"),this.tooltipContent=this.tooltip.append("div").classed("chart__tooltip-component chart__tooltip-component--content",!0),this.tooltip.append("div").classed("chart__tooltip-component chart__tooltip-component--arrow",!0),this.tooltip.append("div").classed("chart__tooltip-component chart__tooltip-component--circle",!0),this.tooltipY=this.tooltipContent.append("div").classed("chart__tooltip-text chart__tooltip-text--y",!0),this.tooltipX=this.tooltipContent.append("div").classed("chart__tooltip-text chart__tooltip-text--x",!0),this.xAxis=d3.axisBottom().tickSizeOuter(0).tickPadding(5),this.yAxis=d3.axisLeft().ticks(4),this.line=d3.line().curve(null!=(s=this.options.curve)?s:d3.curveMonotoneX)}return e.prototype.loadData=function(t){return this.data=t,this.svgLine.datum(t),this.resize()},e.prototype.createXAxisLine=function(){return this.xAxisLine=this.svg.append("defs").append("linearGradient").attr("id","x-axis-line-gradient-"+this.id).attr("gradientUnits","userSpaceOnUse").attr("x1","0").attr("x2","0").attr("y1","-100%").attr("y2","0"),this.xAxisLine.append("stop").classed("chart__tick-gradient chart__tick-gradient--start",!0).attr("offset","20%"),this.xAxisLine.append("stop").classed("chart__tick-gradient chart__tick-gradient--end",!0).attr("offset","100%")},e.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},e.prototype.setScalesRange=function(){var t,e;return this.options.scales.x.range([0,this.width]).domain((null!=(t=this.options.domains)?t.x:void 0)||d3.extent(this.data,function(t){return function(t){return t.x}}())),this.options.scales.y.range([this.height,0]).domain((null!=(e=this.options.domains)?e.y:void 0)||d3.extent(this.data,function(t){return function(t){return t.y}}()))},e.prototype.setAxesSize=function(){var t,e,i,n,o,r;return this.xAxis.scale(this.options.scales.x).tickSizeInner(-this.height).ticks(null!=(i=null!=(n=this.options.ticks)?n.x:void 0)?i:15).tickFormat(null!=(e=this.options.formats)?e.x:void 0).tickValues(null!=(t=this.options.tickValues)?t.x:void 0),this.yAxis.scale(this.options.scales.y).tickSizeInner(-this.width).tickFormat(null!=(r=this.options.formats)?r.y:void 0).tickValues(null!=(o=this.options.tickValues)?o.y:void 0)},e.prototype.setLineSize=function(){return this.line.x(function(t){return function(e){return t.options.scales.x(e.x)}}(this)).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this))},e.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},e.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},e.prototype.setHoverAreaSize=function(){return this.svgHoverArea.attr("width",this.width).attr("height",this.height)},e.prototype.drawAxes=function(){return this.svgXAxis.transition().attr("transform","translate(0, "+this.height+")").call(this.xAxis),this.svgYAxis.transition().call(this.yAxis),this.svgXAxis.selectAll(".tick line").classed("chart__tick-line",!0).attr("stroke","url(#x-axis-line-gradient-"+this.id+")"),this.svgYAxis.selectAll(".tick line").classed("chart__tick-line chart__tick-line--default",!0),this.svgXAxis.selectAll(".domain").classed("u-hidden",!0),this.svgYAxis.selectAll(".domain").classed("u-hidden",!0),this.svgXAxis.selectAll("text").style("text-anchor","start").attr("transform","rotate(45) translate(5, 0)").classed("chart__tick-text chart__tick-text--strong",!0),this.svgYAxis.selectAll("text").classed("chart__tick-text",!0)},e.prototype.drawLine=function(){return this.svgLine.transition().attr("d",this.line)},e.prototype.showTooltip=function(){return Fade.in(this.tooltip.node())},e.prototype.hideTooltip=function(){return Fade.out(this.tooltip.node())},e.prototype.positionTooltip=function(){var t,e,i,n,o,r,s;if(s=this.options.scales.x.invert(d3.mouse(this.svgHoverArea.node())[0]),n=this.lookupIndexFromX(s))return this.showTooltip(),Timeout.clear(this._autoHideTooltip),this._autoHideTooltip=Timeout.set(3e3,this.hideTooltip),i=s-this.data[n-1].x<=this.data[n].x-s?this.data[n-1]:this.data[n],t=["x","y"].map(function(t){return function(e){return t.options.scales[e](i[e])}}(this)),e=[t[0]+this.margins.left,t[1]+this.margins.top].map(function(t){return function(t){return Math.round(t)+"px"}}()),this.tooltipX.html(((null!=(o=this.options.tooltipFormats)?o.x:void 0)||this.options.formats.x)(i.x)),this.tooltipY.html(((null!=(r=this.options.tooltipFormats)?r.y:void 0)||this.options.formats.y)(i.y)),this.tooltip.style("transform","translate("+e.join(", ")+")")},e.prototype.resetTooltip=function(){return this.tooltip.style("transition","none"),this.hideTooltip(),this.tooltip.style("transform",null),Timeout.set(0,function(t){return function(){return t.tooltip.style("transition",null)}}(this))},e.prototype.lookupIndexFromX=function(t){return d3.bisector(function(t){return function(t){return t.x}}()).left(this.data,t)},e.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setHoverAreaSize(),this.setAxesSize(),this.setLineSize(),this.drawAxes(),this.drawLine(),this.resetTooltip()},e}()}).call(window)},dmLA:function(t,e,i){"use strict";t.exports=i("FoTz")},dzw6:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.FormError=function(){function i(){this.setOneError=t(this.setOneError,this),this.setError=t(this.setError,this),this.showError=t(this.showError,this),this.flattenData=t(this.flattenData,this),this.clearError=t(this.clearError,this),$(document).on("ajax:error",".js-form-error",this.showError),$(document).on("ajax:success",".js-form-error",this.clearError)}return i.prototype.clearError=function(t){return this.setError(t.target)},i.prototype.flattenData=function(t,i){var n,o,r,s,a,u,c,l;null==i&&(i=[]),n={};for(a in t)if(e.call(t,a))if(l=t[a],Array.isArray(l)){for(o="",r=s=0,u=i.length;s<u;r=++s)c=i[r],o+=0===r?c:"["+c+"]";o+=""===o?a:"["+a+"]",n[o]=l}else l instanceof Object&&_.merge(n,this.flattenData(l,i.concat(a)));return n},i.prototype.showError=function(t,e){var i,n;return i=null!=(n=e.responseJSON)?n.form_error:void 0,null==i?osu.ajaxError(e):this.setError(t.target,this.flattenData(i))},i.prototype.setError=function(t,e){return null==e&&(e={}),$(t).find("[name]").each(function(t){return function(i,n){return t.setOneError(n,e[n.name])}}(this))},i.prototype.setOneError=function(t,e){var i;return null==e&&(e=[]),i=e.length>0?"error":"",$(t).closest("label").attr("data-form-error-state",i).find(".js-form-error--error").text(e.join(" "))},i}()}).call(window)},ealH:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserCard=function(){function e(){this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover",".js-usercard",this.onMouseOver)}return e.prototype.triggerDelay=200,e.prototype.fadeLength=220,e.prototype.onMouseOver=function(t){var e,i,n,o,r,s,a;if(n=t.currentTarget,a=n.getAttribute("data-user-id")){if(null!=n._tooltip){if(e=$(n).qtip("api"),n._tooltip===a)return void(osu.isMobile()?(t.preventDefault(),e.disable(),n._disable_card=!0):n._disable_card&&(n._disable_card=!1,e.enable(),$(n).trigger("mouseover")));e.destroy()}if(!osu.isMobile())return n._tooltip=a,i=null!=(s=n.getAttribute("data-tooltip-position"))?s:"right center",o=function(){switch(i){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),r={style:{def:!1,tip:!1,width:280,height:130},content:{text:function(t){return function(e,i){return $.ajax({url:laroute.route("users.card",{user:a})}).done(function(e){return e?(i.set("content.text",e),i.tooltip.find(".usercard").imagesLoaded().progress(function(e,i){if(i.isLoaded)return $(i.img).fadeTo(t.fadeLength,1)}).always(function(t){return $(t.elements[0]).find(".js-usercard--avatar-loader").fadeTo(this.fadeLength,0)}),reactTurbolinks.boot()):i.hide()}).fail(function(t,e,n){return i.set("content.text",e+": "+n)}),$("#js-usercard__loading-template").children().clone()}}(this)},position:{at:i,my:o,viewport:$(window)},show:{delay:this.triggerDelay,ready:!0,effect:function(){return $(this).fadeTo(110,1)}},hide:{fixed:!0,delay:this.triggerDelay,effect:function(){return $(this).fadeTo(110,0)}}},$(n).qtip(r)}},e}()}).call(window)},fnRm:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditPlaystyle=function(){function e(){this.update=t(this.update,this),this.setState=t(this.setState,this),this.saved=t(this.saved,this),this.clearState=t(this.clearState,this),this.change=t(this.change,this),this.debouncedUpdate=_.debounce(this.update,500),$(document).on("change",".js-account-edit-playstyle",this.change)}return e.prototype.checkboxFields=document.getElementsByClassName("js-account-edit-playstyle"),e.prototype.change=function(t){var e;return e=t.currentTarget,e.dataset.playstyleUpdating="1",this.setState("saving"),this.debouncedUpdate()},e.prototype.clearState=function(){var t,e,i,n,o;for(n=this.checkboxFields,o=[],e=0,i=n.length;e<i;e++)t=n[e],o.push(t.setAttribute("data-account-edit-state",""));return o},e.prototype.saved=function(){return this.setState("saved"),this.setStateTimeout=Timeout.set(3e3,this.clearState)},e.prototype.setState=function(t){var e,i,n,o,r;for(Timeout.clear(this.setStateTimeout),o=this.checkboxFields,r=[],i=0,n=o.length;i<n;i++)e=o[i],r.push(e.setAttribute("data-account-edit-state","1"===e.dataset.playstyleUpdating?t:""));return r},e.prototype.update=function(){var t,e,i,n,o,r,s;for(t=[""],r=this.checkboxFields,n=0,o=r.length;n<o;n++)i=r[n],e=i.getElementsByTagName("input")[0],e.checked&&t.push(i.dataset.playstyle);return null!=(s=this.xhr)&&s.abort(),this.xhr=$.ajax(laroute.route("account.update"),{method:"PUT",data:{user:{osu_playstyle:t}}}).done(function(t){return function(){return t.saved()}}(this)).fail(function(t){return function(e,i){if("abort"!==i)return osu.ajaxError(e),t.clearState()}}(this)).always(function(t){return function(e,n){var o,r,s,a;if("abort"!==n){for(s=t.checkboxFields,a=[],o=0,r=s.length;o<r;o++)i=s[o],a.push(i.dataset.playstyleUpdating="0");return a}}}(this))},e}()}).call(window)},fx2O:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Scale=function(){function e(){this.resizeAll=t(this.resizeAll,this),this.resize=t(this.resize,this),this.readParentSize=t(this.readParentSize,this),this.els=document.getElementsByClassName("js-scale"),$(document).on("turbolinks:load",this.resizeAll),$(window).on("throttled-resize",this.resizeAll)}return e.prototype.readParentSize=function(t){return t.parentSize=t.parentElement.getBoundingClientRect()},e.prototype.resize=function(t){var e,i,n;switch(i=t.parentSize,t.dataset.scale){case"ws":i.width/i.height>16/9?(n=i.width,e=9/16*n):(e=i.height,n=16/9*e)}if(null!=e&&null!=n)return t.style.height=e+"px",t.style.width=n+"px"},e.prototype.resizeAll=function(){var t,e,i,n,o,r,s,a;for(r=this.els,e=0,n=r.length;e<n;e++)t=r[e],this.readParentSize(t);for(s=this.els,a=[],i=0,o=s.length;i<o;i++)t=s[i],a.push(this.resize(t));return a},e}()}).call(window)},fxgg:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicPostJump=function(){function e(e){this.forum=e,this.start=t(this.start,this),this.keyup=t(this.keyup,this),this.end=t(this.end,this),$(document).on("click",".js-forum-topic-post-jump--cover",this.start),$(document).on("blur",".js-forum-topic-post-jump--input",this.end),$(document).on("keyup",".js-forum-topic-post-jump--input",this.keyup),$.subscribe("forum:topic:jumpTo",this.end)}return e.prototype.end=function(){return $(".js-forum-topic-post-jump--container").removeClass("forum-topic-nav__item--focus"),$(".js-forum-topic-post-jump--cover").show(),$(".js-forum-topic-post-jump--counter").show(),$(".js-forum-topic-post-jump--input").hide()},e.prototype.keyup=function(t){var e,i,n;return 27===t.keyCode?void $(t.currentTarget).blur():(e=t.currentTarget,n=e.value,i=n.replace(/\D/g,""),n!==i?e.value=i:void 0)},e.prototype.start=function(){var t;return $(".js-forum-topic-post-jump--container").addClass("forum-topic-nav__item--focus"),$(".js-forum-topic-post-jump--cover").hide(),$(".js-forum-topic-post-jump--counter").hide(),t=$(".js-forum-topic-post-jump--input").val(this.forum.currentPostPosition).show().focus(),t[0].selectionStart=0,t[0].selectionEnd=t.val().length},e}()}).call(window)},"h4f/":function(t,e){(function(){$(document).on("keypress",".js-auto-submit",function(t){if(13===t.which)return t.preventDefault(),$(t.target).trigger("change")}),$(document).on("change",".js-auto-submit",function(t){var e;if(e=$(t.target),e.val()!==e.data("last-submitted-value"))return e.data("last-submitted-value",e.val()),e.parents("form").submit()}),$(document).on("keypress",".content-editable-submit",function(t){if(13===t.which)return t.preventDefault(),$(t.target).trigger("blur")}),$(document).on("blur",".content-editable-submit",function(t){var e,i,n;if(i=$(t.target),i.html()!==i.data("last-submitted-value"))return i.data("last-submitted-value",i.html()),e=i.parents("form"),n=$(document.createElement("input")),n.attr("type","hidden"),n.attr("name",i.attr("data-name")),n.attr("value",i.html()),e.append(n),e.submit(),n.remove()}),$(document).on("turbolinks:load",function(){return $(".content-editable-submit").each(function(t,e){var i;return i=$(e),i.data("last-submitted-value",i.html())})}),$(document).on("click","#popup-container, #overlay",function(t){var e;return $("#overlay").fadeOut(),e=$(t.target).closest(".popup-active"),e.fadeOut(null,e.remove)}),$(document).on("turbolinks:load",function(){return $("[value=_disabled]").attr("disabled",!0)}),$(document).on("click",".clickable-row",function(t){var e,i,n;if(n=t.target,!osu.isClickable(n))return i=t.currentTarget,i.classList.contains("clickable-row-link")?i.click():null!=(e=i.getElementsByClassName("clickable-row-link")[0])?e.click():void 0}),$(document).on("keydown",".js-quick-submit",function(t){if((t.ctrlKey||t.metaKey)&&13===t.keyCode)return t.preventDefault(),$(t.target).closest("form").submit()}),$(document).on("ajax:beforeSend",function(t){var e,i,n,o,r,s;if(i=t.target,i._submitting)return!1;for(i._submitting=!0,i._ujsSubmitDisabled=[],r=i.querySelectorAll(".js-ujs-submit-disable"),s=[],n=0,o=r.length;n<o;n++)e=r[n],e.disabled||(e.disabled=!0,s.push(i._ujsSubmitDisabled.push(e)));return s}),$(document).on("ajax:complete",function(t){var e,i,n;for(i=t.target,i._submitting=!1,n=[];e=i._ujsSubmitDisabled.pop();)n.push(e.disabled=!1);return n})}).call(window)},hZdu:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.ReactTurbolinks=function(){function i(e){this.components=null!=e?e:{},this.registerPersistent=t(this.registerPersistent,this),this.register=t(this.register,this),this.destroyPersisted=t(this.destroyPersisted,this),this.destroy=t(this.destroy,this),this.boot=t(this.boot,this),this.targets=[],$(document).on("turbolinks:load",this.destroyPersisted),$(document).on("turbolinks:load",this.boot),$(document).on("turbolinks:before-cache",this.destroy)}return i.prototype.boot=function(){var t,i,n,o,r;n=this.components,o=[];for(t in n)e.call(n,t)&&(i=n[t],o.push(function(){var t,e,n,o;for(n=i.targets,o=[],t=0,e=n.length;t<e;t++)r=n[t],"1"!==r.dataset.reactTurbolinksLoaded&&(r.dataset.reactTurbolinksLoaded="1",this.targets.push(r),o.push(ReactDOM.render(React.createElement(i.element,i.propsFunction(r)),r)));return o}.call(this)));return o},i.prototype.destroy=function(){var t,i,n,o,r;n=this.components,o=[];for(t in n)e.call(n,t)&&(i=n[t],o.push(function(){var t,e,n,o;for(n=i.targets,o=[],t=0,e=n.length;t<e;t++)r=n[t],"1"===r.dataset.reactTurbolinksLoaded&&(r.dataset.reactTurbolinksLoaded=null,i.persistent?o.push(void 0):o.push(ReactDOM.unmountComponentAtNode(r)));return o}()));return o},i.prototype.destroyPersisted=function(){var t,e;for(t=[];e=this.targets.pop();)t.push(ReactDOM.unmountComponentAtNode(e));return t},i.prototype.register=function(t,e,i){return null==i&&(i=function(){}),this.registerPersistent(t,e,!1,i)},i.prototype.registerPersistent=function(t,e,i,n){if(null==i&&(i=!0),null==n&&(n=function(){}),!this.components[t])return this.components[t]={loaded:!1,persistent:i,targets:document.getElementsByClassName("js-react--"+t),element:e,propsFunction:n},this.boot()},i}()}).call(window)},hrDL:function(t,e){(function(){this.Img2x=function(t){var e;return e=_.extend(osu.src2x(t.src),t),ReactDOMFactories.img(e,t.children)}}).call(window)},iJXY:function(t,e){(function(){this.BeatmapDiscussions={},this.Beatmaps={},this.BeatmapsetPage={},this.Contest={},this.Contest.Entry={},this.Contest.Voting={},this.MPHistory={},this.ProfilePage={},this.Ranking={},this.Status={}}).call(window)},ikv9:function(t,e){(function(){var t,e,i,n=function(t,e){return function(){return t.apply(e,arguments)}},o=function(t,e){function i(){this.constructor=t}for(var n in e)r.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},r={}.hasOwnProperty;e=ReactDOMFactories.div,t=ReactDOMFactories.a,ReactDOMFactories.i,i=React.createElement,this.TrackPreview=function(r){function s(t){this.previewStop=n(this.previewStop,this),this.previewPlay=n(this.previewPlay,this),s.__super__.constructor.call(this,t),this.state={playing:!1}}return o(s,r),s.prototype.componentDidMount=function(){return this.eventId="trackpreview-"+this.props.track.id,$.subscribe("osuAudio:initializing."+this.eventId,this.previewPlay),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop)},s.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.eventId)},s.prototype.render=function(){var n;return this.props.track.cover_url&&!this.props.track.album_id&&(n={backgroundImage:"url('"+this.props.track.cover_url+"')"}),e({className:"tracklist__cover",style:n},t({className:"tracklist__preview js-audio--play",href:"#","data-audio-url":this.props.track.preview},i(Icon,{name:this.state.playing?"pause":"play"})))},s.prototype.previewPlay=function(t,e){var i;return i=e.url,i!==this.props.track.preview?this.previewStop():this.setState({playing:!0})},s.prototype.previewStop=function(t){if(this.state.playing)return this.setState({playing:!1})},s}(React.Component)}).call(window)},ivxJ:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyChart=function(){function e(e,i){var n,o,r,s;this.options=null!=i?i:{},this.lookupIndexFromX=t(this.lookupIndexFromX,this),this.hoverRefresh=t(this.hoverRefresh,this),this.hoverEnd=t(this.hoverEnd,this),this.resize=t(this.resize,this),this.recalc=t(this.recalc,this),this.reveal=t(this.reveal,this),this.drawLine=t(this.drawLine,this),this.setWrapperSize=t(this.setWrapperSize,this),this.setSvgSize=t(this.setSvgSize,this),this.setLineSize=t(this.setLineSize,this),this.setScalesRange=t(this.setScalesRange,this),this.setHoverAreaSize=t(this.setHoverAreaSize,this),this.setDimensions=t(this.setDimensions,this),this.loadData=t(this.loadData,this),this.hide=t(this.hide,this),null==(n=this.options).scales&&(n.scales={}),null==(o=this.options.scales).x&&(o.x=d3.scaleLinear()),null==(r=this.options.scales).y&&(r.y=d3.scaleLinear()),this.margins={top:25,right:20,bottom:10,left:0},this.area=d3.select(e),this.svg=this.area.append("svg").classed("fancy-graph",!0),this.svgWrapper=this.svg.append("g"),this.svgLine=this.svgWrapper.append("path").classed("fancy-graph__line",!0).attr("opacity",0),this.line=d3.line().curve(d3.curveMonotoneX),this.svgEndCircle=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("r",2).attr("opacity",0),this.svgHoverArea=this.svg.append("rect").classed("fancy-graph__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.hoverRefresh).on("drag",this.hoverRefresh),this.svgHoverMark=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("data-visibility","hidden").attr("r",2),s=osu.parseJson(e.dataset.src),this.loadData(s)}return e.prototype.hide=function(){return this.svgEndCircle.attr("opacity",0),this.svgLine.attr("opacity",0)},e.prototype.loadData=function(t){if(!_.isEqual(t,this.data))return this.data=null!=t?t:[],this.svgLine.datum(this.data),this.reveal()},e.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},e.prototype.setHoverAreaSize=function(){return this.svgHoverArea.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},e.prototype.setScalesRange=function(){var t,e,i,n;return this.options.scales.x.range([0,this.width]).domain(null!=(t=null!=(e=this.options.domains)?e.x:void 0)?t:d3.extent(this.data,function(t){return function(t){return t.x}}())),this.options.scales.y.range([this.height,0]).domain(null!=(i=null!=(n=this.options.domains)?n.y:void 0)?i:d3.extent(this.data,function(t){return function(t){return t.y}}()))},e.prototype.setLineSize=function(){var t;if(this.line.x(function(t){return function(e){return t.options.scales.x(e.x)}}(this)).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this)),null!=(t=_.last(this.data)))return this.svgEndCircle.attr("transform","translate("+this.options.scales.x(t.x)+", "+this.options.scales.y(t.y)+")")},e.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},e.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},e.prototype.drawLine=function(){return this.svgLine.attr("stroke-dasharray",0).attr("d",this.line)},e.prototype.reveal=function(){var t;return null==this.data[0]?this.hide():(this.recalc(),this.svgLine.attr("d",this.line),t=this.svgLine.node().getTotalLength(),this.svgEndCircle.attr("opacity",0),this.svgLine.attr("stroke-dasharray",t).attr("stroke-dashoffset",t).transition().delay(400).duration(1e3).ease(d3.easeSinOut).attr("stroke-dashoffset",0).attr("opacity",1),this.svgEndCircle.transition().delay(1300).duration(300).ease(d3.easeSinOut).attr("opacity",1))},e.prototype.recalc=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setLineSize(),this.setHoverAreaSize()},e.prototype.resize=function(){return this.recalc(),this.drawLine()},e.prototype.hoverEnd=function(){return Fade.out(this.svgHoverMark.node()),$.publish("fancy-chart:hover-"+this.options.hoverId+":end")},e.prototype.hoverRefresh=function(){var t,e,i,n;if(null!=this.options.hoverId&&null!=this.data[0]&&(n=this.options.scales.x.invert(d3.mouse(this.svgHoverArea.node())[0]-this.margins.left),null!=(i=this.lookupIndexFromX(n))))return Fade.in(this.svgHoverMark.node()),Timeout.clear(this._hoverTimeout),this._hoverTimeout=Timeout.set(3e3,this.hoverEnd),e=0===i?this.data[0]:i>=this.data.length?_.last(this.data):n-this.data[i-1].x<=this.data[i].x-n?this.data[i-1]:this.data[i],t=["x","y"].map(function(t){return function(i){return t.options.scales[i](e[i])}}(this)),this.svgHoverMark.attr("transform","translate("+t.join(", ")+")"),$.publish("fancy-chart:hover-"+this.options.hoverId+":refresh",{data:e})},e.prototype.lookupIndexFromX=function(t){return d3.bisector(function(t){return t.x}).left(this.data,t)},e}()}).call(window)},jdrx:function(t,e){(function(){this.ThrottledWindowEvents=function(){function t(){this.throttle("resize"),this.throttle("scroll")}return t.prototype.throttle=function(t){var e,i;return i=!1,e=function(){if(!i)return i=!0,requestAnimationFrame(function(){return window.dispatchEvent(new CustomEvent("throttled-"+t)),i=!1})},window.addEventListener(t,e)},t}()}).call(window)},jgJW:function(t,e){(function(){$(document).on("ajax:before",function(){return LoadingOverlay.show(),$(document).one("ajax:complete.ujsHideLoadingOverlay",LoadingOverlay.hide)}),$(document).on("ajax:success",function(t,e){var i,n;return n=function(){if(!_.isEmpty(null!=e?e.message:void 0))return osu.popup(e.message,"success")},"1"===t.target.getAttribute("data-reload-on-success")?(i="1"===t.target.getAttribute("data-reload-reset-scroll"),$(document).one("turbolinks:load",n),osu.reloadPage(!i)):n()}),$(document).on("ajax:error",function(t,e){if("1"!==t.target.dataset.skipAjaxErrorPopup&&401!==e.status)return osu.ajaxError(e)})}).call(window)},jj9p:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StatusChart=function(){function e(e,i){this.set=t(this.set,this);var n,o,r,s;this.ratio=2*Math.PI,s=$(e).width(),n=$(e).height(),r=Math.min(s,n)/2,o=r/4.7*4,this.defaultArc=d3.svg.arc().innerRadius(o).outerRadius(r).startAngle(0),this.svg=d3.select(e).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(s,n)+" "+Math.min(s,n)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+Math.min(s,n)/2+", "+Math.min(s,n)/2+")"),this.text=this.svg.append("text").text(i).attr("dy",-8).classed("status-chart__text",!0),this.percentage=this.svg.append("text").attr("dy",20).classed("status-chart__text status-chart__text--percentage",!0),this.background=this.svg.append("path").datum({endAngle:this.ratio}).classed("status-chart__background",!0).attr("d",this.defaultArc),this.upArc=this.svg.append("path").datum({endAngle:0}).classed("status-chart__up-arc",!0).attr("d",this.defaultArc),this.downArc=this.svg.append("path").datum({endAngle:0}).classed("status-chart__down-arc",!0).attr("d",this.defaultArc)}return e.prototype.parse=function(t){return this.ratio*t/100},e.prototype.set=function(t){var e;return e=function(t){return function(e,i){return e.attrTween("d",function(e){var n;return n=d3.interpolate(e.endAngle,i),function(i){return e.endAngle=n(i),t.percentage.text(Math.round(e.endAngle/t.ratio*100)+"%"),t.defaultArc(e)}})}}(this),this.downArc.transition().duration(750).call(e,-this.parse(t.down)),this.upArc.transition().duration(750).call(e,this.parse(t.up))},e}()}).call(window)},kMKt:function(t,e,i){var n,o,r;!function(i,s){o=[e,t],n=s,void 0!==(r="function"==typeof n?n.apply(e,o):n)&&(t.exports=r)}(0,function(t,e){"use strict";function i(t){function e(e){var i=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=i,t.style.overflowY=e}function i(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}function n(){var e=t.style.height,n=i(t),o=document.documentElement&&document.documentElement.scrollTop;t.style.height="";var r=t.scrollHeight+a;if(0===t.scrollHeight)return void(t.style.height=e);t.style.height=r+"px",u=t.clientWidth,n.forEach(function(t){t.node.scrollTop=t.scrollTop}),o&&(document.documentElement.scrollTop=o)}function o(){n();var i=Math.round(parseFloat(t.style.height)),o=window.getComputedStyle(t,null),r="content-box"===o.boxSizing?Math.round(parseFloat(o.height)):t.offsetHeight;if(r!==i?"hidden"===o.overflowY&&(e("scroll"),n(),r="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==o.overflowY&&(e("hidden"),n(),r="content-box"===o.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),c!==r){c=r;var a=s("autosize:resized");try{t.dispatchEvent(a)}catch(t){}}}if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!r.has(t)){var a=null,u=t.clientWidth,c=null,l=function(){t.clientWidth!==u&&o()},h=function(e){window.removeEventListener("resize",l,!1),t.removeEventListener("input",o,!1),t.removeEventListener("keyup",o,!1),t.removeEventListener("autosize:destroy",h,!1),t.removeEventListener("autosize:update",o,!1),Object.keys(e).forEach(function(i){t.style[i]=e[i]}),r.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",h,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",o,!1),window.addEventListener("resize",l,!1),t.addEventListener("input",o,!1),t.addEventListener("autosize:update",o,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",r.set(t,{destroy:h,update:o}),function(){var e=window.getComputedStyle(t,null);"vertical"===e.resize?t.style.resize="none":"both"===e.resize&&(t.style.resize="horizontal"),a="content-box"===e.boxSizing?-(parseFloat(e.paddingTop)+parseFloat(e.paddingBottom)):parseFloat(e.borderTopWidth)+parseFloat(e.borderBottomWidth),isNaN(a)&&(a=0),o()}()}}function n(t){var e=r.get(t);e&&e.destroy()}function o(t){var e=r.get(t);e&&e.update()}var r="function"==typeof Map?new Map:function(){var t=[],e=[];return{has:function(e){return t.indexOf(e)>-1},get:function(i){return e[t.indexOf(i)]},set:function(i,n){-1===t.indexOf(i)&&(t.push(i),e.push(n))},delete:function(i){var n=t.indexOf(i);n>-1&&(t.splice(n,1),e.splice(n,1))}}}(),s=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){s=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}var a=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?(a=function(t){return t},a.destroy=function(t){return t},a.update=function(t){return t}):(a=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return i(t)}),t},a.destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],n),t},a.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],o),t}),e.exports=a})},l4qv:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Forum=function(){function e(){this.jumpToSubmit=t(this.jumpToSubmit,this),this.showMore=t(this.showMore,this),this.stickHeader=t(this.stickHeader,this),this.postUrlClick=t(this.postUrlClick,this),this.initialScrollTo=t(this.initialScrollTo,this),this.scrollTo=t(this.scrollTo,this),this.keyboardNavigation=t(this.keyboardNavigation,this),this.jumpTo=t(this.jumpTo,this),this.refreshCounter=t(this.refreshCounter,this),this.refreshLoadMoreLinks=t(this.refreshLoadMoreLinks,this),this.lastPostLoaded=t(this.lastPostLoaded,this),this.firstPostLoaded=t(this.firstPostLoaded,this),this.endPost=t(this.endPost,this),this.setCounter=t(this.setCounter,this),this.setTotalPosts=t(this.setTotalPosts,this),this.totalPosts=t(this.totalPosts,this),this.postPosition=t(this.postPosition,this),this.boot=t(this.boot,this),this._totalPostsDiv=document.getElementsByClassName("js-forum__total-count"),this._deletedPostsDiv=document.getElementsByClassName("js-forum__deleted-count"),this._firstPostDiv=document.getElementsByClassName("js-forum__topic-first-post-id"),this._postsCounter=document.getElementsByClassName("js-forum__posts-counter"),this._postsProgress=document.getElementsByClassName("js-forum__posts-progress"),this._stickyHeaderTopic=document.getElementsByClassName("js-forum-topic-headernav"),this.posts=document.getElementsByClassName("js-forum-post"),this.loadMoreLinks=document.getElementsByClassName("js-forum-posts-show-more"),this.maxPosts=250,$(document).on("turbolinks:load osu:page:change",this.boot),$(window).on("throttled-scroll",this.refreshCounter),$(document).on("click",".js-forum-posts-show-more",this.showMore),$(document).on("click",".js-post-url",this.postUrlClick),$(document).on("submit",".js-forum-posts-jump-to",this.jumpToSubmit),$(document).on("keyup",this.keyboardNavigation),$.subscribe("stickyHeader",this.stickHeader)}return e.prototype.boot=function(){return this.refreshCounter(),this.refreshLoadMoreLinks(),this.initialScrollTo()},e.prototype.postPosition=function(t){return parseInt(t.getAttribute("data-post-position"),10)},e.prototype.firstPostId=function(){return parseInt(this._firstPostDiv[0].getAttribute("data-first-post-id"),10)},e.prototype.postId=function(t){return parseInt(t.getAttribute("data-post-id"),10)},e.prototype.totalPosts=function(){return 0===this._totalPostsDiv.length?null:parseInt(this._totalPostsDiv[0].textContent,10)},e.prototype.setTotalPosts=function(t){return $(this._totalPostsDiv).text(t)},e.prototype.deletedPosts=function(){return 0===this._deletedPostsDiv.length?null:parseInt(this._deletedPostsDiv[0].textContent,10)},e.prototype.setDeletedPosts=function(t){return $(this._deletedPostsDiv).text(t)},e.prototype.setCounter=function(t){return this.currentPostPosition=this.postPosition(t),this.currentPostPosition>this.totalPosts()&&this.setTotalPosts(this.currentPostPosition),window.reloadUrl=this.postUrlN(this.currentPostPosition),this._postsCounter[0].textContent=this.currentPostPosition,this._postsProgress[0].style.width=100*this.currentPostPosition/this.totalPosts()+"%"},e.prototype.endPost=function(){return this.posts[this.posts.length-1]},e.prototype.firstPostLoaded=function(){return this.postId(this.posts[0])===this.firstPostId()},e.prototype.lastPostLoaded=function(){return this.postPosition(this.endPost())===this.totalPosts()},e.prototype.refreshLoadMoreLinks=function(){var t,e;if(this.loadMoreLinks.length)return t=this.firstPostLoaded(),$(".js-header--main").toggleClass("hidden",!t),$(".js-header--alt").toggleClass("hidden",t),e=this.lastPostLoaded(),$(".js-forum__posts-show-more--next").closest("div").toggleClass("hidden",e),currentUser.is_admin||currentUser.is_gmt||currentUser.is_qat||$(".js-post-delete-toggle").hide(),e?$(this.endPost()).find(".js-post-delete-toggle").css({display:""}):void 0},e.prototype.refreshCounter=function(){var t,e,i,n,o,r;if(0!==this._postsCounter.length){if(e=null,t=.5*window.innerHeight,osu.bottomPage())e=this.posts[this.posts.length-1];else for(r=this.posts,i=0,n=r.length;i<n&&(o=r[i],o.getBoundingClientRect().top<=t);i++)e=o;return null==e&&(e=this.posts[0]),this.setCounter(e)}},e.prototype.jumpTo=function(t){var e;return t=parseInt(t,10),!!isFinite(t)&&(t=Math.max(t,1),t=Math.min(t,this.totalPosts()),e=$(".js-forum-post[data-post-position='"+t+"']"),this._postsCounter[0].textContent=t,e.length?this.scrollTo(e.attr("data-post-id")):Turbolinks.visit(this.postUrlN(t)),!0)},e.prototype.keyboardNavigation=function(t){var e;if(!osu.isInputElement(t.target)&&this._postsCounter.length){t.preventDefault(),e=function(){switch(t.which){case 37:return this.currentPostPosition-1;case 39:return this.currentPostPosition+1}}.call(this);try{return this.jumpTo(e)}catch(t){}}},e.prototype.scrollTo=function(t){var e,i,n,o,r;if(i=document.querySelector(".js-forum-post[data-post-id='"+t+"']"))return 1===this.postPosition(i)?o=0:(n=i.getBoundingClientRect(),r=window.innerHeight,o=window.pageYOffset+n.top,e=(r-n.height)/2,e=Math.max(e,60)),window.scrollTo(0,o-e)},e.prototype.initialScrollTo=function(){if(""===location.hash&&null!=window.postJumpTo&&0!==window.postJumpTo)return this.scrollTo(window.postJumpTo),window.postJumpTo=0},e.prototype.postUrlClick=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".js-forum-post").attr("data-post-id"),this.scrollTo(e)},e.prototype.postUrlN=function(t){return document.location.pathname+"?n="+t},e.prototype.stickHeader=function(t,e){if(this._stickyHeaderTopic.length)return"forum-topic-headernav"===e?Fade.in(this._stickyHeaderTopic[0]):Fade.out(this._stickyHeaderTopic[0])},e.prototype.showMore=function(t){var e,i,n,o,r;return t.preventDefault(),e=$(t.target),i=e.closest("div"),o=e.data("mode"),r={start:null,end:null,skip_layout:1},"previous"===o?(n=$(".js-forum-post").first(),r.end=n.data("post-id")-1):(n=$(".js-forum-post").last(),r.start=n.data("post-id")+1),i.addClass("loading"),$.get(window.canonicalUrl,r).done(function(t){return function(r){var s,a,u,c,l,h,p,d,f,m,g,v,y;if(d=n[0],f=d.getBoundingClientRect().top,"previous"===o?(i.after(r),v=t.maxPosts,g=t.posts.length):(i.before(r),v=0,g=t.posts.length-t.maxPosts),v<g)for(l=t.posts[0].parentNode,p=_.slice(t.posts,v,g),u=0,c=p.length;u<c;u++)h=p[u],l.removeChild(h);return t.refreshLoadMoreLinks(),y=window.pageXOffset,a=d.getBoundingClientRect().top,s=window.pageYOffset,m=s+a-f,window.scrollTo(y,m),osu.pageChange(),e.attr("data-failed","0")}}(this)).always(function(){return i.removeClass("loading")}).fail(function(){return e.attr("data-failed","1")})},e.prototype.jumpToSubmit=function(t){if(t.preventDefault(),LoadingOverlay.hide(),this.jumpTo($(t.target).find('[name="n"]').val()))return $.publish("forum:topic:jumpTo")},e}()}).call(window)},lTvF:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FormToggle=function(){function e(){this.sync=t(this.sync,this),this.onChange=t(this.onChange,this),addEventListener("turbolinks:load",this.sync),$(document).on("change",".js-form-toggle--input",this.onChange)}return e.prototype.onChange=function(t){return this.toggle(t.currentTarget)},e.prototype.sync=function(){var t,e,i,n,o;for(i=document.getElementsByClassName("js-form-toggle--input"),o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(this.toggle(e));return o},e.prototype.toggle=function(t){var e,i,n,o;return n=t.dataset.formToggleId,o=t.checked,e=$(".js-form-toggle--form[data-form-toggle-id='"+n+"']"),i=o?"Down":"Up",e.stop()["slide"+i]()},e}()}).call(window)},leVn:function(t,e){(function(){var t;t=["admin","api/v2","beatmaps","beatmapsets","community","help","home","legal","oauth","rankings","session","store","users"].join("|"),this.TurbolinksDisable=function(){function e(){addEventListener("turbolinks:click",this.cancelIfExternal)}return e.prototype.cancelIfExternal=function(e){var i;if(i=document.location.protocol+"//"+document.location.host+"/",!RegExp("^(?:"+t+")(?:$|/)").test(e.data.url.substr(i.length)))return e.preventDefault()},e}()}).call(window)},lpOU:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ClickMenu=function(){function e(){this.toggle=t(this.toggle,this),this.show=t(this.show,this),this.saveCurrent=t(this.saveCurrent,this),this.restoreSaved=t(this.restoreSaved,this),this.hide=t(this.hide,this),$(document).on("click",".js-click-menu",this.toggle),$(document).on("click",this.hide),addEventListener("turbolinks:load",this.restoreSaved),addEventListener("turbolinks:before-cache",this.saveCurrent)}return e.prototype.hide=function(t){if(0===t.button&&!(osu.popupShowing()||null==this.current||$(t.target).closest(".js-click-menu").length>0))return this.show()},e.prototype.restoreSaved=function(){return this.show(document.body.dataset.clickMenuCurrent)},e.prototype.saveCurrent=function(){return document.body.dataset.clickMenuCurrent=this.current},e.prototype.show=function(t){var e,i,n,o,r,s,a,u;for(this.current=null,a=document.querySelectorAll(".js-click-menu[data-click-menu-id]"),e=0,n=a.length;e<n;e++)s=a[e],s.dataset.clickMenuId===t?(this.current=t,Fade.in(s)):Fade.out(s);for(u=document.querySelectorAll(".js-click-menu[data-click-menu-target]"),i=0,o=u.length;i<o;i++)r=u[i],null!=this.current&&r.dataset.clickMenuTarget===this.current?r.classList.add("js-click-menu--active"):r.classList.remove("js-click-menu--active");return $.publish("click-menu:current",this.current)},e.prototype.toggle=function(t){var e,i,n;if(e=t.currentTarget,null==this.current||e.dataset.clickMenuId!==this.current)return n=e.dataset.clickMenuTarget,this.current!==n&&(i=n),this.show(i)},e}()}).call(window)},ltes:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.OsuAudio=function(){function e(){this.urlSet=t(this.urlSet,this),this.urlGet=t(this.urlGet,this),this.stop=t(this.stop,this),this.publish=t(this.publish,this),this.playing=t(this.playing,this),this.player=t(this.player,this),this.play=t(this.play,this),this._player=document.getElementsByClassName("js-audio"),$(document).on("click",".js-audio--play",this.play),$(document).on("turbolinks:load",function(t){return function(){return t.player().addEventListener("playing",t.playing),t.player().addEventListener("ended",t.stop),t.player().volume=.45}}(this))}return e.prototype.play=function(t){var e;return t.preventDefault(),(e=t.currentTarget.dataset.audioUrl)===this.urlGet()?this.stop():(this.urlSet(e),this.publish("initializing"),this.player().play())},e.prototype.player=function(){return this._player[0]},e.prototype.playing=function(){return this.publish("playing")},e.prototype.publish=function(t){return $.publish("osuAudio:"+t,{url:this.urlGet(),player:this.player()})},e.prototype.stop=function(){return this.player().pause(),this.player().currentTime=0,this.urlSet(""),this.publish("ended")},e.prototype.urlGet=function(){return this.player().getAttribute("src")},e.prototype.urlSet=function(t){return this.player().setAttribute("src",t)},e}()}).call(window)},lx4r:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),o=this&&this.__assign||Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++){e=arguments[i];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r=this&&this.__rest||function(t,e){var i={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(i[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&(i[n[o]]=t[n[o]]);return i};e.__esModule=!0;var s=i("dmLA"),a=i("X9bF"),u=i("kMKt"),c=i("oFVy"),l=c,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={lineHeight:null},e.dispatchEvent=function(t){var i=document.createEvent("Event");i.initEvent(t,!0,!1),e.textarea.dispatchEvent(i)},e.updateLineHeight=function(){e.setState({lineHeight:l(e.textarea)})},e.onChange=function(t){var i=e.props.onChange;e.currentValue=t.currentTarget.value,i&&i(t)},e.saveDOMNodeRef=function(t){var i=e.props.innerRef;i&&i(t),e.textarea=t},e.getLocals=function(){var t=e,i=t.props,n=(i.onResize,i.maxRows),s=(i.onChange,i.style),a=(i.innerRef,r(i,["onResize","maxRows","onChange","style","innerRef"])),u=t.state.lineHeight,c=t.saveDOMNodeRef,l=n&&u?u*n:null;return o({},a,{saveDOMNodeRef:c,style:l?o({},s,{maxHeight:l}):s,onChange:e.onChange})},e}return n(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,i=e.onResize;"number"==typeof e.maxRows&&this.updateLineHeight(),setTimeout(function(){return u(t.textarea)}),i&&this.textarea.addEventListener("autosize:resized",i)},e.prototype.componentWillUnmount=function(){var t=this.props.onResize;t&&this.textarea.removeEventListener("autosize:resized",t),this.dispatchEvent("autosize:destroy")},e.prototype.render=function(){var t=this.getLocals(),e=t.children,i=t.saveDOMNodeRef,n=r(t,["children","saveDOMNodeRef"]);return s.createElement("textarea",o({},n,{ref:i}),e)},e.prototype.componentDidUpdate=function(){this.props.value!==this.currentValue&&this.dispatchEvent("autosize:update")},e.defaultProps={rows:1},e.propTypes={rows:a.number,maxRows:a.number,onResize:a.func,innerRef:a.func},e}(s.Component);e.default=h},mr8q:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.SyncHeight=function(){function e(){this.sync=t(this.sync,this),this.onResize=t(this.onResize,this),this.observe=t(this.observe,this),this.targets=document.getElementsByClassName("js-sync-height--target"),this.references=document.getElementsByClassName("js-sync-height--reference"),$(document).on("turbolinks:load osu:page:change",this.sync),$(window).on("throttled-resize",this.sync),this.observe()}return e.prototype.observe=function(){var t;return t={attributes:!0,subtree:!0},this.observer=new MutationObserver(this.onResize),this.observer.observe(document,t)},e.prototype.onResize=function(t){var e,i,n;for(e=0,i=t.length;e<i;e++)if(n=t[e],"TEXTAREA"===n.target.tagName)return this.sync()},e.prototype.sync=function(){var t,e,i,n,o,r,s,a,u,c,l,h;for(e={},a=this.references,i=0,r=a.length;i<r;i++)c=a[i],n=c.getAttribute("data-sync-height-target"),e[n]=c.offsetHeight;for(u=this.targets,l=[],o=0,s=u.length;o<s;o++)h=u[o],t=e[h.getAttribute("data-sync-height-id")],null!=t?l.push(h.style.minHeight=t+"px"):l.push(void 0);return l},e}()}).call(window)},nd2h:function(t,e){(function(){var t;t=function(t){var e;return e=parseInt(t,10),_.isFinite(e)?e:null},this.BeatmapsetFilter=function(){function e(){}return e.castFromString={mode:t,status:t,genre:t,language:t},e.charToKey={c:"general",m:"mode",s:"status",g:"genre",l:"language",e:"extra",r:"rank",q:"query",sort:"sort"},e.defaults={general:"",extra:"",genre:null,language:null,mode:null,query:"",rank:"",status:0},e.expand=["genre","language","extra","rank"],e.fillDefaults=function(t){var i,n,o,r,s,a;for(a={},r=e.keys,i=0,o=r.length;i<o;i++)n=r[i],a[n]=null!=(s=t[n])?s:e.getDefault(t,n);return a},e.getDefault=function(t,i){var n,o;return e.defaults.hasOwnProperty(i)?e.defaults[i]:"sort"===i?(null!=(n=t.query)?n.trim().length:void 0)>0?"relevance_desc":4===(o=t.status)||5===o||6===o?"updated_desc":"ranked_desc":void 0},e.getDefaults=function(t){var i,n,o,r,s;for(s={},r=e.keys,i=0,o=r.length;i<o;i++)n=r[i],s[n]=e.getDefault(t,n);return s},e.keys=["general","extra","genre","language","mode","query","rank","sort","status"],e}()}).call(window)},o8Cn:function(t,e){(function(){this.Fade=function(){function t(){}return t.isVisible=function(t){return"hidden"!==t.getAttribute("data-visibility")},t.out=function(t){return t.setAttribute("data-visibility","hidden")},t.in=function(t){return t.setAttribute("data-visibility","")},t.toggle=function(e,i){return null==i&&(i=!t.isVisible(e)),i?t.in(e):t.out(e)},t}()}).call(window)},oFVy:function(t,e,i){function n(t){var e=o(t,"line-height"),i=parseFloat(e,10);if(e===i+""){var n=t.style.lineHeight;t.style.lineHeight=e+"em",e=o(t,"line-height"),i=parseFloat(e,10),n?t.style.lineHeight=n:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(i*=4,i/=3):-1!==e.indexOf("mm")?(i*=96,i/=25.4):-1!==e.indexOf("cm")?(i*=96,i/=2.54):-1!==e.indexOf("in")?i*=96:-1!==e.indexOf("pc")&&(i*=16),i=Math.round(i),"normal"===e){var r=t.nodeName,s=document.createElement(r);s.innerHTML="&nbsp;","TEXTAREA"===r.toUpperCase()&&s.setAttribute("rows","1");var a=o(t,"font-size");s.style.fontSize=a,s.style.padding="0px",s.style.border="0px";var u=document.body;u.appendChild(s);i=s.offsetHeight,u.removeChild(s)}return i}var o=i("O34q");t.exports=n},oJXL:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Nav2=function(){function e(){this.setLoginBoxElements=t(this.setLoginBoxElements,this),this.stickLogin=t(this.stickLogin,this),this.loginBoxVisible=t(this.loginBoxVisible,this),this.autoCenterPopup=t(this.autoCenterPopup,this),addEventListener("turbolinks:load",this.setLoginBoxElements),$.subscribe("click-menu:current",this.autoCenterPopup),$(window).on("throttled-resize, throttled-scroll",this.stickLogin)}return e.prototype.autoCenterPopup=function(t,e){var i,n,o,r,s,a,u,c;for(this.currentMenu=e,$(window).off("throttled-resize.nav2-center-popup"),u=document.querySelectorAll(".js-nav2--centered-popup"),o=0,r=u.length;o<r;o++)a=u[o],a.dataset.clickMenuId===this.currentMenu&&(i=a,s=document.querySelector(".js-click-menu[data-click-menu-target='"+this.currentMenu+"']"));if(null!=i)return n=function(t){return function(){return t.centerPopup(i,s)}}(this),$(window).on("throttled-resize.nav2-center-popup",n),this.loginBoxVisible()&&osu.pageChangeImmediate(),n(),null!=(c=i.querySelector(".js-nav2--autofocus"))?c.focus():void 0},e.prototype.centerPopup=function(t,e){var i,n,o,r,s,a,u,c,l,h,p,d;return c=t.getBoundingClientRect(),o=t.parentElement.getBoundingClientRect(),d=e.getBoundingClientRect(),i=document.body.getBoundingClientRect().width-5,p=d.width/2,r=c.width/2,s=o.left,a=d.left+p-s-r,u=s+a,u<0?n=-1*Math.floor(d.left):(h=u+c.width,l=Math.round(h-i),n=l>0?a-l:a),t.style.transform="translateX("+n+"px)"},e.prototype.loginBoxVisible=function(){return"nav2-login-box"===this.currentMenu},e.prototype.stickLogin=function(t,e){if(this.loginBoxVisible())return this.loginBox.style.position=this.loginPopupReference.getBoundingClientRect().top<0?"fixed":""},e.prototype.setLoginBoxElements=function(){return this.loginPopupReference=document.querySelector(".js-nav2--login-box-reference"),this.loginBox=document.querySelector(".js-nav2--login-box")},e}()}).call(window)},of2Y:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumAutoClick=function(){function e(){this.previousClick=t(this.previousClick,this),this.onScroll=t(this.onScroll,this),this.nextClick=t(this.nextClick,this),this._triggerDistance=1200,this.nextLink=document.getElementsByClassName("js-forum__posts-show-more--next"),this.previousLink=document.getElementsByClassName("js-forum__posts-show-more--previous"),$(window).on("throttled-scroll",_.throttle(this.onScroll,1e3)),$(document).on("turbolinks:load osu:page:change",function(t){return function(){return Timeout.set(1e3,t.onScroll)}}(this))}return e.prototype.commonClick=function(t){if(0!==t.getBoundingClientRect().height&&"1"!==t.getAttribute("data-failed"))return t.click()},e.prototype.nextClick=function(){if(0!==this.nextLink.length&&!(this.nextLink[0].getBoundingClientRect().top>document.documentElement.clientHeight+this._triggerDistance))return this.commonClick(this.nextLink[0])},e.prototype.onScroll=function(){return this.previousClick(),this.nextClick()},e.prototype.previousClick=function(){if(0!==this.previousLink.length&&!(this.previousLink[0].getBoundingClientRect().top<-this._triggerDistance))return this.commonClick(this.previousLink[0])},e}()}).call(window)},ojUv:function(t,e){(function(){$.ajaxPrefilter(function(t){if(t.crossDomain)return t.contents.script=!1})}).call(window)},os5n:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CheckboxValidation=function(){function e(){this.validate=t(this.validate,this),$(document).on("change",".js-checkbox-validation",this.validate)}return e.prototype.validate=function(t){var e,i,n,o,r,s,a,u,c;if(null==(e=t.currentTarget)._checkboxValidationCache&&(e._checkboxValidationCache=JSON.parse(t.currentTarget.dataset.checkboxValidation)),u=t.target.name,null!=(r=t.currentTarget._checkboxValidationCache[u])){for(n=t.currentTarget.querySelectorAll("[name='"+u+"']"),c=t.currentTarget.getElementsByClassName("js-checkbox-validation--submit")[0],o=0,s=0,a=n.length;s<a;s++)i=n[s],i.checked&&(o+=1);return c.disabled=o<r.min||o>r.max}},e}()}).call(window)},"p+1f":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksUjs=function(){function e(){this.record=t(this.record,this),this.abort=t(this.abort,this),this.xhr=[],$(document).on("ajax:beforeSend",this.record),$(document).on("turbolinks:before-cache",this.abort)}return e.prototype.abort=function(){var t,e;for(t=[];e=this.xhr.pop();)t.push(void 0!==e&&null!==e?e.abort():void 0);return t},e.prototype.record=function(t,e){return this.xhr.push(e)},e}()}).call(window)},p4La:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumPostsSeek=function(){function e(e){this.forum=e,this.setPostPosition=t(this.setPostPosition,this),this.reset=t(this.reset,this),this.jump=t(this.jump,this),this.click=t(this.click,this),this.move=t(this.move,this),this.hideTooltip=t(this.hideTooltip,this),this.tooltip=document.getElementsByClassName("js-forum-posts-seek--tooltip"),this.tooltipNumber=document.getElementsByClassName("js-forum-posts-seek-tooltip-number"),this.seekbar=document.getElementsByClassName("js-forum__posts-seek"),$(document).on("mousemove",".js-forum__posts-seek",this.move),$(document).on("mouseleave",".js-forum__posts-seek",this.hideTooltip),$(document).on("click",".js-forum__posts-seek",this.click),$(document).on("click",".js-forum-posts-seek--jump",this.jump),addEventListener("turbolinks:before-cache",this.reset)}return e.prototype.hideTooltip=function(){if(0!==this.tooltip.length)return Fade.out(this.tooltip[0])},e.prototype.move=function(t){return t.preventDefault(),t.stopPropagation(),this.setPostPosition(t.clientX),Fade.in(this.tooltip[0]),Timeout.clear(this._autohide),this._autohide=Timeout.set(1e3,this.hideTooltip)},e.prototype.click=function(){return this.forum.jumpTo(this.postPosition)},e.prototype.jump=function(t){var e,i,n,o,r,s,a,u;return t.preventDefault(),i=this.forum.currentPostPosition,u=this.forum.totalPosts(),e=$(t.currentTarget),o=e.attr("data-jump-target"),a=function(){switch(o){case"first":return 1;case"last":return u;case"previous":return n=i-10,s=this.forum.postPosition(this.forum.posts[0]),Math.max(n,s);case"next":return n=i+10,r=this.forum.postPosition(this.forum.endPost()),Math.min(n,r)}}.call(this),e.blur(),this.forum.jumpTo(a)},e.prototype.reset=function(){return Timeout.clear(this._autohide),this.hideTooltip()},e.prototype.setPostPosition=function(t){var e,i,n,o;return e=this.seekbar[0].offsetWidth,i=t/e,o=this.forum.totalPosts(),n=Math.ceil(i*this.forum.totalPosts()),n=Math.min(n,o),this.postPosition=Math.max(n,1),this.tooltip[0].style.transform="translateX("+t+"px)",this.tooltipNumber[0].textContent=this.postPosition},e}()}).call(window)},phOA:function(t,e){(function(){Turbolinks.BrowserAdapter.prototype.showProgressBarAfterDelay=function(){return this.progressBarTimeout=Timeout.set(0,this.showProgressBar)},$(document).on("click",'a[href^="#"]',function(t){var e,i,n;if(e=t.currentTarget.href,n=decodeURIComponent(e.slice(e.indexOf("#")+1)),null!=(i=document.getElementById(n)))return t.preventDefault(),i.scrollIntoView()}),Turbolinks.HttpRequest.prototype.requestLoaded=function(){return this.endRequest(function(t){return function(){var e,i;return 200<=(e=t.xhr.status)&&e<300||403===(i=t.xhr.status)||404===i||500===i?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}}(this))},Turbolinks.Controller.prototype.advanceHistory=function(t){if(t!==document.location.href)return this.cacheSnapshot(),this.lastRenderedLocation=Turbolinks.Location.wrap(t),this.pushHistoryWithLocationAndRestorationIdentifier(t,Turbolinks.uuid())},Turbolinks.Snapshot.prototype.hasAnchor=function(){return!0}}).call(window)},qfi9:function(t,e){(function(){var t,e;e=ReactDOMFactories.div,t="avatar",this.UserAvatar=function(i){var n,o;return o=i.modifiers.map(function(e){return function(e){return t+"--"+e}}()).join(" "),n=t+" "+o,e(null!=i.user.id?{className:n,style:{backgroundImage:"url('"+i.user.avatar_url+"')"}}:{className:n+" "+t+"--guest"})}}).call(window)},qiDr:function(t,e){(function(){this.Url=function(){function t(){}return t.beatmapDownloadDirect=function(t){return"osu://dl/"+t},t.openBeatmapEditor=function(t){return"osu://edit/"+t},t}()}).call(window)},qxfu:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.StackedBarChart=function(){function i(e,i){var n,o,r,s,a,u,c,l;for(this.options=null!=i?i:{},this.resize=t(this.resize,this),this.margins={top:0,right:0,bottom:0,left:0},null==(n=this.options).scales&&(n.scales={}),null==(o=this.options.scales).x&&(o.x=d3.scaleLinear()),null==(r=this.options.scales).y&&(r.y=d3.scaleLinear()),s="stacked-bar-chart",l=this.options.modifiers,a=0,u=l.length;a<u;a++)c=l[a],s+=" stacked-bar-chart--"+c;this.area=d3.select(e),this.svg=this.area.append("svg").attr("class",s),this.svgWrapper=this.svg.append("g")}return i.prototype.loadData=function(t){var i,n,o,r,s,a;this.data=[];for(o in t)if(e.call(t,o)){r=t[o];for(s in r)e.call(r,s)&&(a=r[s],null==(i=this.data)[s]&&(i[s]=[]),n=_.last(this.data[s]),this.data[s].push({type:o,value:a,height:null!=n?n.value+n.height:0}))}return this.max=d3.max(_.map(this.data,function(t){return _.sumBy(t,"value")})),this.resize()},i.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},i.prototype.setScalesRange=function(){return this.options.scales.x.range([0,this.width]).domain([0,this.data.length]),this.options.scales.y.range([0,this.height]).domain([0,this.max])},i.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},i.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},i.prototype.drawBars=function(){var t,e;return e=this.svgWrapper.selectAll("g").data(this.data),e.enter().append("g"),e.attr("transform",function(t){return function(e,i){return"translate("+t.options.scales.x(i)+", 0)"}}(this)),t=e.selectAll(".stacked-bar-chart__bar").data(function(t){return function(t){return t}}()),t.enter().append("rect").attr("class",function(t){return function(t){return"stacked-bar-chart__bar stacked-bar-chart__bar--"+t.type}}()),t.transition().attr("y",function(t){return function(e){return t.height-t.options.scales.y(e.value+e.height)}}(this)).attr("height",function(t){return function(e){return t.options.scales.y(e.value)}}(this)).attr("width",this.options.scales.x(1)),t.exit().remove(),e.exit().remove()},i.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.drawBars()},i}()}).call(window)},r7L2:function(t,e){function i(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function r(t){if(h===clearTimeout)return clearTimeout(t);if((h===n||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){m&&d&&(m=!1,d.length?f=d.concat(f):g=-1,f.length&&a())}function a(){if(!m){var t=o(s);m=!0;for(var e=f.length;e;){for(d=f,f=[];++g<e;)d&&d[g].run();g=-1,e=f.length}d=null,m=!1,r(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,p=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{h="function"==typeof clearTimeout?clearTimeout:n}catch(t){h=n}}();var d,f=[],m=!1,g=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];f.push(new u(t,e)),1!==f.length||m||o(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(t){return[]},p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},"rlm/":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CurrentUserObserver=function(){function e(){this.setData=t(this.setData,this),this.setCovers=t(this.setCovers,this),this.setAvatars=t(this.setAvatars,this),this.reinit=t(this.reinit,this),this.covers=document.getElementsByClassName("js-current-user-cover"),this.avatars=document.getElementsByClassName("js-current-user-avatar"),$.subscribe("user:update",this.setData),$(document).on("turbolinks:load",this.reinit),$.subscribe("osu:page:change",this.reinit)}return e.prototype.reinit=function(){return this.setAvatars(),this.setCovers()},e.prototype.setAvatars=function(t){var e,i,n,o,r;for(null==t&&(t=this.avatars),e=null!=currentUser.id?"url('"+currentUser.avatar_url+"')":"",r=[],n=0,o=t.length;n<o;n++)i=t[n],r.push(i.style.backgroundImage=e);return r},e.prototype.setCovers=function(t){var e,i,n,o,r;for(null==t&&(t=this.covers),e=null!=currentUser.id?"url('"+currentUser.cover_url+"')":"",r=[],n=0,o=t.length;n<o;n++)i=t[n],r.push(i.style.backgroundImage=e);return r},e.prototype.setData=function(t,e){return window.currentUser=e,this.reinit()},e}()}).call(window)},t8zY:function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},tIJY:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicTitle=function(){function e(){this.syncPadding=t(this.syncPadding,this),this.save=t(this.save,this),this.onInput=t(this.onInput,this),this.editHide=t(this.editHide,this),this.editShow=t(this.editShow,this),this.current=t(this.current,this),this.cancel=t(this.cancel,this),this.abort=t(this.abort,this),this.buttons=document.getElementsByClassName("js-forum-topic-title--buttons"),this.editor=document.getElementsByClassName("js-forum-topic-title--editor"),this.input=document.getElementsByClassName("js-forum-topic-title--input"),this.main=document.getElementsByClassName("js-forum-topic-title--main"),this.padding=document.getElementsByClassName("js-forum-topic-title--padding"),this.saveButton=document.getElementsByClassName("js-forum-topic-title--save"),this.title=document.getElementsByClassName("js-forum-topic-title--title"),addEventListener("turbolinks:before-cache",this.abort),$(document).on("click",".js-forum-topic-title--edit-start",this.editShow),$(document).on("click",".js-forum-topic-title--save",this.save),$(document).on("keyup",".js-forum-topic-title--input",this.onInput),$(document).on("click",".js-forum-topic-title--cancel",this.cancel),$(document).on("input",".js-forum-topic-title--input",this.syncPadding)}return e.prototype.abort=function(){var t;return null!=(t=this.xhr)?t.abort():void 0},e.prototype.cancel=function(){return this.abort(),this.editHide(),this.input[0].value=this.current()},e.prototype.current=function(){return this.title[0].textContent.trim()},e.prototype.editShow=function(){return this.editor[0].classList.remove("hidden"),this.main[0].classList.add("hidden"),this.input[0].style.paddingRight=this.buttons[0].getBoundingClientRect().width+"px",this.input[0].value=this.current(),this.syncPadding(),this.input[0].selectionStart=this.input[0].value.length,this.input[0].focus()},e.prototype.editHide=function(){return this.editor[0].classList.add("hidden"),this.main[0].classList.remove("hidden")},e.prototype.onInput=function(t){switch(t.keyCode){case 13:return this.save();case 27:return this.cancel()}},e.prototype.save=function(){var t,e,i;return t=this.input[0],(e=t.value)===this.current()?this.cancel():(t.disabled=!0,this.saveButton[0].disabled=!0,this.abort(),this.xhr=$.ajax(t.dataset.url,{method:"PUT",data:(i={},i[""+t.name]=e,i)}).done(function(t){return function(){return osu.reloadPage()}}()).fail(function(e){return function(i){return t.disabled=!1,e.saveButton[0].disabled=!1,osu.emitAjaxError()(i)}}(this)))},e.prototype.syncPadding=function(){return this.padding[0].textContent=this.input[0].value},e}()}).call(window)},tKQ2:function(t,e){(function(){var t,e,i,n;t=ReactDOMFactories.a,e=ReactDOMFactories.button,n=ReactDOMFactories.span,i=React.createElement,this.BigButton=function(o){var r,s,a,u,c,l,h,p,d,f,m,g,v,y,b;for(d=null!=(m=o.modifiers)?m:[],b=o.text,a=o.icon,f=null!=(g=o.props)?g:{},r=null!=(v=o.extraClasses)?v:[],f.className="btn-osu-big",s=0,l=d.length;s<l;s++)p=d[s],f.className+=" btn-osu-big--"+p;for(u=0,h=r.length;u<h;u++)c=r[u],f.className+=" "+c;return(null!=f.href?t:e)(f,n({className:"btn-osu-big__content "+(null==b||null==a?"btn-osu-big__content--center":"")},null!=b?n({className:"btn-osu-big__left"},n({className:"btn-osu-big__text-top"},null!=(y=b.top)?y:b),null!=b.bottom?n({className:"btn-osu-big__text-bottom"},b.bottom):void 0):void 0,null!=a?n({className:"btn-osu-big__icon"},i(Icon,{name:a,modifiers:["fw"]})):void 0))}}).call(window)},tWlk:function(t,e){(function(){var t,e,i,n,o=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function i(){this.constructor=t}for(var n in e)s.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},s={}.hasOwnProperty;e=ReactDOMFactories.div,t=ReactDOMFactories.a,ReactDOMFactories.i,n=ReactDOMFactories.span,i=React.createElement,this.BeatmapsetPanel=function(a){function u(t){this.previewStop=o(this.previewStop,this),this.previewStart=o(this.previewStart,this),this.previewInitializing=o(this.previewInitializing,this),this.render=o(this.render,this),this.componentWillUnmount=o(this.componentWillUnmount,this),this.componentDidMount=o(this.componentDidMount,this),u.__super__.constructor.call(this,t),this.eventId="beatmapsetPanel-"+t.beatmap.beatmapset_id+"-"+osu.uuid(),this.state={preview:"ended",previewDuration:0}}return r(u,a),u.prototype.componentDidMount=function(){return $.subscribe("osuAudio:initializing."+this.eventId,this.previewInitializing),$.subscribe("osuAudio:playing."+this.eventId,this.previewStart),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop),$(document).on("turbolinks:before-cache."+this.eventId,this.componentWillUnmount)},u.prototype.componentWillUnmount=function(){return this.previewStop(),$.unsubscribe("."+this.eventId),$(document).off("."+this.eventId)},u.prototype.render=function(){var o,r,a,u,c,l,h,p,d,f,m,g;return a=this.props.beatmap,g=_.includes(["wip","pending","graveyard"],a.status),g&&(c=a.hype.current.toLocaleString(),f=a.hype.required.toLocaleString(),l=a.nominations.current.toLocaleString(),m=a.nominations.required.toLocaleString()),p=10,u=a.beatmaps.length>p,h=function(){var t,c;t=BeatmapHelper.group(a.beatmaps),c=[];for(d in t)s.call(t,d)&&(r=t[d],u?c.push([i(BeatmapIcon,{key:d+"-icon",beatmap:_.last(r),showTitle:!1}),n({className:"beatmapset-panel__difficulty-count",key:d+"-count"},r.length)]):c.push(function(){var t,n,s;for(s=[],t=0,n=r.length;t<n;t++)o=r[t],s.push(e({className:"beatmapset-panel__difficulty-icon",key:o.id},i(BeatmapIcon,{beatmap:o})));return s}()));return c}(),e({className:"beatmapset-panel"+("ended"!==this.state.preview?" beatmapset-panel--previewing":"")},e({className:"beatmapset-panel__panel"},e({className:"beatmapset-panel__header"},t({href:laroute.route("beatmapsets.show",{beatmapset:a.id}),className:"beatmapset-panel__thumb",style:{backgroundImage:"url("+a.covers.card+")"}},e({className:"beatmapset-panel__status-container"},a.video||a.storyboard?e({className:"beatmapset-panel__video-icon"},i(Icon,{name:"film",modifiers:["fw"]})):void 0,e({className:"beatmapset-panel__status"},a.status)),e({className:"beatmapset-panel__title-artist-box"},e({className:"u-ellipsis-overflow beatmapset-panel__header-text beatmapset-panel__header-text--title"},a.title),e({className:"beatmapset-panel__header-text"},a.artist)),e({className:"beatmapset-panel__counts-box"},g?e(null,e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.hype.required_text",{current:c,required:f})},n({className:"beatmapset-panel__count-number"},c),i(Icon,{name:"bullhorn",modifiers:["fw"]})),e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.nominations.required_text",{current:l,required:m})},n({className:"beatmapset-panel__count-number"},l),i(Icon,{name:"thumbs-up",modifiers:["fw"]}))):e({className:"beatmapset-panel__count"},n({className:"beatmapset-panel__count-number"},a.play_count.toLocaleString()),i(Icon,{name:"play-circle",modifiers:["fw"]})),e({className:"beatmapset-panel__count"},n({className:"beatmapset-panel__count-number"},a.favourite_count.toLocaleString()),i(Icon,{name:"heart",modifiers:["fw"]}))),e({className:"beatmapset-panel__preview-bar",style:{transitionDuration:this.state.previewDuration+"s",width:""+("playing"===this.state.preview?"100%":0)}}))),e({className:"beatmapset-panel__content"},e({className:"beatmapset-panel__row"},e({className:"beatmapset-panel__mapper-source-box"},e({className:"u-ellipsis-overflow",dangerouslySetInnerHTML:{__html:osu.trans("beatmaps.listing.mapped-by",{mapper:laroute.link_to_route("users.show",a.creator,{user:a.user_id},{class:"js-usercard","data-user-id":a.user_id})})}}),e({className:"u-ellipsis-overflow"},a.source)),e({className:"beatmapset-panel__icons-box"},("undefined"!=typeof currentUser&&null!==currentUser?currentUser.id:void 0)?t({href:laroute.route("beatmapsets.download",{beatmapset:a.id}),className:"beatmapset-panel__icon js-beatmapset-download-link","data-turbolinks":"false"},i(Icon,{name:"download"})):void 0)),e({className:"beatmapset-panel__difficulties"},h))),t({href:"#",className:"beatmapset-panel__play js-audio--play","data-audio-url":a.preview_url},i(Icon,{name:"ended"===this.state.preview?"play":"stop"})),e({className:"beatmapset-panel__shadow"}))},u.prototype.previewInitializing=function(t,e){var i;return i=e.url,e.player,i!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"initializing",previewDuration:0})},u.prototype.previewStart=function(t,e){var i,n;return n=e.url,i=e.player,n!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"playing",previewDuration:i.duration})},u.prototype.previewStop=function(){if("ended"!==this.state.preview)return this.setState({preview:"ended",previewDuration:0})},u}(React.PureComponent)}).call(window)},uiwb:function(t,e){(function(){this.BeatmapsetPageHash=function(){function t(){}return t.parse=function(t){var e,i,n;return n=t.slice(1).split("/"),i=n[0],e=n[1],{playmode:""!==i?i:void 0,beatmapId:null!=e?parseInt(e,10):void 0}},t.generate=function(t){var e,i;return e=t.beatmap,i=t.mode,null!=e?"#"+e.mode+"/"+e.id:"#"+i},t}()}).call(window)},urN3:function(t,e){(function(){this.FormClear=function(){function t(){$(document).on("ajax:success",".js-form-clear",this.clear)}return t.prototype.clear=function(t){return t.currentTarget.reset()},t}()}).call(window)},vOOM:function(t,e){(function(){var t,e,i,n,o,r=function(t,e){return function(){return t.apply(e,arguments)}},s=function(t,e){function i(){this.constructor=t}for(var n in e)a.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},a={}.hasOwnProperty;n=ReactDOMFactories.div,ReactDOMFactories.span,t=ReactDOMFactories.a,o=ReactDOMFactories.time,React.createElement,e="beatmapset-mapping",i="LL",this.BeatmapsetMapping=function(a){function u(){return this.renderDate=r(this.renderDate,this),this.render=r(this.render,this),u.__super__.constructor.apply(this,arguments)}return s(u,a),u.prototype.render=function(){var i,o,r;return o=null!=(i=this.props.user)?i:this.props.beatmapset.user,r=laroute.route("users.show",{user:o.id}),n({className:e},t({href:r,className:"avatar avatar--beatmapset",style:{backgroundImage:"url("+o.avatar_url+")"}}),n({className:e+"__content"},n({className:e+"__mapper"},osu.trans("beatmapsets.show.details.made-by"),t({className:e+"__user js-usercard","data-user-id":o.id,href:r},o.username)),this.renderDate("submitted","submitted_date"),this.props.beatmapset.ranked>0?this.renderDate(this.props.beatmapset.status,"ranked_date"):this.renderDate("updated","last_updated")))},u.prototype.renderDate=function(t,r){return n(null,osu.trans("beatmapsets.show.details."+t),o({className:e+"__date js-tooltip-time",dateTime:this.props.beatmapset[r],title:this.props.beatmapset[r]},moment(this.props.beatmapset[r]).format(i)))},u}(React.PureComponent)}).call(window)},vlpJ:function(t,e){(function(){this.Polyfills=function(){function t(){this.customEvent(),this.localStorage(),this.mathTrunc()}return t.prototype.customEvent=function(){var t;if("function"!=typeof CustomEvent)return t=function(t,e){var i;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),i=document.createEvent("CustomEvent"),i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i},t.prototype=window.Event.prototype,window.CustomEvent=t},t.prototype.localStorage=function(){var t;try{return window.localStorage.setItem("_test","1"),window.localStorage.removeItem("_test")}catch(e){return t=new DumbStorage,window.localStorage=t,window.localStorage.__proto__=t}},t.prototype.mathTrunc=function(){return null!=Math.trunc?Math.trunc:Math.trunc=function(t){return t-t%1}},t}()}).call(window)},wiuS:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapsetDownloadObserver=function(){function e(){this.showPopup=t(this.showPopup,this),this.createPopup=t(this.createPopup,this),this.loadAndShowPopup=t(this.loadAndShowPopup,this),this.quotaCheck=t(this.quotaCheck,this),$(document).on("click mouseup",".js-beatmapset-download-link",this.quotaCheck)}return e.prototype.targetSelector=".support-osu-popup",e.prototype.container="#popup-container",e.prototype.wrapperClass="empty-popup",e.prototype.quotaCheck=function(t){if(!("undefined"!=typeof currentUser&&null!==currentUser&&currentUser.is_supporter||"mouseup"===t.type&&2!==t.which))return $.ajax(laroute.route("download-quota-check")).done(function(t){return function(e){var i;if(20===(i=e.quota_used)||i>0&&i%50==0)return t.loadAndShowPopup}}(this))},e.prototype.loadAndShowPopup=function(){return 0===$(this.targetSelector).length?$.get(laroute.route("support-osu-popup"),function(t){return function(e){return t.createPopup(e),t.showPopup()}}(this)):this.showPopup()},e.prototype.createPopup=function(t){var e;if(void 0!==t)return e=$("."+this.wrapperClass+"--clone").clone(),e.removeClass(this.wrapperClass+"--clone"),e.find(".popup-content").html(t),e.find(".support-osu-popup__close-button").on("click",function(t){return t.preventDefault(),e.fadeOut(),Blackout.hide()}),e.appendTo($(this.container))},e.prototype.showPopup=function(){var t;return"function"==typeof(t=document.activeElement).blur&&t.blur(),Blackout.show(),$(this.targetSelector).parents("."+this.wrapperClass).fadeIn()},e}()}).call(window)},wrTv:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipBeatmap=function(){function e(){this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover",".js-beatmap-tooltip",this.onMouseOver)}return e.prototype.tmpl=_.template('<div class="tooltip-beatmap__text tooltip-beatmap__text--title"><%- beatmapTitle %></div><div class="tooltip-beatmap__text tooltip-beatmap__text--<%- difficulty %>"><%- stars %> <i class="fa fa-star" aria-hidden="true"></i></div>'),e.prototype.onMouseOver=function(t){var e,i,n,o,r,s;if(n=t.currentTarget,null!=n.dataset.beatmapTitle)return i=this.tmpl(n.dataset),n._tooltip?void $(n).qtip("set",{"content.text":i}):(e=null!=(s=n.dataset.tooltipPosition)?s:"top center",o=function(){switch(e){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),r={overwrite:!1,content:i,position:{my:o,at:e,viewport:$(window)},show:{event:t.type,ready:!0},hide:{inactive:3e3},style:{classes:"qtip tooltip-beatmap",tip:{width:10,height:9}}},$(n).qtip(r,t),n._tooltip=!0)},e}()}).call(window)},wsm8:function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t="beatmap-discussions-chart",this.BeatmapDiscussionsChart=function(){function i(i,n){var o;this.length=n,this.resize=e(this.resize,this),this.positionPoints=e(this.positionPoints,this),this.drawXAxis=e(this.drawXAxis,this),this.drawAreas=e(this.drawAreas,this),this.setWrapperSize=e(this.setWrapperSize,this),this.setSvgSize=e(this.setSvgSize,this),this.setAxisSize=e(this.setAxisSize,this),this.setScales=e(this.setScales,this),this.setDimensions=e(this.setDimensions,this),this.loadData=e(this.loadData,this),this.id=Math.floor(1e3*Math.random()),this.dimensions={chartHeight:120,totalHeight:150,xAxisHeight:2,barTop:0,targetAreaWidth:10},this.dimensions.labelHeight=this.dimensions.totalHeight-this.dimensions.chartHeight,this.dimensions.labelTop=this.dimensions.totalHeight-this.dimensions.labelHeight,this.dimensions.iconTop=this.dimensions.labelTop+this.dimensions.labelHeight/2,this.dimensions.barHeight=this.dimensions.chartHeight-this.dimensions.barTop,this.dimensions.xAxisTop=this.dimensions.chartHeight-this.dimensions.xAxisHeight,this.dimensions.targetAreaHeight=this.dimensions.barHeight+this.dimensions.labelHeight,this.margins={top:0,right:40,bottom:0,left:40},this.scaleX=d3.scaleLinear().domain([0,this.length]).nice(),this.area=d3.select(i).append("div").classed(t,!0),this.svg=this.area.append("svg"),o=this.svg.append("defs").append("linearGradient").attr("id","bar-gradient-"+this.id).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2","100%"),o.append("stop").classed(t+"__bar-gradient "+t+"__bar-gradient--start",!0).attr("offset","30%"),o.append("stop").classed(t+"__bar-gradient",!0).attr("offset","80%"),this.svgWrapper=this.svg.append("g").classed(t+"__wrapper",!0),this.svgChartArea=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",0).attr("height",this.dimensions.chartHeight).classed(t+"__chart-area",!0),this.svgLabelArea=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",this.dimensions.labelTop).attr("height",this.dimensions.labelHeight).classed(t+"__label-area",!0),this.svgXAxis=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",this.dimensions.xAxisTop).attr("height",this.dimensions.xAxisHeight).classed(t+"__axis "+t+"__axis--x",!0),this.svgPointsContainer=this.svgWrapper.append("g"),this.xAxis=d3.axisBottom().ticks(0).tickSizeOuter(0)}return i.prototype.loadData=function(e){var i;return this.data=_.orderBy(e,"timestamp"),this.svgPoints=this.svgPointsContainer.selectAll("."+t+"__point").data(this.data,function(t){return function(t){return t.id}}()),i=this.svgPoints.enter().append("a").classed(t+"__point",!0),i.append("line").classed(t+"__bar",!0).attr("x1",0).attr("x2",0).attr("y1",this.dimensions.barTop).attr("y2",this.dimensions.barTop+this.dimensions.barHeight).attr("stroke","url(#bar-gradient-"+this.id+")"),i.append("rect").classed(t+"__target-area",!0).attr("x",-this.dimensions.targetAreaWidth/2).attr("width",this.dimensions.targetAreaWidth).attr("y",this.dimensions.barTop).attr("height",this.dimensions.targetAreaHeight),i.append("text").classed(t+"__icon",!0).style("text-anchor","middle").attr("y",this.dimensions.iconTop),this.svgPoints.exit().remove(),this.svgPoints=i.merge(this.svgPoints),this.svgPoints.attr("xlink:href",function(t){return function(t){return BeatmapDiscussionHelper.url({discussion:t})}}()).attr("class",function(e){var i;return i=e.resolved?"resolved":_.kebabCase(e.message_type),"js-beatmap-discussion--jump "+t+"__point "+t+"__point--"+i}).attr("title",function(t){return BeatmapDiscussionHelper.formatTimestamp(t.timestamp)}).attr("data-tooltip-position","bottom center").attr("data-tooltip-modifiers","extra-padding"),this.svgPoints.select("."+t+"__icon > tspan").remove(),this.svgPoints.select("."+t+"__icon").append("tspan").classed("fa",!0).html(function(t){return function(t){var e;return e=t.resolved?"resolved":_.camelCase(t.message_type),BeatmapDiscussionHelper.messageType.iconText[e]}}()),this.resize()},i.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},i.prototype.setScales=function(){return this.scaleX.range([0,this.width])},i.prototype.setAxisSize=function(){return this.xAxis.scale(this.scaleX)},i.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},i.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},i.prototype.drawAreas=function(){var t;return t=this.width+(this.margins.left+this.margins.right),this.svgChartArea.attr("width",t),this.svgLabelArea.attr("width",t)},i.prototype.drawXAxis=function(){return this.svgXAxis.attr("width",this.width+(this.margins.left+this.margins.right))},i.prototype.positionPoints=function(){return this.svgPoints.attr("transform",function(t){return function(e){return"translate("+Math.round(t.scaleX(e.timestamp))+", 0)"}}(this))},i.prototype.resize=function(){return this.setDimensions(),this.setScales(),this.setSvgSize(),this.setWrapperSize(),this.setAxisSize(),this.drawXAxis(),this.drawAreas(),this.positionPoints()},i}()}).call(window)},xPMn:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicReply=function(){function e(e,i){this.forum=e,this.stickyFooter=i,this.toggle=t(this.toggle,this),this.stickOrUnstick=t(this.stickOrUnstick,this),this.unstick=t(this.unstick,this),this.stick=t(this.stick,this),this.posted=t(this.posted,this),this.inputChange=t(this.inputChange,this),this.deactivate=t(this.deactivate,this),this.activateWithReply=t(this.activateWithReply,this),this.activate=t(this.activate,this),this.setState=t(this.setState,this),this.getState=t(this.getState,this),this.deleteState=t(this.deleteState,this),this.available=t(this.available,this),this.initialize=t(this.initialize,this),this.container=document.getElementsByClassName("js-forum-topic-reply--container"),this.box=document.getElementsByClassName("js-forum-topic-reply"),this.block=document.getElementsByClassName("js-forum-topic-reply--block"),this.input=document.getElementsByClassName("js-forum-topic-reply--input"),this.stickButtons=document.getElementsByClassName("js-forum-topic-reply--stick"),this.fixedBar=document.getElementsByClassName("js-sticky-footer--fixed-bar"),$(document).on("ajax:success",".js-forum-topic-reply",this.posted),$(document).on("click",".js-forum-topic-reply--stick",this.toggle),$(document).on("ajax:success",".js-forum-topic-reply--quote",this.activateWithReply),$(document).on("focus",".js-forum-topic-reply--input",this.activate),$(document).on("input change",".js-forum-topic-reply--input",_.debounce(this.inputChange,500)),$.subscribe("stickyFooter",this.stickOrUnstick),$(document).on("turbolinks:load",this.initialize)}return e.prototype.marker=function(){return document.querySelector('.js-sticky-footer[data-sticky-footer-target="forum-topic-reply"]')},e.prototype.$input=function(){return $(".js-forum-topic-reply--input")},e.prototype.initialize=function(){if(this.available())return this.deleteState("sticking"),this.input[0].value=this.getState("text")||"","1"===this.getState("active")?this.activate():void 0},e.prototype.available=function(){return this.block.length},e.prototype.deleteState=function(t){return localStorage.removeItem("forum-topic-reply--"+document.location.pathname+"--"+t)},e.prototype.getState=function(t){return localStorage.getItem("forum-topic-reply--"+document.location.pathname+"--"+t)},e.prototype.setState=function(t,e){return localStorage.setItem("forum-topic-reply--"+document.location.pathname+"--"+t,e)},e.prototype.activate=function(t){var e,i,n,o;for(t&&t.preventDefault(),this.setState("active","1"),o=this.stickButtons,i=0,n=o.length;i<n;i++)e=o[i],e.classList.add("js-activated");return this.stickyFooter.markerEnable(this.marker()),$.publish("stickyFooter:check")},e.prototype.activateWithReply=function(t,e){var i,n;return e+="\n",i=this.$input(),n=i.val(),n&&(e=n+"\n\n"+e),i.val(e),this.inputChange(),i[0].selectionStart=e.length,this.activate(t)},e.prototype.deactivate=function(t){var e,i,n,o;for(t&&t.preventDefault(),this.stickyFooter.markerDisable(this.marker()),this.setState("active","0"),o=this.stickButtons,i=0,n=o.length;i<n;i++)e=o[i],e.classList.remove("js-activated");return $.publish("stickyFooter:check")},e.prototype.inputChange=function(){return this.setState("text",this.input[0].value)},e.prototype.posted=function(t,e){var i,n;return this.deactivate(),this.$input().val(""),this.setState("text",""),i=$(e),n=this.forum.postPosition(i[0])-1!==this.forum.postPosition(this.forum.endPost())||"1"===t.target.dataset.forceReload,n?osu.navigate(i.find(".js-post-url").attr("href")):(this.forum.setTotalPosts(this.forum.totalPosts()+1),this.forum.endPost().insertAdjacentHTML("afterend",e),osu.pageChange(),this.forum.endPost().scrollIntoView())},e.prototype.stick=function(){var t,e;if("1"!==this.getState("sticking"))return this.setState("sticking","1"),t=this.$input(),e=t.is(":focus"),this.fixedBar[0].insertBefore(this.box[0],this.fixedBar[0].firstChild),e?t.focus():void 0},e.prototype.unstick=function(t){if("1"===this.getState("sticking"))return this.deleteState("sticking"),this.container[0].insertBefore(this.box[0],this.container[0].firstChild)},e.prototype.stickOrUnstick=function(t,e){return"forum-topic-reply"===e?this.stick():this.unstick()},e.prototype.toggle=function(){return"1"===this.getState("active")?this.deactivate():(this.activate(),this.$input().focus())},e}()}).call(window)},xTqC:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyHeader=function(){function e(){this.stickOrUnstick=t(this.stickOrUnstick,this),this.stickMarker=document.getElementsByClassName("js-sticky-header"),$(window).on("throttled-scroll throttled-resize",this.stickOrUnstick),$(document).on("turbolinks:load osu:page:change",this.stickOrUnstick)}return e.prototype.stickOrUnstick=function(){var t,e,i;if(0!==this.stickMarker.length){for(i=this.stickMarker,t=i.length-1;t>=0;t+=-1)if(e=i[t],e.getBoundingClientRect().top<0)return void $.publish("stickyHeader",e.getAttribute("data-sticky-header-target"));return $.publish("stickyHeader")}},e}()}).call(window)},yheg:function(t,e,i){"use strict";function n(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(t){n[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,u=n(t),c=1;c<arguments.length;c++){i=Object(arguments[c]);for(var l in i)r.call(i,l)&&(u[l]=i[l]);if(o){a=o(i);for(var h=0;h<a.length;h++)s.call(i,a[h])&&(u[a[h]]=i[a[h]])}}return u}},ynHm:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksReload=function(){function e(){this.unload=t(this.unload,this),this.load=t(this.load,this),this.loaded={},addEventListener("turbolinks:before-cache",this.unload)}var i;return i="js-extra-script",e.prototype.load=function(t,e){var n;if(null==this.loaded[t])return n=document.createElement("script"),n.classList.add(i),n.onload=function(){if(null!=n.parentElement)return n.parentElement.removeChild(n),"function"==typeof e?e():void 0},n.src=t,document.body.appendChild(n),this.loaded[t]=!0},e.prototype.unload=function(){var t,e,n,o,r;for(o=document.querySelectorAll("."+i),r=[],e=0,n=o.length;e<n;e++)t=o[e],r.push(document.body.removeChild(t));return r},e}()}).call(window)},ynaH:function(t,e){(function(){var t,e;React.createElement,e=ReactDOMFactories.span,t="flag-country",this.FlagCountry=function(i){var n,o,r,s,a,u,c;if(r=i.country,o=null!=(c=i.classModifiers)?c:[],null==r.code)return e();for(n=t,s=0,a=o.length;s<a;s++)u=o[s],n+=" "+t+"--"+u;return e({className:n,title:r.name,style:{backgroundImage:"url('/images/flags/"+r.code+".png')"}})}}).call(window)},zvhu:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumCover=function(){function e(){this.refresh=t(this.refresh,this),this.remove=t(this.remove,this),this.updateOptions=t(this.updateOptions,this),this.update=t(this.update,this),this.setOverlay=t(this.setOverlay,this),this.openModal=t(this.openModal,this),this.toggleModal=t(this.toggleModal,this),this.initFileupload=t(this.initFileupload,this),this.isModalOpen=t(this.isModalOpen,this),this.hasCoverEditor=t(this.hasCoverEditor,this),this.hasCover=t(this.hasCover,this),this.closeModal=t(this.closeModal,this),this.$uploadButton=t(this.$uploadButton,this),this.header=document.getElementsByClassName("js-forum-cover--header"),this.uploadButton=document.getElementsByClassName("js-forum-cover--upload-button"),this.overlay=document.getElementsByClassName("js-forum-cover--overlay"),this.loading=document.getElementsByClassName("js-forum-cover--loading"),$(document).on("click",".js-forum-cover--open-modal",this.toggleModal),$(document).on("click",".js-forum-cover--remove",this.remove),$(document).on("click",this.closeModal),$.subscribe("dragenterGlobal",function(t){return function(){return t.setOverlay("active")}}(this)),$.subscribe("dragendGlobal",function(t){return function(){return t.setOverlay("hidden")}}(this)),$(document).on("dragenter",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("hover")}}(this)),$(document).on("dragleave",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("active")}}(this)),$.subscribe("key:esc",this.closeModal),$(document).on("turbolinks:load",this.refresh)}return e.prototype.$uploadButton=function(){return $(this.uploadButton[0])},e.prototype.closeModal=function(t){if(this.hasCoverEditor()&&this.isModalOpen()){if(t){if($(t.target).closest(".js-forum-cover--open-modal").length)return;if($(t.target).closest(".js-forum-cover--modal").length)return}if(!$("#overlay").is(":visible"))return Blackout.hide(),this.header[0].classList.remove("js-forum-cover--is-open"),this.isModalOpen(!1)}},e.prototype.hasCover=function(){return"post"!==this.uploadButton[0].dataset.customMethod},e.prototype.hasCoverEditor=function(){return this.uploadButton.length>0},e.prototype.isModalOpen=function(t){return!!this.hasCoverEditor()&&(null!=t&&(this.header[0].dataset.isModalOpen=t?"1":""),"1"===this.header[0].dataset.isModalOpen)},e.prototype.initFileupload=function(){var t;if(this.isModalOpen()&&!this.uploadButton[0]._initialized)return this.uploadButton[0]._initialized=!0,t=$(".js-forum-cover--modal"),this.$uploadButton().fileupload({method:"POST",paramName:"cover_file",dataType:"json",dropZone:t,submit:function(t){return function(){return t.loading[0].dataset.state="enabled"}}(this),done:function(t){return function(e,i){return t.update(i.result)}}(this),fail:osu.fileuploadFailCallback(this.$uploadButton),complete:function(t){return function(e,i){return t.loading[0].dataset.state=""}}(this)}),this.updateOptions()},e.prototype.toggleModal=function(t){return t.preventDefault(),this.isModalOpen()?this.closeModal():this.openModal()},e.prototype.openModal=function(){return Blackout.show(),this.isModalOpen(!0),this.header[0].classList.add("js-forum-cover--is-open"),this.initFileupload()},e.prototype.setOverlay=function(t){if(this.hasCoverEditor()&&t!==this.overlay[0].getAttribute("data-state"))return this.overlay[0].setAttribute("data-state",t)},e.prototype.update=function(t){return $(".js-forum-cover--input").val(t.id),this.uploadButton[0].dataset.url=t.url,this.uploadButton[0].dataset.customMethod=t.method,this.uploadButton[0].dataset.fileUrl=t.fileUrl||"",this.updateOptions(),this.refresh()},e.prototype.updateOptions=function(){if(this.uploadButton[0]._initialized)return this.$uploadButton().fileupload("option",{url:this.uploadButton[0].dataset.url,formData:{_method:this.uploadButton[0].dataset.customMethod}})},e.prototype.remove=function(t){if(t.preventDefault(),this.hasCover()&&confirm(t.currentTarget.dataset.destroyConfirm))return this.loading[0].dataset.state="enabled",$.ajax({url:this.uploadButton[0].dataset.url,method:"delete"}).done(function(t){return function(e){return t.update(e)}}(this)).always(function(t){return function(){return t.loading[0].dataset.state=""}}(this))},e.prototype.refresh=function(){var t,e;if(this.hasCoverEditor())return e=this.uploadButton[0].dataset.fileUrl||this.uploadButton[0].dataset.defaultFileUrl||null,t=null!=e?"url('"+e+"')":"",this.header[0].style.backgroundImage=t,$(".js-forum-cover--remove").toggleClass("js-disabled",!this.hasCover()),this.initFileupload()},e}()}).call(window)}});
//# sourceMappingURL=app.js.map